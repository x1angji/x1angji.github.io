<!DOCTYPE html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>butterfly主题魔改 | x1ang</title><meta name=keywords content=魔改,笔记,插件,博客><meta name=author content=x1ang><meta name=copyright content=x1ang><meta name=format-detection content="telephone=no"><meta name=theme-color content=#f7f9fe><meta name=mobile-web-app-capable content=yes><meta name=apple-touch-fullscreen content=yes><meta name=apple-mobile-web-app-title content=butterfly主题魔改><meta name=application-name content=butterfly主题魔改><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=#f7f9fe><meta property=og:type content=article><meta property=og:title content=butterfly主题魔改><meta property=og:url content=https://x1ang.com/2025/09/19/butterfly主题魔改/index.html><meta property=og:site_name content=x1ang><meta property=og:description content=记录了butterfly主题博客搭建时使用的插件和魔改细节><meta property=og:locale content=zh-CN><meta property=og:image content=https://assets.blog.x1ang.com/butterfly主题魔改/butterfly.webp><meta property=article:author content=x1ang><meta property=article:tag content=笔记、风光><meta name=twitter:card content=summary><meta name=twitter:image content=https://assets.blog.x1ang.com/butterfly主题魔改/butterfly.webp><meta name=description content=记录了butterfly主题博客搭建时使用的插件和魔改细节><link rel="shortcut icon" href=https://assets.blog.x1ang.com/config/hutao-icon.webp><link rel=canonical href=https://x1ang.com/2025/09/19/butterfly%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/ ><link rel=preconnect href=//cdn.cbd.int><meta name=google-site-verification content=xxx><meta name=baidu-site-verification content=code-xxx><meta name=msvalidate.01 content=xxx><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css media=print onload='this.media="all"'><script>let GLOBAL_CONFIG={linkPageTop:void 0,peoplecanvas:void 0,postHeadAiDescription:void 0,diytitle:{enable:!0,leaveTitle:"w(ﾟДﾟ)w 不要走！再看看嘛！",backTitle:"♪(^∇^*)欢迎肥来！"},LA51:{enable:!0,ck:"3NaLBWfYov0a5jYz",LingQueMonitorID:"3NaLBWfYov0a5jYz"},greetingBox:{enable:!0,default:"早上中午晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 再坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"好急，再坚持一下就下班咯～",startTime:14,endTime:18},{greeting:"🌈充实的一天辛苦啦！",startTime:19,endTime:19},{greeting:"晚上好👋, 决定去哪个平行世界放松了吗😌～",startTime:20,endTime:24}]},twikooEnvId:"https://comment.x1ang.com",commentBarrageConfig:{enable:!0,maxBarrage:1,barrageTime:8e3,accessToken:"",mailMd5:""},music_page_default:"nav_music",root:"/",preloader:{source:3},friends_vue_info:void 0,navMusic:!0,mainTone:void 0,authorStatus:{skills:["🤖️ 数码科技爱好者","🔍 分享与热心帮助"]},algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: x1ang",link:"链接: ",source:"来源: x1ang",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#2d3035",position:"top-right"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!0}</script><script id=config-diff>var GLOBAL_CONFIG_SITE={configTitle:"x1ang",title:"butterfly主题魔改",postAI:"",pageFillDescription:"前言, 注意事项, hexo与butterfly, 插件实现, 自动压缩文件, 字数统计, 文章搜索功能, Live2D, violet留言板, 统一首页背景, 页脚美化, 文章分类磁贴, 文章轮播, 导入外部字体, 元素动画, 导航栏魔改, 夜间模式标题霓虹灯, 外挂标签, 音乐插件, 文章标题旋转小风车, 自定义恶搞标题, Twikoo评论系统部署, b站视频适配, 评论区输入提示, diy通知样式, 个人信息卡片美化, 待定, 追番页面、游戏推荐, Github Action, 源码魔改, 分享本页, 文章统计图, 昼夜切换动画, 右键菜单, 待定本站已更换主题但本文中魔改教程依然可做参考主题魔改前言本站的搭建是完全基于开源项目以及配套文字教程博客搭建基础教程一同时在大佬的轮子上根据个人理解和喜好进行了一些取舍和修改如有侵权请联系删除写下这篇文章是为了记录博客魔改的过程方便以后对本站进行升级所以所有魔改操作被分成了两大类一类只需修改配置文件另一类则涉及主题源码的修改注意事项版本控制在每一步魔改操作前建议将代码推送至仓库确保有回滚能力因为设计主题源码的修改所以需要将复制到中避免被忽略路径约定本文中所有路径均采用以下约定博客根目录统一以指代主题目录统一以指代即代码标识规范涉及修改主题源码的内容会使用代码块标识请先了解相关语法资源管理魔改过程经常需要引入自定义的与文件文件位置可以根据个人习惯选择博主统一放在了下只需在的配置项中正确引入即可与待续未完插件实现该部分基本只通过安装模块或引入文件等手段丰富博客方便后续框架主题升级自动压缩文件生成静态文件时自动压缩图片等文件例如移除空格注释换行详细步骤安装模块修改配置修改中的部署自动压缩文件本地预览时是否压缩建议打开能随时纠错部分图片压缩后会出问题生成将插入压缩后的文件如果为则需要在浏览器开发者工具中手动添加详细配置详细配置详细配置详细配置详细配置详细配置详细配置详细配置详细配置字数统计文章页面头部侧边栏统计字数详细步骤安装模块修改配置修改中的文章页面头部显示总字数文章页面头部显示阅读时长侧边栏显示网站总字数文章搜索功能详细步骤安装依赖添加配置在中添加本地搜索系统修改配置修改中的预加载搜索数据显示前个搜索结果显示所有结果参考博客同款只有眼神跟踪鼠标功能且项目年已停止维护该项目作者推荐其他类似项目仍食用同款安装模块添加配置在中添加看板娘开关插件版看板娘自定义插件储存路径后下自定义脚本储存路径下子路径自定义模型储存路径下子路径标签模式是否仅替换标签而非插入到所有页面中调试是否在控制台输出日志若模型储存在下的模型目录名相对于的路径不建议储存在下后会出现两份看板娘位置大小手机是否展示使用现成模型一些现成的模型安装后修改配置文件自行下载模型该插件只支持的旧版模型即的文件格式不支持的本站的淮名真白在该库下载下载模型将模型放在下示例修改配置若模型储存在下时填入模型目录名留言板参考信笺样式留言板页面的信封留言板详细步骤安装模块添加配置在或中添加留言板控制开关信笺头部图片信笺底部图片信封前半部分信封后半部分信笺正文多行文本写法如下有什么想问的有什么想说的有什么想吐槽的哪怕是有什么想吃的都可以告诉我哦自动书记人偶竭诚为您服务仅支持单行文本信封划出的高度可选的路径名称默认为生成的页面为可选页面的配置留言板统一首页背景背景统一为一张图详细步骤在下新建添加以下代码页脚与头图透明效果为统一显示背景图添加一个黑遮罩避免看不清文字元素透明引入在主题配置文件中的配置项的子项引入文件注意此处以为根目录修改配置设置背景图同样是该文件中的配置项设置背景图或相对路径改成你自己的路径并将中的和配置项取消避免冗余加载页脚美化参考页脚添加徽标和计时器详细步骤安装模块添加配置在或中添加页脚美化页脚计时器页脚徽标计时器开关徽标开关过滤器优先权应用页面屏蔽页面挂载容器类型计时器部分配置项徽标部分配置项若非则开启轮播功能每行徽标个数制作徽标访问徽标指向网站链接徽标博客框架为主题版本本站线路托管于本站使用字体本站项目由托管本站采用知识共享署名非商业性使用相同方式共享国际许可协议进行许可新建添加以下代码可以自行修改建站时间建站时间更新时间计算时间差天数小时数分钟数秒数格式化时间动态生成页面内容本站居然运行了天小时分秒更新页面上的元素每秒更新一次新建添加以下代码修改第步添加的配置文件计时器部分配置项填你自己的相对地址为根目录文章分类磁贴参考插件文章分类美化组件详细步骤安装模块添加配置在中添加分类名字必须和文章的类名标签一一对应挂载的页面通过分类标签筛选列数教程小冰魔改教程游戏评测小冰游戏评测生活趣闻小冰生活趣闻小冰编程学习学习小冰读书笔记随想小冰胡思乱想文字默认颜色文字鼠标悬浮颜色背景默认颜色背景悬浮颜色黑夜模式适配在文件中添加以下代码具体颜色可以自己调节插件夜间模式适配恢复圆角平滑过渡效果颜色适配文章轮播参考置顶文章轮播组件详细步骤安装模块在博客根目录下打开终端运行以下指令添加配置在或中添加应用页面再怎么看我也不知道怎么描述它的啦默认文章描述依赖依赖适配主题样式补丁初始化方法文章置顶在文章的中添加和示例文章标题创建日期更新日期文章封面文章描述文章轮播插件中的描述置顶轮播图顺序大数靠前禁用滚轮切换文章功能自选组件范围较大在滚轮滑动页面过程中鼠标容易进入组件区域此时滚轮变成切换文章个人觉得影响体验禁用方法将配置项中下载到本地并注释掉其中然后修改配置指向本地禁用滚轮切换文章导入外部字体声明非商免字体未经授权仅限个人使用不得用于商业用途详细步骤准备字体放在下支持老版本等格式推荐压缩率最高在头部添加如下代码并在的配置项中引入自定义字体优先加载自定义字体名字体文件路径优化字体加载修改配置修改中的项以及项填入中自定义的名字元素动画参考为网页中的元素添加入场出场动画详细步骤安装模块添加配置在或中添加自定义动画移动端是否启用添加动画的元素的动画效果详解打开博客网页进入调试界面选中希望添加的元素读取元素或打开复制动画导航栏魔改导航栏居中子菜单横向显示详细步骤在中添加如下代码并在的配置项中引入导航栏布局一级菜单居中防止菜单项收缩子菜单横向展示导航栏子菜单居中对齐合并性能优化夜间模式标题霓虹灯主题夜间模式下首页正副标题导航栏添加霓虹灯效果详细步骤在中添加如下代码并在的配置项中引入导航栏霓虹灯效果性能优化加速主标题强度副标题强度导航栏强度三层阴影内层锐利光晕中层光晕外层扩散光晕强度三层阴影强度三层阴影为导航菜单添加静态霓虹效果手机端侧边栏静态霓虹效果外挂标签以外的美化标签详细步骤安装模块考虑到自带的渲染插件与外挂标签语法的兼容性较差建议将其替换成添加配置在或中添加外挂标签以外的美化标签开关过滤器优先权标签依赖注入开关标签默认的图标图片动画标签的依赖标签依赖标签依赖参看外挂标签的使用参考语法与外挂标签写法汇总音乐插件参考添加全局吸底教程详细步骤安装模块添加配置在中添加音乐播放器修改配置在中修改配置项引入播放器在主题配置文件中配置项的子项引入如下元素具体参数参考添加全局吸底教程霓虹灯其中为歌曲歌单在网页打开你的歌曲歌单将链接中填入此处文章标题旋转小风车为文章标题头部添加旋转风车效果详细步骤修改配置修改的配置项在中添加如下代码并在的配置项中引入文章页标题风车动画效果变量定义动画速度风车颜色配置风车大小配置风车位置微调风车旋转动画定义基础风车样式确保生效添加颜色过渡效果各级标题风车样式效果响应式优化移动端可以适当调整大小自定义恶搞标题详细步骤新建文件添加如下代码动态标题自动获取当前页面标题返回后多长时间恢复原标题定时器变量标题池还会再见吗燕子我会想你的你带我走吧燕子啊跑哪里去了燕子没有你我怎么活欢迎回来好久不见抓到你啦终于等到你随机获取标题处理页面可见性变化清理之前的定时器页面隐藏时页面显示时根据恢复原标题清理引用绑定事件页面卸载时清理支持更新原始标题引入在中配置项引入该文件评论系统部署详细步骤根据官方文档部署服务官方文档针对的部署博主使用的是数据库部署的方案按照这两部分操作即可云函数部署可选在上部署完成后可在项目页面的中配置自己的域名修改配置修改中和配置项填入步骤中的环境配置管理员密码启动项目随意进入一篇文章等待底部评论系统加载完成点击右下角设置按钮进入管理面板第一次进入管理面板需设置管理员登录密码在管理面板中可管理评论配置选项也有比较详细的注释这里不过多介绍站视频适配简单添加了几行样式详细步骤在中添加如下代码并在的配置项中引入哔哩哔哩视频适配引用视频网页版站视频分享按钮中选择嵌入代码复制代码在你文章中文件使用如下代码引入站视频替换为复制的内容注意如果不希望自动播放需在链接末尾加入评论区输入提示详细步骤在中添加如下代码并在的配置项中引入评论框提示文字定义提示文字内容输入号会自动获取昵称和头像收到回复将会发送到您的邮箱可以通过昵称访问您的网站提示框主体样式提示框小三角箭头输入框获得焦点时显示提示通知样式详细步骤新建添加如下代码通知通知显示消息提示消息内容显示时长默认用法操作成功切换完成检测当前主题创建通知容器创建通知元素根据主题设置样式进入动画自动消失点击关闭在的配置项中引入个人信息卡片美化详细步骤在中添加如下代码并在的配置项中引入图片换成你自己的侧边栏个人信息卡片美化背景图头像呼吸灯增强版白天模式呼吸灯倍效果夜间模式呼吸灯倍效果按钮待定详细步骤追番页面游戏推荐参考为博客添加追番追剧页面详细步骤安装插件使用数据源也可使用数据但站番剧不全故不推荐仍想使用自行查看仓库访问番组计划注册账号收藏你像添加的番剧或游戏打开控制台输入获取用户添加配置在中添加等参数替换为自己的追番设置是否启用数据源页面路径用户追番列表页面标题你所热爱的就是你的生活页面引言初始显示页面想看在看看过是否启用图片懒加载信息字体颜色简介字体颜色是否使用格式图片游戏设置仅支持一部游戏一段人生跌宕起伏的故事引人入胜的玩法余音绕梁的旋律沉浸式体验另一段时空页面美化在文件中添加以下代码具体颜色可以自己调节参考追番列表安知鱼番剧插件获取数据命令行运行随着文章越来越多在本地使用部署的时间也会越来越长借助我们只需将修改到远程仓库将工作交给完成详细步骤获取访问头像名称随意选择必须勾选项和项保存生成的注意只会显示一次后续无法查看如果遗忘了只能重新生成创建源码仓库如有可跳过需要创建一个用来存放博客源码的私有仓库创建完成后需要使用将本地的源码到仓库使用方法这里不展开可以参考简介教程廖雪峰的官方网站使用提交前配置避免把一些可自动生成的文件上传生成的文件缓存与临时文件编辑器相关系统临时文件配置新建添加以下配置当有改动推送到分支时启动自动部署检查分支安装替换成你本地使用的大版本用查看使用缓存确保你的被正确上传安装缓存安装依赖生成静态文件有其他需要运行的命令自行添加例如压缩等部署末尾指从本地分支推送到远程分支本地分支名不用修改远程改成博客静态文件仓库的主分支添加仓库秘钥到你的博客源码仓库的中添加点击将中使用的几个秘钥添加你的用户名例如我的博客静态文件仓库为在此处填入用于接收部署信息的邮箱第一步获取的自动部署使用随意推送一次提交到源码仓库打开源码仓库找到自动部署根据提交记录点进刚刚的提交点击即可查看部署过程源码魔改该部分涉及到主题源码的修改升级主题难以保留需重新魔改分享本页参考博客魔改教程总结三前置条件通知样式详细步骤侧边栏添加分享按钮在做以下修改分享链接新建添加如下代码获取的结尾会有字符你的站点名目的是去除结尾的字符根据你的站点名修改和的参数的参数为复制内容分享本页截取标题获取的结尾会有字符你的站点名修改的站内分享标题链接欢迎来访复制内容本页链接已复制到剪切板通知复制失败在中引入依赖和文件依赖分享本页文章统计图参考博客文章统计图博主只保留了其中的文章分类统计和的文章发布统计详细步骤安装模块导入文章统计代码新建文件然后添加以下代码文章发布统计图日期文章篇数文章篇数平均值标签统计图标签文章篇数文章篇数平均值文章分类统计图文章篇数文章篇数页面添加统计图注意一定要注释掉如果想保留分类页面原功能参考完整教程分类引入文章分类统计图页面添加统计图修改如下引入文章发布时间统计图适配修改如下昼夜切换动画参考博客魔改教程总结四前置条件页面通知样式详细步骤新建复制如下代码这部分是用模板语法定义的图标包含太阳和月亮通过控制这两个图标的旋转显隐和透明度变化实现日夜切换的动画效果新建复制如下代码新建复制如下代码并在的配置项中引入定义了一个通知函数后面也会有用到所以单独建了一个文件管理通知通知显示消息提示消息内容显示时长默认用法操作成功切换完成检测当前主题创建通知容器创建通知元素根据主题设置样式进入动画自动消失点击关闭新建复制如下代码并在的配置项中引入保存主题状态先设置太阳月亮透明度延时弹窗提醒天黑请闭眼先设置太阳月亮透明度天亮请睁眼修改日夜间模式切换动画修改把原本的昼夜切换按钮替换掉右键菜单参考博客魔改教程总结四前置条件通知样式昼夜切换动画右键菜单中没有的功能可以将其注释详细步骤新建添加如下代码其中关于博客的修改成你想跳转的页面复制文本谷歌搜索转到链接粘贴文本空降评论文章分类文章标签新窗口打开转到链接复制链接保存图片在新窗口打开复制图片链接复制地址昼夜切换全屏切换关于我修改在中添加如下代码并在的配置项中引入右键菜单菜单面板背景色菜单面板文字颜色鼠标悬浮选项颜色新建添加如下代码切换右键模式鼠标右键已恢复系统样式鼠标右键已更换为特殊样式设置遮罩浏览器等保存滚动条复制选中文字回到顶部核心滚动功能当关掉自定义右键时候直接返回读取剪贴板请允许读取剪贴板滚动消失的代码和阅读进度有冲突因此放到里面了初始化重置超时器能成功执行说明是长按如果来到这里说明是滑动到这里如果有值说明此触摸时间不足是点击全屏右键开关在的配置项中引入和依赖右键菜单依赖右键菜单侧边栏右键开关修改右键模式修改的配置项待定详细步骤",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-09-19 22:41:42",postMainColor:""}</script><noscript><style type=text/css>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{var o;0!==a&&(o=Date.now(),localStorage.setItem(e,JSON.stringify({value:t,expiry:o+864e5*a})))},get:e=>{var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!(Date.now()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=(o,c={})=>new Promise((t,e)=>{let a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},Object.keys(c).forEach(e=>{a.setAttribute(e,c[e])}),document.head.appendChild(a)}),e.getCSS=(o,c=!1)=>new Promise((t,e)=>{let a=document.createElement("link");a.rel="stylesheet",a.href=o,c&&(a.id=c),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};var e=saveToLocal.get("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,o=window.matchMedia("(prefers-color-scheme: no-preference)").matches,c=!t&&!a&&!o,t=(void 0===e?(a?activateLightMode():t?activateDarkMode():(o||c)&&((a=(new Date).getHours())<=6||18<=a?activateDarkMode:activateLightMode)(),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})):("light"===e?activateLightMode:activateDarkMode)(),saveToLocal.get("aside-status"));void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel=stylesheet href=/static/css/custom.css media=defer onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css media=defer onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css media=defer onload='this.media="all"'><script src=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js></script><meta name=generator content="Hexo 7.3.0"></head><body data-type=anzhiyu><div id=web_bg></div><div id=an_music_bg></div><div id=loading-box onclick=document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)><div class=loading-bg><img class="loading-img nolazyload" alt=加载头像 src=https://assets.blog.x1ang.com/config/keqing.webp><div class=loading-image-dot></div></div></div><script>let preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout(function(){preloader.endLoading()},1e4),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel=stylesheet href=https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css><script async=async src=https://cdn.cbd.int/pace-js@1.2.4/pace.min.js data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class=post id=body-wrap><header class=post-bg id=page-header><nav id=nav><div id=nav-group><span id=blog_name><a id=site-name href=/ accesskey=h><div class=title>x1ang</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id=he-plugin-simple></div><script>var WIDGET={CONFIG:{modules:"0124",background:"2",tmpColor:"FFFFFF",tmpSize:"16",cityColor:"FFFFFF",citySize:"16",aqiColor:"E8D87B",aqiSize:"16",weatherIconSize:"24",alertIconSize:"18",padding:"10px 10px 10px 10px",shadow:"0",language:"auto",borderRadius:"20",fixed:"true",vertical:"top",horizontal:"left",left:"20",top:"7.1",key:"df245676fb434a0691ead1c63341cd94"}}</script><link rel=stylesheet href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class=mask-name-container><div id=name-container><a id=page-name href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id=menus><div class=menus_items><div class=menus_item><a class=site-page href=javascript:void(0);><span>文章</span></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/archives/ ><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style=font-size:.9em></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/categories/ ><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style=font-size:.9em></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/tags/ ><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style=font-size:.9em></i><span> 标签</span></a></li></ul></div><div class=menus_item><a class=site-page href=javascript:void(0);><span>娱乐</span></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href="/music/?id=14348481143&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style=font-size:.9em></i><span> 音乐厅</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/animations/ ><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style=font-size:.9em></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/games/ ><i class="fas fa-gamepad faa-tada"></i><span> 游戏集</span></a></li></ul></div><div class=menus_item><a class="site-page faa-parent animated-hover" href=/album/ ><span>相册</span></a></div><div class=menus_item><a class=site-page href=javascript:void(0);><span>友链</span></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/link/ ><i class="anzhiyufont anzhiyu-icon-link faa-tada" style=font-size:.9em></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/comments/ ><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style=font-size:.9em></i><span> 留言板</span></a></li></ul></div><div class=menus_item><a class=site-page href=javascript:void(0);><span>关于</span></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/website/ ><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style=font-size:.9em></i><span> 关于网站</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/about/ ><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style=font-size:.9em></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/equipment/ ><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style=font-size:.9em></i><span> 我的装备</span></a></li></ul></div></div></div><div id=nav-right><div class="nav-button only-home" id=travellings_button title=随机前往一个开往项目网站><a class=site-page onclick=anzhiyu.totraveling() title=随机前往一个开往项目网站 href=javascript:void(0); rel="external nofollow" data-pjax-state=external><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class=nav-button id=randomPost_button><a class=site-page onclick=toRandomPost() title=随机前往一个文章 href=javascript:void(0);><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class=nav-button id=search-button><a class="site-page social-icon search" href=javascript:void(0); title=搜索🔍 accesskey=s><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id=center-console type=checkbox><label class=widget for=center-console title=中控台 onclick=anzhiyu.switchConsole()><i class=left></i><i class="widget center"></i><i class="widget right"></i></label><div id=console><div class=console-card-group-reward><ul class="reward-all console-card"><li class=reward-item><a href=https://assets.blog.x1ang.com/config/wechat.webp target=_blank><img class=post-qr-code-img alt=微信 src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/wechat.webp></a><div class=post-qr-code-desc>微信</div></li><li class=reward-item><a href=https://assets.blog.x1ang.com/config/alipay.webp target=_blank><img class=post-qr-code-img alt=支付宝 src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/alipay.webp></a><div class=post-qr-code-desc>支付宝</div></li></ul></div><div class=console-card-group><div class=console-card-group-left><div class=console-card id=card-newest-comments><div class=card-content><div class=author-content-item-tips>互动</div><span class=author-content-item-title>最新评论</span></div><div class=aside-list><span>正在加载中...</span></div></div></div><div class=console-card-group-right><div class="console-card tags"><div class=card-content><div class=author-content-item-tips>兴趣点</div><span class=author-content-item-title>寻找你感兴趣的领域</span><div class=card-tags><div class=item-headline></div><div class=card-tag-cloud><a href=/tags/C/ style=font-size:1.05rem>C++<sup>7</sup></a><a href=/tags/C-17/ style=font-size:1.05rem>C++17<sup>2</sup></a><a href=/tags/C-20/ style=font-size:1.05rem>C++20<sup>1</sup></a><a href=/tags/C-23/ style=font-size:1.05rem>C++23<sup>1</sup></a><a href=/tags/GaN%E7%94%B5%E6%BA%90/ style=font-size:1.05rem>GaN电源<sup>1</sup></a><a href=/tags/Protobuf/ style=font-size:1.05rem>Protobuf<sup>1</sup></a><a href=/tags/diy/ style=font-size:1.05rem>diy<sup>2</sup></a><a href=/tags/git/ style=font-size:1.05rem>git<sup>1</sup></a><a href=/tags/%E5%85%83%E7%BC%96%E7%A8%8B/ style=font-size:1.05rem>元编程<sup>1</sup></a><a href=/tags/%E5%8D%8A%E5%AF%BC%E4%BD%93/ style=font-size:1.05rem>半导体<sup>1</sup></a><a href=/tags/%E5%8D%9A%E5%AE%A2/ style=font-size:1.05rem>博客<sup>2</sup></a><a href=/tags/%E5%AE%8F/ style=font-size:1.05rem>宏<sup>1</sup></a><a href=/tags/%E5%BA%8F%E5%88%97%E5%8C%96/ style=font-size:1.05rem>序列化<sup>1</sup></a><a href=/tags/%E5%BD%97%E6%98%9F/ style=font-size:1.05rem>彗星<sup>1</sup></a><a href=/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ style=font-size:1.05rem>性能优化<sup>2</sup></a><a href=/tags/%E6%8F%92%E4%BB%B6/ style=font-size:1.05rem>插件<sup>2</sup></a><a href=/tags/%E6%98%BE%E7%A4%BA%E5%99%A8/ style=font-size:1.05rem>显示器<sup>1</sup></a><a href=/tags/%E7%8E%B0%E4%BB%A3C/ style=font-size:1.05rem>现代C++<sup>3</sup></a><a href=/tags/%E7%AC%94%E8%AE%B0/ style=font-size:1.05rem>笔记<sup>4</sup></a><a href=/tags/%E7%B1%BB%E5%9E%8B%E8%AE%BE%E8%AE%A1/ style=font-size:1.05rem>类型设计<sup>1</sup></a><a href=/tags/%E7%BC%96%E8%AF%91%E5%99%A8/ style=font-size:1.05rem>编译器<sup>3</sup></a><a href=/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ style=font-size:1.05rem>设计模式<sup>1</sup></a><a href=/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/ style=font-size:1.05rem>错误处理<sup>1</sup></a><a href=/tags/%E9%A3%8E%E5%85%89/ style=font-size:1.05rem>风光<sup>1</sup></a><a href=/tags/%E9%AD%94%E6%94%B9/ style=font-size:1.05rem>魔改<sup>6</sup></a></div></div><hr></div></div><div class="console-card history"><div class=item-headline><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div></div></div></div><div class=button-group><div class=console-btn-item><a class=darkmode_switchbutton title=显示模式切换 href=javascript:void(0);><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class=console-btn-item id=consoleHideAside onclick=anzhiyu.hideAsideBtn() title=边栏显示控制><a class=asideSwitch><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id=consoleCommentBarrage onclick=anzhiyu.switchCommentBarrage() title=热评开关><a class=commentBarrage><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class=console-btn-item id=consoleMusic onclick=anzhiyu.musicToggle() title=音乐开关><a class=music-switch><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class=console-mask onclick=anzhiyu.hideConsole() href=javascript:void(0);></div></div><div class=nav-button id=nav-totop><a class=totopbtn href=javascript:void(0);><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id=percent onclick=anzhiyu.scrollToDest(0,500)>0</span></a></div><div id=toggle-menu><a class=site-page href=javascript:void(0); title=切换><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id=post-info><div id=post-firstinfo><div class=meta-firstline><a class=post-meta-original>原创</a><span class=post-meta-categories><span class=post-meta-separator></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class=post-meta-categories href=/categories/%E5%A4%A7%E5%86%92%E9%99%A9/ itemprop=url>大冒险</a></span><span class="article-meta tags"><a class=article-meta__tags href=/tags/%E9%AD%94%E6%94%B9/ tabindex=-1 itemprop=url> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>魔改</span></a><a class=article-meta__tags href=/tags/%E7%AC%94%E8%AE%B0/ tabindex=-1 itemprop=url> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>笔记</span></a><a class=article-meta__tags href=/tags/%E6%8F%92%E4%BB%B6/ tabindex=-1 itemprop=url> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>插件</span></a><a class=article-meta__tags href=/tags/%E5%8D%9A%E5%AE%A2/ tabindex=-1 itemprop=url> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>博客</span></a></span></div></div><h1 class=post-title itemprop="name headline">butterfly主题魔改</h1><div id=post-meta><div class=meta-firstline><span class=post-meta-date><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class=post-meta-label>发表于</span><time class=post-meta-date-created itemprop="dateCreated datePublished" datetime=2025-09-19T14:41:42.000Z title="发表于 2025-09-19 22:41:42">2025-09-19</time><span class=post-meta-separator></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class=post-meta-label>更新于</span><time class=post-meta-date-updated itemprop="dateCreated datePublished" datetime=2025-09-19T14:41:42.000Z title="更新于 2025-09-19 22:41:42">2025-09-19</time></span></div><div class=meta-secondline><span class=post-meta-separator></span><span class=post-meta-wordcount><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title=文章字数></i><span class=post-meta-label title=文章字数>字数总计:</span><span class=word-count title=文章字数>16k</span><span class=post-meta-separator></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title=阅读时长></i><span class=post-meta-label title=阅读时长>阅读时长:</span><span>81分钟</span></span><span class=post-meta-separator></span><span class=post-meta-pv-cv id="" data-flag-title=butterfly主题魔改><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class=post-meta-label title=阅读量>阅读量:</span><span id=busuanzi_value_page_pv><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class=post-meta-separator> </span><span class=post-meta-position title=作者IP属地为海口><i class="anzhiyufont anzhiyu-icon-location-dot"></i>海口</span><span class=post-meta-separator></span><span class=post-meta-commentcount><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class=post-meta-label>评论数:</span><a href=/2025/09/19/butterfly%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/#post-comment tabindex=-1><span id=twikoo-count><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class=waves-svg xmlns=http://www.w3.org/2000/svg xlink=http://www.w3.org/1999/xlink viewBox="0 24 150 28" preserveAspectRatio=none shape-rendering=auto><defs><path id=gentle-wave d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class=parallax><use href=#gentle-wave x=48 y=0></use><use href=#gentle-wave x=48 y=3></use><use href=#gentle-wave x=48 y=5></use><use href=#gentle-wave x=48 y=7></use></g></svg></section><div id=post-top-cover><img class=nolazyload id=post-top-bg src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/butterfly主题魔改/butterfly.webp></div></header><main id=blog-container><div class=layout id=content-inner><div id=post><article class=post-content id=article-container itemscope itemtype=https://x1ang.com/2025/09/19/butterfly%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/ ><header><a class=post-meta-categories href=/categories/%E5%A4%A7%E5%86%92%E9%99%A9/ itemprop=url>大冒险</a><a href=/tags/%E9%AD%94%E6%94%B9/ tabindex=-1 itemprop=url>魔改</a><a href=/tags/%E7%AC%94%E8%AE%B0/ tabindex=-1 itemprop=url>笔记</a><a href=/tags/%E6%8F%92%E4%BB%B6/ tabindex=-1 itemprop=url>插件</a><a href=/tags/%E5%8D%9A%E5%AE%A2/ tabindex=-1 itemprop=url>博客</a><h1 id=CrawlerTitle itemprop="name headline">butterfly主题魔改</h1><span itemprop=author itemscope itemtype=http://schema.org/Person>x1ang</span><time itemprop="dateCreated datePublished" datetime=2025-09-19T14:41:42.000Z title="发表于 2025-09-19 22:41:42">2025-09-19</time><time itemprop="dateCreated datePublished" datetime=2025-09-19T14:41:42.000Z title="更新于 2025-09-19 22:41:42">2025-09-19</time></header><div class="note warning 注意 flat"><p>本站已更换anzhiyu主题，但本文中魔改教程依然可做参考。</p></div><a class=btn-anzhiyu href=/2025/10/17/anzhiyu%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/ title=anzhiyu主题魔改><i class="outline primary"></i><span>anzhiyu主题魔改</span></a><h1 id=前言><a href=#前言 class=headerlink title=前言></a>前言</h1><p>本站的搭建是完全基于开源项目<a target=_blank rel=noopener href=https://github.com/fomalhaut1998/hexo-theme-Fomalhaut>hexo-theme-Fomalhaut</a>，以及配套文字教程<a target=_blank rel=noopener href=https://www.fomal.cc/posts/e593433d.html>Hexo博客搭建基础教程(一) | Fomalhaut🥝</a><br>同时在大佬的轮子上根据个人理解和喜好，进行了一些取舍和修改，如有侵权请联系删除。<br>写下这篇文章是为了记录博客魔改的过程，方便以后对本站进行升级，所以所有魔改操作被分成了两大类，一类只需修改配置文件，另一类则涉及主题源码的修改。</p><h1 id=注意事项><a href=#注意事项 class=headerlink title=注意事项></a>注意事项</h1><ol><li><p><strong>版本控制</strong>：在每一步魔改操作前，建议将代码推送至GitHub仓库，确保有回滚能力。</p><p>（因为设计主题源码的修改，所以需要将<code>[BlogRoot]/node_modules/hexo-theme-butterfly</code>复制到<code>[BlogRoot]/themes/</code>中，避免被<code>.gitignore</code>忽略）</p></li><li><p><strong>路径约定</strong>：本文中所有路径均采用以下约定：</p><ul><li>博客根目录：统一以<code>[BlogRoot]</code>指代</li><li>主题目录：统一以<code>[ThemeRoot]</code>指代，即<code>[BlogRoot]/themes/hexo-theme-butterfly/</code></li></ul></li><li><p><strong>代码标识规范</strong>：涉及修改主题源码的内容，会使用<strong>diff代码块</strong>标识，请先了解相关语法。</p></li><li><p><strong>资源管理</strong>：魔改过程经常需要引入<strong>自定义</strong>的css与js文件，文件位置可以根据个人习惯选择，博主统一放在了<code>[BlogRoot]/source/static/</code>下，只需在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中正确引入即可。</p></li></ol><h1 id=hexo与butterfly><a href=#hexo与butterfly class=headerlink title=hexo与butterfly></a>hexo与butterfly</h1><p>待续未完</p><h1 id=插件实现><a href=#插件实现 class=headerlink title=插件实现></a>插件实现</h1><p>该部分基本只通过<code>安装模块</code>或<code>引入css、js文件</code>等手段丰富博客，方便后续框架、主题升级</p><h2 id=自动压缩文件><a href=#自动压缩文件 class=headerlink title=自动压缩文件></a>自动压缩文件</h2><p>生成静态文件时自动压缩css、js、图片等文件，例如移除空格、注释、换行<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-minify --save</span><br></pre></td></tr></table></figure></li><li><p>修改配置：修改<code>_config.butterfly.yml</code>中的<code>wordcount</code>。</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Hexo-minify</span></span><br><span class=line><span class=comment>## https://github.com/lete114/hexo-minify</span></span><br><span class=line><span class=comment>## 部署自动压缩文件</span></span><br><span class=line><span class=attr>minify:</span></span><br><span class=line>  <span class=attr>preview:</span> <span class=literal>true</span> <span class=comment># 本地预览时是否压缩，建议打开能随时纠错，部分图片压缩后会出问题</span></span><br><span class=line>  <span class=attr>exclude:</span> [<span class=string>&#x27;*.min.*&#x27;</span>]</span><br><span class=line>  <span class=attr>js:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>    <span class=attr>sourceMap:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>false</span> <span class=comment># 生成 sourceMap</span></span><br><span class=line>      <span class=comment># 将 sourceMappingURL 插入压缩后的 js 文件，如果为 false 则需要在浏览器开发者工具中手动添加 sourceMap</span></span><br><span class=line>      <span class=attr>sourceMappingURL:</span> <span class=literal>false</span> <span class=comment>## //# sourceMappingURL=xxx.js.map</span></span><br><span class=line>    <span class=comment># 详细配置: https://github.com/terser/terser#minify-options</span></span><br><span class=line>    <span class=attr>options:</span> &#123;&#125;</span><br><span class=line>  <span class=attr>css:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>    <span class=comment># 详细配置: https://github.com/clean-css/clean-css#compatibility-modes</span></span><br><span class=line>    <span class=attr>options:</span> &#123;&#125;</span><br><span class=line>  <span class=attr>html:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>    <span class=comment># 详细配置: https://github.com/kangax/html-minifier#options-quick-reference</span></span><br><span class=line>    <span class=attr>options:</span></span><br><span class=line>      <span class=attr>minifyJS:</span> <span class=literal>true</span> <span class=comment># Compressed JavaScript</span></span><br><span class=line>      <span class=attr>minifyCSS:</span> <span class=literal>true</span> <span class=comment># CSS Compressed</span></span><br><span class=line>      <span class=attr>removeComments:</span> <span class=literal>true</span> <span class=comment># Remove the comments</span></span><br><span class=line>      <span class=attr>collapseWhitespace:</span> <span class=literal>true</span> <span class=comment># Delete any extra space</span></span><br><span class=line>      <span class=attr>removeAttributeQuotes:</span> <span class=literal>true</span> <span class=comment># Delete attribute quotes</span></span><br><span class=line>  <span class=attr>image:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>    <span class=attr>svg:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment># 详细配置: https://github.com/imagemin/imagemin-svgo#imageminsvgooptionsbuffer</span></span><br><span class=line>      <span class=attr>options:</span> &#123;&#125;</span><br><span class=line>    <span class=attr>jpg:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment># 详细配置: https://github.com/imagemin/imagemin-jpegtran#options</span></span><br><span class=line>      <span class=attr>options:</span> &#123;&#125;</span><br><span class=line>    <span class=attr>png:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment># 详细配置: https://github.com/imagemin/imagemin-pngquant#options</span></span><br><span class=line>      <span class=attr>options:</span> &#123;&#125;</span><br><span class=line>    <span class=attr>gif:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment># 详细配置: https://www.npmjs.com/package/imagemin-gifsicle#options</span></span><br><span class=line>      <span class=attr>options:</span> &#123;&#125;</span><br><span class=line>    <span class=attr>webp:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment># 详细配置: https://github.com/imagemin/imagemin-webp#options</span></span><br><span class=line>      <span class=attr>options:</span> &#123;&#125;</span><br><span class=line>  <span class=attr>font:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>false</span></span><br><span class=line>    <span class=comment># 详细配置: https://github.com/Lete114/fontmin-spider#api</span></span><br><span class=line>    <span class=attr>options:</span> &#123;&#125;</span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=字数统计><a href=#字数统计 class=headerlink title=字数统计></a>字数统计</h2><p>文章页面头部、侧边栏统计字数<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure></li><li><p>修改配置：修改<code>_config.butterfly.yml</code>中的<code>wordcount</code>。</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo-wordcount</span></span><br><span class=line><span class=attr>wordcount:</span></span><br><span class=line> <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line> <span class=comment># 文章页面头部显示总字数</span></span><br><span class=line> <span class=attr>post_wordcount:</span> <span class=literal>true</span></span><br><span class=line> <span class=comment># 文章页面头部显示阅读时长</span></span><br><span class=line> <span class=attr>min2read:</span> <span class=literal>true</span></span><br><span class=line> <span class=comment># 侧边栏显示网站总字数</span></span><br><span class=line> <span class=attr>total_wordcount:</span> <span class=literal>true</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=文章搜索功能><a href=#文章搜索功能 class=headerlink title=文章搜索功能></a>文章搜索功能</h2><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装依赖</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>中添加：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class=comment># 本地搜索系统</span></span><br><span class=line><span class=attr>search:</span></span><br><span class=line>  <span class=attr>path:</span> <span class=string>search.xml</span></span><br><span class=line>  <span class=attr>field:</span> <span class=string>post</span></span><br><span class=line>  <span class=attr>content:</span> <span class=literal>true</span></span><br></pre></td></tr></table></figure></li><li><p>修改配置：修改<code>_config.butterfly.yml</code>中的<code>local_search</code>：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Local Search</span></span><br><span class=line><span class=attr>local_search:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>  <span class=comment># 预加载搜索数据</span></span><br><span class=line>  <span class=attr>preload:</span> <span class=literal>true</span></span><br><span class=line>  <span class=comment># n/-1，显示前n个搜索结果/显示所有结果</span></span><br><span class=line>  <span class=attr>top_n_per_article:</span> <span class=number>1</span></span><br><span class=line>  <span class=comment># Unescape html strings to the readable one.</span></span><br><span class=line>  <span class=attr>unescape:</span> <span class=literal>false</span></span><br><span class=line>  <span class=attr>CDN:</span></span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id=Live2D><a href=#Live2D class=headerlink title=Live2D></a>Live2D</h2><p>参考：<a target=_blank rel=noopener href=https://akilar.top/posts/5b8f515f/ >Live2d Widget</a><br>博客同款live2d只有眼神跟踪鼠标功能，且项目21年已停止维护<br>该项目作者推荐其他类似项目 <a target=_blank rel=noopener href=https://github.com/stevenjoezhang/live2d-widget>stevenjoezhang/live2d-widget</a></p><details class=folding-tag gray><summary>仍食用同款</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>中添加：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo-helper-live2d</span></span><br><span class=line><span class=comment>## 看板娘</span></span><br><span class=line><span class=comment>## https://github.com/EYHN/hexo-helper-live2d</span></span><br><span class=line><span class=attr>live2d:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span> <span class=comment>#开关插件版看板娘</span></span><br><span class=line>  <span class=attr>pluginRootPath:</span> <span class=string>static/live2dw/</span> <span class=comment># 自定义插件储存路径（hexo g后public/下）</span></span><br><span class=line>  <span class=attr>pluginJsPath:</span> <span class=string>lib/</span> <span class=comment># 自定义脚本储存路径（pluginRootPath下子路径）</span></span><br><span class=line>  <span class=attr>pluginModelPath:</span> <span class=string>assets/</span> <span class=comment># 自定义模型储存路径（pluginRootPath下子路径）</span></span><br><span class=line>  <span class=attr>tagMode:</span> <span class=literal>false</span> <span class=comment># 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span></span><br><span class=line>  <span class=attr>debug:</span> <span class=literal>false</span> <span class=comment># 调试, 是否在控制台输出日志</span></span><br><span class=line>  <span class=attr>model:</span></span><br><span class=line>    <span class=attr>use:</span> <span class=string>https://npm.elemecdn.com/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json</span></span><br><span class=line>    </span><br><span class=line>    <span class=comment># use: live2d-widget-model-wanko # npm install live2d-widget-model-wanko</span></span><br><span class=line></span><br><span class=line>    <span class=comment># use: wanko # 若模型储存在[BlogRoot]/live2d_models下的模型目录名</span></span><br><span class=line></span><br><span class=line>    <span class=comment># use: ./wanko # 相对于[BlogRoot]的路径（不建议储存在source下，hexo g后会出现两份）</span></span><br><span class=line>  <span class=comment>#看板娘位置、大小</span></span><br><span class=line>  <span class=attr>display:</span></span><br><span class=line>    <span class=attr>position:</span> <span class=string>right</span> </span><br><span class=line>    <span class=attr>width:</span> <span class=number>200</span> </span><br><span class=line>    <span class=attr>height:</span> <span class=number>400</span> </span><br><span class=line>  <span class=attr>mobile:</span></span><br><span class=line>    <span class=attr>show:</span> <span class=literal>false</span> <span class=comment># 手机是否展示</span></span><br></pre></td></tr></table></figure></li><li><p>使用现成模型</p><p>一些现成的模型<a target=_blank rel=noopener href=https://github.com/xiazeyu/live2d-widget-models> xiazeyu/live2d-widget-models</a></p><p>安装后修改配置文件：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=attr>model:</span></span><br><span class=line>  <span class=attr>use:</span> <span class=string>live2d-widget-model-wanko</span> <span class=comment># npm install live2d-widget-model-wanko</span></span><br></pre></td></tr></table></figure></li><li><p>自行下载模型</p><p>该插件只支持Live2D Cubism 2的旧版模型</p><p>即<code>.moc + .model.json</code>的文件格式，不支持 Cubism 3/4/5 的 <code>.moc3 + \*model3.json</code></p><p>本站的淮名真白在该库下载<a target=_blank rel=noopener href=https://github.com/Eikanya/Live2d-model/tree/master>Eikanya/Live2d-model: Live2d model collection</a></p><ol><li><p>下载模型，将模型放在 <code>[BlogRoot]/live2d_models/</code> 下，示例：</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line>[BlogRoot]</span><br><span class=line>└─live2d_models</span><br><span class=line>    └─mashiro</span><br><span class=line>        ├─seifuku.<span class=number>1024</span></span><br><span class=line>            └─*.png</span><br><span class=line>        ├─seifuku.motions</span><br><span class=line>            └─*.mtn</span><br><span class=line>        ├─seifuku.model.json</span><br><span class=line>        ├─seifuku.moc</span><br><span class=line>        ├─seifuku.pose.json</span><br><span class=line>        └─physics.json</span><br></pre></td></tr></table></figure></li><li><p>修改配置</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=attr>model:</span></span><br><span class=line>  <span class=attr>use:</span> <span class=string>mashiro</span> <span class=comment># 若模型储存在[BlogRoot]/live2d_models下时，填入模型目录名</span></span><br></pre></td></tr></table></figure></li></ol></li></ol></div></details><h2 id=violet留言板><a href=#violet留言板 class=headerlink title=violet留言板></a>violet留言板</h2><p>参考：<a target=_blank rel=noopener href=https://akilar.top/posts/e2d3c450/ >信笺样式留言板</a><br>页面/comments/的信封留言板<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-butterfly-envelope --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>或<code>_config.butterfly.yml</code>中添加：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo-butterfly-envelope</span></span><br><span class=line><span class=comment>## 留言板</span></span><br><span class=line><span class=comment>## see https://akilar.top/posts/e2d3c450/</span></span><br><span class=line><span class=attr>envelope_comment:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span> <span class=comment>#控制开关</span></span><br><span class=line>  <span class=attr>custom_pic:</span>      </span><br><span class=line>    <span class=attr>cover:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-envelope/lib/violet.jpg</span> <span class=comment>#信笺头部图片</span></span><br><span class=line>    <span class=attr>line:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-envelope/lib/line.png</span> <span class=comment>#信笺底部图片</span></span><br><span class=line>    <span class=attr>beforeimg:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-envelope/lib/before.png</span> <span class=comment># 信封前半部分</span></span><br><span class=line>    <span class=attr>afterimg:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-envelope/lib/after.png</span> <span class=comment># 信封后半部分</span></span><br><span class=line>  <span class=attr>message:</span> <span class=comment>#信笺正文，多行文本，写法如下</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>有什么想问的？</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>有什么想说的？</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>有什么想吐槽的？</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>哪怕是有什么想吃的，都可以告诉我哦~</span></span><br><span class=line>  <span class=attr>bottom:</span> <span class=string>自动书记人偶竭诚为您服务！</span> <span class=comment>#仅支持单行文本</span></span><br><span class=line>  <span class=attr>height:</span> <span class=comment>#1050px，信封划出的高度</span></span><br><span class=line>  <span class=attr>path:</span> <span class=comment>#【可选】comments 的路径名称。默认为 comments，生成的页面为 comments/index.html</span></span><br><span class=line>  <span class=attr>front_matter:</span> <span class=comment>#【可选】comments页面的 front_matter 配置</span></span><br><span class=line>    <span class=attr>title:</span> <span class=string>留言板</span></span><br><span class=line>    <span class=attr>comments:</span> <span class=literal>true</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=统一首页背景><a href=#统一首页背景 class=headerlink title=统一首页背景></a>统一首页背景</h2><p>背景统一为一张图<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>在<code>[BlogRoot]/static/css</code>下新建<code>custom.css</code>，添加以下代码：</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ===========================================</span></span><br><span class=line><span class=comment>   页脚与头图透明效果，为统一显示背景图</span></span><br><span class=line><span class=comment>   =========================================== */</span></span><br><span class=line><span class=comment>/* 添加一个黑遮罩，避免看不清文字 */</span></span><br><span class=line><span class=selector-id>#footer</span> &#123;</span><br><span class=line>  <span class=attribute>background</span>: <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>0</span>, <span class=number>0</span>, <span class=number>0.45</span>) <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 元素透明 */</span></span><br><span class=line><span class=selector-id>#footer</span><span class=selector-pseudo>::before</span>,</span><br><span class=line><span class=selector-id>#page-header</span>,</span><br><span class=line><span class=selector-id>#page-header</span><span class=selector-pseudo>::before</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#footer</span><span class=selector-pseudo>::before</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#page-header</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>background</span>: transparent <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>引入css</p><p>在主题配置文件<code>_config.butterfly.yml</code>中的<code>inject</code>配置项的<code>head</code>子项引入<code>custom.css</code>文件，注意此处以source为根目录</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=attr>inject:</span></span><br><span class=line>  <span class=attr>head:</span></span><br><span class=line>    <span class=comment># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;link</span> <span class=string>rel=&quot;stylesheet&quot;</span> <span class=string>href=&quot;/static/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>修改配置</p><p>设置背景图，同样是该文件中的<code>background</code>配置项设置背景图</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Website Background</span></span><br><span class=line><span class=comment># Can set it to color or image url</span></span><br><span class=line><span class=comment>## url(https://xxx/home.webp) 或 相对路径</span></span><br><span class=line><span class=attr>background:</span> <span class=string>/static/img/default_cover_1.webp</span> <span class=comment>#改成你自己的路径</span></span><br></pre></td></tr></table></figure><p>并将<code>_config.butterfly.yml</code>中的<code>index_img</code>和<code>footer_bg</code>配置项取消，避免冗余加载</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class=comment># The banner image of home page</span></span><br><span class=line><span class=attr>index_img:</span> </span><br><span class=line></span><br><span class=line><span class=comment># Footer Background</span></span><br><span class=line><span class=attr>footer_bg:</span> <span class=literal>false</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=页脚美化><a href=#页脚美化 class=headerlink title=页脚美化></a>页脚美化</h2><p>参考：<a target=_blank rel=noopener href=https://akilar.top/posts/e87ad7f8/ >Add Github Badge</a><br>页脚添加徽标和计时器<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-butterfly-footer-beautify --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>或<code>_config.butterfly.yml</code>中添加：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo-butterfly-footer-beautify</span></span><br><span class=line><span class=comment>## 页脚美化</span></span><br><span class=line><span class=comment>## 页脚计时器：[Native JS Timer](https://akilar.top/posts/b941af/)</span></span><br><span class=line><span class=comment>## 页脚徽标：[Add Github Badge](https://akilar.top/posts/e87ad7f8/)</span></span><br><span class=line><span class=attr>footer_beautify:</span></span><br><span class=line>  <span class=attr>enable:</span></span><br><span class=line>    <span class=attr>timer:</span> <span class=literal>true</span> <span class=comment># 计时器开关</span></span><br><span class=line>    <span class=attr>bdage:</span> <span class=literal>true</span> <span class=comment># 徽标开关</span></span><br><span class=line>  <span class=attr>priority:</span> <span class=number>10</span> <span class=comment># 过滤器优先权</span></span><br><span class=line>  <span class=attr>enable_page:</span> <span class=string>all</span> <span class=comment># 应用页面</span></span><br><span class=line>  <span class=attr>exclude:</span> <span class=comment># 屏蔽页面</span></span><br><span class=line>    <span class=comment># - /posts/</span></span><br><span class=line>    <span class=comment># - /about/</span></span><br><span class=line>  <span class=attr>layout:</span> <span class=comment># 挂载容器类型</span></span><br><span class=line>    <span class=attr>type:</span> <span class=string>class</span></span><br><span class=line>    <span class=attr>name:</span> <span class=string>footer-other</span></span><br><span class=line>    <span class=attr>index:</span> <span class=number>0</span></span><br><span class=line>  <span class=comment># 计时器部分配置项</span></span><br><span class=line>  <span class=attr>runtime_js:</span> </span><br><span class=line>  <span class=attr>runtime_css:</span> </span><br><span class=line>  <span class=comment># 徽标部分配置项</span></span><br><span class=line>  <span class=attr>swiperpara:</span> <span class=number>0</span> <span class=comment>#若非0，则开启轮播功能，每行徽标个数</span></span><br><span class=line>  <span class=attr>bdageitem:</span></span><br><span class=line>    <span class=comment># 制作徽标访问https://shields.io/badges/static-badge</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>link:</span> <span class=string>https://hexo.io/</span> <span class=comment># 徽标指向网站链接</span></span><br><span class=line>      <span class=attr>shields:</span> <span class=string>https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo</span> <span class=comment># 徽标API</span></span><br><span class=line>      <span class=attr>message:</span> <span class=string>博客框架为Hexo_v6.2.0</span> </span><br><span class=line>    <span class=bullet>-</span> <span class=attr>link:</span> <span class=string>https://butterfly.js.org/</span></span><br><span class=line>      <span class=attr>shields:</span> <span class=string>https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender</span></span><br><span class=line>      <span class=attr>message:</span> <span class=string>主题版本Butterfly_v4.3.1</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>link:</span> <span class=string>https://vercel.com/</span></span><br><span class=line>      <span class=attr>shields:</span> <span class=string>https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel</span></span><br><span class=line>      <span class=attr>message:</span> <span class=string>本站线路托管于Vercel</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>link:</span> <span class=string>https://hyperos.mi.com/font/zh/</span></span><br><span class=line>      <span class=attr>shields:</span> <span class=string>https://img.shields.io/badge/Font-Misans-EC6617?style=flat&amp;logo=xiaomi&amp;</span></span><br><span class=line>      <span class=attr>message:</span> <span class=string>本站使用</span> <span class=string>MiSans</span> <span class=string>字体</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>link:</span> <span class=string>https://github.com/</span></span><br><span class=line>      <span class=attr>shields:</span> <span class=string>https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub</span></span><br><span class=line>      <span class=attr>message:</span> <span class=string>本站项目由Github托管</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>link:</span> <span class=string>http://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br><span class=line>      <span class=attr>shields:</span> <span class=string>https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris</span></span><br><span class=line>      <span class=attr>message:</span> <span class=string>本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可</span></span><br><span class=line>  <span class=attr>swiper_css:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span></span><br><span class=line>  <span class=attr>swiper_js:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span></span><br><span class=line>  <span class=attr>swiperbdage_init_js:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js</span></span><br></pre></td></tr></table></figure></li><li><p>新建<code>[BlogRoot]/static/js/footer-runtime.js</code>，添加以下代码（可以自行diy，修改建站时间）：</p><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>var</span> now = <span class=keyword>new</span> <span class="title class_">Date</span>();</span><br><span class=line><span class=keyword>var</span> startDate = <span class=keyword>new</span> <span class="title class_">Date</span>(<span class=string>&quot;05/17/2025 12:00:00&quot;</span>); # 建站时间</span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">createtime</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class=comment>// 更新时间</span></span><br><span class=line>    now.<span class="title function_">setTime</span>(now.<span class="title function_">getTime</span>() + <span class=number>1000</span>);</span><br><span class=line></span><br><span class=line>    <span class=comment>// 计算时间差</span></span><br><span class=line>    <span class=keyword>var</span> totalMinutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>((now - startDate) / <span class=number>60000</span>);</span><br><span class=line>    <span class=keyword>var</span> r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(totalMinutes / <span class=number>1440</span>);        <span class=comment>// 天数</span></span><br><span class=line>    <span class=keyword>var</span> s = <span class="title class_">Math</span>.<span class="title function_">floor</span>((totalMinutes % <span class=number>1440</span>) / <span class=number>60</span>);  <span class=comment>// 小时数</span></span><br><span class=line>    <span class=keyword>var</span> l = <span class="title class_">Math</span>.<span class="title function_">floor</span>(totalMinutes % <span class=number>60</span>);          <span class=comment>// 分钟数</span></span><br><span class=line>    <span class=keyword>var</span> b = <span class="title class_">Math</span>.<span class="title function_">round</span>((now - startDate) / <span class=number>1000</span>) % <span class=number>60</span>; <span class=comment>// 秒数</span></span><br><span class=line></span><br><span class=line>    <span class=comment>// 格式化时间</span></span><br><span class=line>    s = <span class="title class_">String</span>(s).<span class="title function_">padStart</span>(<span class=number>2</span>, <span class=string>&quot;0&quot;</span>);</span><br><span class=line>    l = <span class="title class_">String</span>(l).<span class="title function_">padStart</span>(<span class=number>2</span>, <span class=string>&quot;0&quot;</span>);</span><br><span class=line>    b = <span class="title class_">String</span>(b).<span class="title function_">padStart</span>(<span class=number>2</span>, <span class=string>&quot;0&quot;</span>);</span><br><span class=line>    </span><br><span class=line>    <span class=comment>// 动态生成页面内容</span></span><br><span class=line>    <span class=keyword>let</span> content = <span class=string>`</span></span><br><span class=line><span class=string>        &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;</span></span><br><span class=line><span class=string>            本站居然运行了 <span class=subst>$&#123;r&#125;</span> 天 <span class=subst>$&#123;s&#125;</span> 小时 <span class=subst>$&#123;l&#125;</span> 分 <span class=subst>$&#123;b&#125;</span> 秒 </span></span><br><span class=line><span class=string>            &lt;i id=&quot;heartbeat&quot; class=&#x27;fas fa-heartbeat&#x27;&gt;&lt;/i&gt;</span></span><br><span class=line><span class=string>        &lt;/div&gt;`</span>;</span><br><span class=line></span><br><span class=line>    <span class=comment>// 更新页面上的元素</span></span><br><span class=line>    <span class=keyword>var</span> workboardElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;workboard&quot;</span>);</span><br><span class=line>    <span class=keyword>if</span> (workboardElement) &#123;</span><br><span class=line>        workboardElement.<span class=property>innerHTML</span> = content;</span><br><span class=line>    &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>// 每秒更新一次</span></span><br><span class=line><span class=built_in>setInterval</span>(createtime, <span class=number>1000</span>);</span><br></pre></td></tr></table></figure></li><li><p>新建<code>[BlogRoot]/static/css/footer-runtime.css</code>，添加以下代码：</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line><span class=selector-id>#workboard</span>&#123;<span class=attribute>font-size</span>:<span class=number>13px</span>;<span class=attribute>font-weight</span>:<span class=number>700</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改第2步添加的配置文件</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=comment># 计时器部分配置项 </span></span><br><span class=line><span class=attr>runtime_js:</span> <span class=string>static/js/footer-runtime.js</span> <span class=comment># 填你自己的相对地址（source为根目录）</span></span><br><span class=line><span class=attr>runtime_css:</span> <span class=string>static/css/footer-runtime.css</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=文章分类磁贴><a href=#文章分类磁贴 class=headerlink title=文章分类磁贴></a>文章分类磁贴</h2><p>参考：<a target=_blank rel=noopener href=https://zfe.space/post/hexo-magnet.html>hexo-magnet 插件 1.0</a><br>文章分类美化组件<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm i hexo-magnet --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>中添加：</p><p>分类名字<code>name</code>必须和文章的类名/标签一一对应</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre></td><td class=code><pre><span class=line><span class=attr>magnet:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>priority:</span> <span class=number>1</span></span><br><span class=line>  <span class=attr>enable_page:</span> <span class=string>/</span> <span class=comment># 挂载的页面</span></span><br><span class=line>  <span class=attr>type:</span> <span class=string>categories</span> <span class=comment># 通过分类/标签筛选，categories/tags</span></span><br><span class=line>  <span class=attr>devide:</span> <span class=number>2</span> <span class=comment># 列数</span></span><br><span class=line>  <span class=attr>display:</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>教程</span></span><br><span class=line>      <span class=attr>display_name:</span> <span class=string>小冰の魔改教程</span></span><br><span class=line>      <span class=attr>icon:</span> <span class=string>📚</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>游戏评测</span></span><br><span class=line>      <span class=attr>display_name:</span> <span class=string>小冰の游戏评测</span></span><br><span class=line>      <span class=attr>icon:</span> <span class=string>🎮</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>生活趣闻</span></span><br><span class=line>      <span class=attr>display_name:</span> <span class=string>小冰の生活趣闻</span></span><br><span class=line>      <span class=attr>icon:</span> <span class=string>🐱‍👓</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>vue</span></span><br><span class=line>      <span class=attr>display_name:</span> <span class=string>小冰の编程学习</span></span><br><span class=line>      <span class=attr>icon:</span> <span class=string>👩‍💻</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>学习</span></span><br><span class=line>      <span class=attr>display_name:</span> <span class=string>小冰の读书笔记</span></span><br><span class=line>      <span class=attr>icon:</span> <span class=string>📒</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>随想</span></span><br><span class=line>      <span class=attr>display_name:</span> <span class=string>小冰の胡思乱想</span></span><br><span class=line>      <span class=attr>icon:</span> <span class=string>💡</span></span><br><span class=line>  <span class=attr>color_setting:</span></span><br><span class=line>    <span class=attr>text_color:</span> <span class=string>black</span> <span class=comment># 文字默认颜色</span></span><br><span class=line>    <span class=attr>text_hover_color:</span> <span class=string>white</span> <span class=comment># 文字鼠标悬浮颜色</span></span><br><span class=line>    <span class=attr>background_color:</span> <span class=string>&quot;#f2f2f2&quot;</span> <span class=comment># 背景默认颜色</span></span><br><span class=line>    <span class=attr>background_hover_color:</span> <span class=string>&quot;#b30070&quot;</span> <span class=comment># 背景悬浮颜色</span></span><br><span class=line>  <span class=attr>layout:</span></span><br><span class=line>    <span class=attr>type:</span> <span class=string>id</span></span><br><span class=line>    <span class=attr>name:</span> <span class=string>recent-posts</span></span><br><span class=line>    <span class=attr>index:</span> <span class=number>0</span></span><br><span class=line>  <span class=attr>temple_html:</span> <span class=string>&#x27;&lt;div class=&quot;recent-post-item&quot; style=&quot;width:100%;height: auto&quot;&gt;&lt;div id=&quot;catalog_magnet&quot;&gt;$&#123;temple_html_item&#125;&lt;/div&gt;&lt;/div&gt;&#x27;</span></span><br><span class=line>  <span class=attr>plus_style:</span> <span class=string>&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>黑夜模式适配</p><p>在<code>[BlogRoot]/static/css/custom.css</code>文件中添加以下代码(具体颜色可以自己调节)：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre></td><td class=code><pre><span class=line>/* ===========================================</span><br><span class=line>   hexo-magnet 插件夜间模式适配</span><br><span class=line>   =========================================== */</span><br><span class=line>[data-theme=&quot;dark&quot;] .magnet_link_context &#123;</span><br><span class=line>  background-color: #1e1e1e;</span><br><span class=line>  color: antiquewhite;</span><br><span class=line>  /* 恢复圆角 */</span><br><span class=line>  border-radius: var(--magnet-border-radius, 6px);</span><br><span class=line>  /* 平滑过渡效果 */</span><br><span class=line>  transition: all 0.3s ease;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>/* 颜色适配 */</span><br><span class=line>[data-theme=&quot;dark&quot;] .magnet_link_context:hover &#123;</span><br><span class=line>  background-color: #3ecdf1;</span><br><span class=line>  color: #f2f2f2;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=文章轮播><a href=#文章轮播 class=headerlink title=文章轮播></a>文章轮播</h2><p>参考：<a target=_blank rel=noopener href=https://akilar.top/posts/8e1264d1/ >Swiper Bar</a><br>置顶文章轮播组件<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块,在博客根目录<code>[BlogRoot]</code>下打开终端，运行以下指令：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-butterfly-swiper --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>或<code>_config.butterfly.yml</code>中添加：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line># hexo-butterfly-swiper</span><br><span class=line># see https://akilar.top/posts/8e1264d1/</span><br><span class=line>swiper:</span><br><span class=line>  enable: true </span><br><span class=line>  priority: 5 </span><br><span class=line>  enable_page: / # 应用页面</span><br><span class=line>  timemode: date #date/updated</span><br><span class=line>  layout:</span><br><span class=line>    type: id</span><br><span class=line>    name: recent-posts</span><br><span class=line>    index: 0</span><br><span class=line>  default_descr: 再怎么看我也不知道怎么描述它的啦！ # 默认文章描述</span><br><span class=line>  swiper_css: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css #swiper css依赖</span><br><span class=line>  swiper_js: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js #swiper js依赖</span><br><span class=line>  custom_css: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css # 适配主题样式补丁</span><br><span class=line>  custom_js: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js # swiper初始化方法</span><br></pre></td></tr></table></figure></li><li><p>文章置顶</p><p>在文章的<code>front_matter</code>中添加<code>swiper_index</code>和<code>description</code>，示例：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>---</span><br><span class=line>title: 文章标题</span><br><span class=line>date: 创建日期</span><br><span class=line>updated: 更新日期</span><br><span class=line>cover: 文章封面</span><br><span class=line>description: 文章描述 #文章轮播插件中的描述</span><br><span class=line>swiper_index: 1 #置顶轮播图顺序，大数靠前</span><br><span class=line>---</span><br></pre></td></tr></table></figure></li><li><p>禁用滚轮切换文章功能（自选）</p><p>组件范围较大，在滚轮滑动页面过程中，鼠标容易进入组件区域，此时滚轮变成切换文章，个人觉得影响体验。禁用方法：</p><p>将配置项中<code>custom_js</code>下载到本地，并注释掉其中<code>mousewheel: true</code>，然后修改配置<code>custom_js</code>指向本地js：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line><span class=attr>custom_js:</span> <span class=string>/static/js/custom-swiper-init.js</span> <span class=comment>#禁用滚轮切换文章</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=导入外部字体><a href=#导入外部字体 class=headerlink title=导入外部字体></a>导入外部字体</h2><p><strong>声明：非商免字体未经授权仅限个人使用，不得用于商业用途！</strong><br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>准备字体，放在<code>source/</code>下</p><p>支持<em>.eot(老版本IE)，</em>.otf，<em>.ttf，</em>.woff，*.woff2等格式，推荐woff2，压缩率最高</p></li><li><p>在<code>[BlogRoot]/static/css/custom.css</code>头部添加如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ===========================================</span></span><br><span class=line><span class=comment>   自定义字体 - 优先加载</span></span><br><span class=line><span class=comment>   =========================================== */</span></span><br><span class=line><span class=keyword>@font-face</span> &#123;</span><br><span class=line>  <span class=attribute>font-family</span>: <span class=string>&#x27;MiSans-Regular&#x27;</span>; # 自定义字体名</span><br><span class=line>  <span class=attribute>src</span>: <span class=built_in>url</span>(<span class=string>/static/font/MiSans-Regular.woff2</span>) <span class=built_in>format</span>(<span class=string>&#x27;woff2&#x27;</span>); # 字体文件路径</span><br><span class=line>  </span><br><span class=line>  <span class=comment>/* 优化字体加载 */</span></span><br><span class=line>  <span class=attribute>font-display</span>: swap; </span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改配置：修改<code>_config.butterfly.yml</code>中的<code>font</code>项以及<code>blog_title_font</code>项</p><p>填入<code>@font-face</code>中自定义的名字：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Global font settings</span></span><br><span class=line><span class=comment># Don&#x27;t modify the following settings unless you know how they work</span></span><br><span class=line><span class=attr>font:</span></span><br><span class=line>  <span class=attr>global_font_size:</span> </span><br><span class=line>  <span class=attr>code_font_size:</span> </span><br><span class=line>  <span class=attr>font_family:</span> <span class=string>MiSans-Regular,</span> <span class=string>sans-serif</span></span><br><span class=line>  <span class=attr>code_font_family:</span> <span class=string>Consolas,</span> <span class=string>sans-serif</span></span><br><span class=line></span><br><span class=line><span class=comment># Font settings for the site title and site subtitle</span></span><br><span class=line><span class=attr>blog_title_font:</span></span><br><span class=line>  <span class=attr>font_link:</span></span><br><span class=line>  <span class=attr>font_family:</span> <span class=string>MiSans-Regular,</span> <span class=string>sans-serif</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=元素动画><a href=#元素动画 class=headerlink title=元素动画></a>元素动画</h2><p>参考：<a target=_blank rel=noopener href=https://akilar.top/posts/abab51cf/ >Add Blog Animation – Wowjs</a><br>为网页中的元素添加入场/出场动画<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-butterfly-wowjs --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>或<code>_config.butterfly.yml</code>中添加：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo-butterfly-wowjs</span></span><br><span class=line><span class=comment>## 自定义动画</span></span><br><span class=line><span class=comment>## https://github.com/Akilarlxh/hexo-butterfly-wowjs</span></span><br><span class=line><span class=comment>## https://animate.style/</span></span><br><span class=line><span class=attr>wowjs:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>priority:</span> <span class=number>10</span></span><br><span class=line>  <span class=attr>mobile:</span> <span class=literal>false</span> <span class=comment>#移动端是否启用</span></span><br><span class=line>  <span class=attr>animateitem:</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>class:</span> <span class=string>recent-post-item</span> <span class=comment># 添加动画的元素的class/id</span></span><br><span class=line>      <span class=attr>style:</span> <span class=string>animate__fadeIn</span> <span class=comment># 动画效果</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>class:</span> <span class=string>card-widget</span></span><br><span class=line>      <span class=attr>style:</span> <span class=string>animate__fadeIn</span></span><br><span class=line>  <span class=attr>animate_css:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</span></span><br><span class=line>  <span class=attr>wow_js:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</span></span><br><span class=line>  <span class=attr>wow_init_js:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</span></span><br><span class=line></span><br></pre></td></tr></table></figure></li><li><p><code>animateitem</code>详解</p><p><code>animateitem.class</code>：打开博客网页，<code>ctrl+shift+C</code>进入调试界面，选中希望添加的元素，读取元素id或class</p><p><code>animateitem.style</code>：打开<a target=_blank rel=noopener href=https://animate.style/，复制动画id>https://animate.style/，复制动画id</a></p></li></ol></div></details><p></p><h2 id=导航栏魔改><a href=#导航栏魔改 class=headerlink title=导航栏魔改></a>导航栏魔改</h2><p>导航栏居中、子菜单横向显示<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>在<code>[BlogRoot]/static/css/custom.css</code>中添加如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ===========================================</span></span><br><span class=line><span class=comment>   导航栏布局</span></span><br><span class=line><span class=comment>   =========================================== */</span></span><br><span class=line><span class=comment>/* 一级菜单居中 */</span></span><br><span class=line><span class=selector-id>#nav</span> <span class=selector-class>.menus_items</span> &#123;</span><br><span class=line>  <span class=attribute>position</span>: absolute <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>width</span>: fit-content <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>left</span>: <span class=number>50%</span> <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>transform</span>: <span class=built_in>translateX</span>(-<span class=number>50%</span>) <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 防止菜单项收缩 */</span></span><br><span class=line><span class=selector-id>#nav</span> <span class=selector-class>.menus_items</span> <span class=selector-class>.menus_item</span> &#123;</span><br><span class=line>  <span class=attribute>flex-shrink</span>: <span class=number>0</span> <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>white-space</span>: nowrap <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 子菜单横向展示 */</span></span><br><span class=line><span class=selector-id>#nav</span> <span class=selector-class>.menus_items</span> <span class=selector-class>.menus_item</span><span class=selector-pseudo>:hover</span> <span class=selector-class>.menus_item_child</span> &#123;</span><br><span class=line>  <span class=attribute>display</span>: flex <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 导航栏子菜单居中对齐 */</span></span><br><span class=line><span class=selector-class>.menus_items</span> <span class=selector-class>.menus_item</span> <span class=selector-class>.menus_item_child</span> &#123;</span><br><span class=line>  <span class=attribute>position</span>: absolute <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>top</span>: <span class=number>100%</span> <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>left</span>: <span class=number>50%</span> <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>transform</span>: <span class=built_in>translateX</span>(<span class=built_in>calc</span>(-<span class=number>50%</span> + <span class=number>7px</span>)) <span class=meta>!important</span>; <span class=comment>/* 合并transform */</span></span><br><span class=line>  <span class=attribute>white-space</span>: nowrap <span class=meta>!important</span>;</span><br><span class=line></span><br><span class=line>  <span class=comment>/* 性能优化 */</span></span><br><span class=line>  <span class=attribute>will-change</span>: transform;</span><br><span class=line>  <span class=attribute>backface-visibility</span>: hidden;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=夜间模式标题霓虹灯><a href=#夜间模式标题霓虹灯 class=headerlink title=夜间模式标题霓虹灯></a>夜间模式标题霓虹灯</h2><p>主题夜间模式下首页正副标题、导航栏添加霓虹灯效果<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>在<code>[BlogRoot]/static/css/custom.css</code>中添加如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br><span class=line>106</span><br><span class=line>107</span><br><span class=line>108</span><br><span class=line>109</span><br><span class=line>110</span><br><span class=line>111</span><br><span class=line>112</span><br><span class=line>113</span><br><span class=line>114</span><br><span class=line>115</span><br><span class=line>116</span><br><span class=line>117</span><br><span class=line>118</span><br><span class=line>119</span><br><span class=line>120</span><br><span class=line>121</span><br><span class=line>122</span><br><span class=line>123</span><br><span class=line>124</span><br><span class=line>125</span><br><span class=line>126</span><br><span class=line>127</span><br><span class=line>128</span><br><span class=line>129</span><br><span class=line>130</span><br><span class=line>131</span><br><span class=line>132</span><br><span class=line>133</span><br><span class=line>134</span><br><span class=line>135</span><br><span class=line>136</span><br><span class=line>137</span><br><span class=line>138</span><br><span class=line>139</span><br><span class=line>140</span><br><span class=line>141</span><br><span class=line>142</span><br><span class=line>143</span><br><span class=line>144</span><br><span class=line>145</span><br><span class=line>146</span><br><span class=line>147</span><br><span class=line>148</span><br><span class=line>149</span><br><span class=line>150</span><br><span class=line>151</span><br><span class=line>152</span><br><span class=line>153</span><br><span class=line>154</span><br><span class=line>155</span><br><span class=line>156</span><br><span class=line>157</span><br><span class=line>158</span><br><span class=line>159</span><br><span class=line>160</span><br><span class=line>161</span><br><span class=line>162</span><br><span class=line>163</span><br><span class=line>164</span><br><span class=line>165</span><br><span class=line>166</span><br><span class=line>167</span><br><span class=line>168</span><br><span class=line>169</span><br><span class=line>170</span><br><span class=line>171</span><br><span class=line>172</span><br><span class=line>173</span><br><span class=line>174</span><br><span class=line>175</span><br><span class=line>176</span><br><span class=line>177</span><br><span class=line>178</span><br><span class=line>179</span><br><span class=line>180</span><br><span class=line>181</span><br><span class=line>182</span><br><span class=line>183</span><br><span class=line>184</span><br><span class=line>185</span><br><span class=line>186</span><br><span class=line>187</span><br><span class=line>188</span><br><span class=line>189</span><br><span class=line>190</span><br><span class=line>191</span><br><span class=line>192</span><br><span class=line>193</span><br><span class=line>194</span><br><span class=line>195</span><br><span class=line>196</span><br><span class=line>197</span><br><span class=line>198</span><br><span class=line>199</span><br><span class=line>200</span><br><span class=line>201</span><br><span class=line>202</span><br><span class=line>203</span><br><span class=line>204</span><br><span class=line>205</span><br><span class=line>206</span><br><span class=line>207</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ===========================================</span></span><br><span class=line><span class=comment>   导航栏霓虹灯效果</span></span><br><span class=line><span class=comment>   =========================================== */</span></span><br><span class=line><span class=comment>/* 性能优化：GPU加速 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#site-name</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#site-title</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#site-subtitle</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#post-info</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-class>.author-info__name</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-class>.author-info__description</span> &#123;</span><br><span class=line>  <span class=attribute>will-change</span>: text-shadow;</span><br><span class=line>  <span class=attribute>transform</span>: <span class=built_in>translateZ</span>(<span class=number>0</span>);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 主标题 - 15px强度 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#site-name</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#site-title</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-class>.author-info__name</span> &#123;</span><br><span class=line>  <span class=attribute>animation</span>: hk-neon-<span class=number>15px</span> <span class=number>8s</span> ease-in-out infinite;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 副标题 - 10px强度 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#site-subtitle</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-class>.author-info__description</span> &#123;</span><br><span class=line>  <span class=attribute>animation</span>: hk-neon-<span class=number>10px</span> <span class=number>8s</span> ease-in-out infinite;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 导航栏 - 5px强度 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#post-info</span> &#123;</span><br><span class=line>  <span class=attribute>animation</span>: hk-neon-<span class=number>5px</span> <span class=number>8s</span> ease-in-out infinite;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 15px（三层阴影） */</span></span><br><span class=line><span class=keyword>@keyframes</span> hk-neon-<span class=number>15px</span> &#123;</span><br><span class=line>  <span class=number>0%</span>, <span class=number>100%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>3px</span> <span class=number>#FF1493</span>,                    <span class=comment>/* 内层锐利光晕 */</span></span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>12px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>20</span>, <span class=number>147</span>, <span class=number>0.8</span>),   <span class=comment>/* 中层光晕 */</span></span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>30px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>20</span>, <span class=number>147</span>, <span class=number>0.4</span>);   <span class=comment>/* 外层扩散光晕 */</span></span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>12.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>3px</span> <span class=number>#00BFFF</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>12px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>30px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>25%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>3px</span> <span class=number>#00FF7F</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>12px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>127</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>30px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>127</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>37.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>3px</span> <span class=number>#FFFF00</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>12px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>255</span>, <span class=number>0</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>30px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>255</span>, <span class=number>0</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>50%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>3px</span> <span class=number>#FF4500</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>12px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>69</span>, <span class=number>0</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>30px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>69</span>, <span class=number>0</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>62.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>3px</span> <span class=number>#8A2BE2</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>12px</span> <span class=built_in>rgba</span>(<span class=number>138</span>, <span class=number>43</span>, <span class=number>226</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>30px</span> <span class=built_in>rgba</span>(<span class=number>138</span>, <span class=number>43</span>, <span class=number>226</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>75%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>3px</span> <span class=number>#00FFFF</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>12px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>255</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>30px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>255</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>87.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>3px</span> <span class=number>#FF0040</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>12px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>0</span>, <span class=number>64</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>30px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>0</span>, <span class=number>64</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 10px强度（三层阴影） */</span></span><br><span class=line><span class=keyword>@keyframes</span> hk-neon-<span class=number>10px</span> &#123;</span><br><span class=line>  <span class=number>0%</span>, <span class=number>100%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#FF1493</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>20</span>, <span class=number>147</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>20px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>20</span>, <span class=number>147</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>12.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#00BFFF</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>20px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>25%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#00FF7F</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>127</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>20px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>127</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>37.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#FFFF00</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>255</span>, <span class=number>0</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>20px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>255</span>, <span class=number>0</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>50%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#FF4500</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>69</span>, <span class=number>0</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>20px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>69</span>, <span class=number>0</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>62.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#8A2BE2</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>138</span>, <span class=number>43</span>, <span class=number>226</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>20px</span> <span class=built_in>rgba</span>(<span class=number>138</span>, <span class=number>43</span>, <span class=number>226</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>75%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#00FFFF</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>255</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>20px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>255</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>87.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#FF0040</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>0</span>, <span class=number>64</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>20px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>0</span>, <span class=number>64</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 5px强度（三层阴影） */</span></span><br><span class=line><span class=keyword>@keyframes</span> hk-neon-<span class=number>5px</span> &#123;</span><br><span class=line>  <span class=number>0%</span>, <span class=number>100%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>1px</span> <span class=number>#FF1493</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>4px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>20</span>, <span class=number>147</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>10px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>20</span>, <span class=number>147</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>12.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>1px</span> <span class=number>#00BFFF</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>4px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>10px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>25%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>1px</span> <span class=number>#00FF7F</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>4px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>127</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>10px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>127</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>37.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>1px</span> <span class=number>#FFFF00</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>4px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>255</span>, <span class=number>0</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>10px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>255</span>, <span class=number>0</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>50%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>1px</span> <span class=number>#FF4500</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>4px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>69</span>, <span class=number>0</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>10px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>69</span>, <span class=number>0</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>62.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>1px</span> <span class=number>#8A2BE2</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>4px</span> <span class=built_in>rgba</span>(<span class=number>138</span>, <span class=number>43</span>, <span class=number>226</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>10px</span> <span class=built_in>rgba</span>(<span class=number>138</span>, <span class=number>43</span>, <span class=number>226</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>75%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>1px</span> <span class=number>#00FFFF</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>4px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>255</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>10px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>255</span>, <span class=number>255</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>87.5%</span> &#123;</span><br><span class=line>    <span class=attribute>text-shadow</span>:</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>1px</span> <span class=number>#FF0040</span>,</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>4px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>0</span>, <span class=number>64</span>, <span class=number>0.8</span>),</span><br><span class=line>      <span class=number>0</span> <span class=number>0</span> <span class=number>10px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>0</span>, <span class=number>64</span>, <span class=number>0.4</span>);</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 为导航菜单添加静态霓虹效果 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#nav</span> <span class=selector-class>.site-page</span>,</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#nav</span> <span class=selector-class>.menus_items</span> <span class=selector-class>.menus_item</span> <span class=selector-class>.menus_item_child</span> <span class=selector-tag>li</span> <span class=selector-tag>a</span> &#123;</span><br><span class=line>  <span class=attribute>text-shadow</span>:</span><br><span class=line>    <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#00BFFF</span>,</span><br><span class=line>    <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.8</span>),</span><br><span class=line>    <span class=number>0</span> <span class=number>0</span> <span class=number>16px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.4</span>)</span><br><span class=line>    <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>transition</span>: text-shadow <span class=number>0.3s</span> ease;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 手机端侧边栏静态霓虹效果 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#sidebar</span> <span class=selector-id>#sidebar-menus</span> <span class=selector-class>.menus_items</span> <span class=selector-class>.site-page</span> &#123;</span><br><span class=line>  <span class=attribute>text-shadow</span>:</span><br><span class=line>    <span class=number>0</span> <span class=number>0</span> <span class=number>2px</span> <span class=number>#00BFFF</span>,</span><br><span class=line>    <span class=number>0</span> <span class=number>0</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.8</span>),</span><br><span class=line>    <span class=number>0</span> <span class=number>0</span> <span class=number>16px</span> <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>191</span>, <span class=number>255</span>, <span class=number>0.4</span>)</span><br><span class=line>    <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=外挂标签><a href=#外挂标签 class=headerlink title=外挂标签></a>外挂标签</h2><p>markdown以外的美化标签<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-butterfly-tag-plugins-plus --save</span><br></pre></td></tr></table></figure><p>考虑到hexo自带的markdown渲染插件<code>hexo-renderer-marked</code>与外挂标签语法的兼容性较差，建议将其替换成<a target=_blank rel=noopener href=https://www.npmjs.com/package/hexo-renderer-kramed>hexo-renderer-kramed</a></p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>npm uninstall hexo-renderer-marked --save</span><br><span class=line>npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>或<code>_config.butterfly.yml</code>中添加：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line><span class=comment># tag-plugins-plus</span></span><br><span class=line><span class=comment>## 外挂标签，markdown以外的美化标签</span></span><br><span class=line><span class=comment>## see https://akilar.top/posts/615e2dec/</span></span><br><span class=line><span class=attr>tag_plugins:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span> <span class=comment># 开关</span></span><br><span class=line>  <span class=attr>priority:</span> <span class=number>5</span> <span class=comment>#过滤器优先权</span></span><br><span class=line>  <span class=attr>issues:</span> <span class=literal>false</span> <span class=comment>#issues标签依赖注入开关</span></span><br><span class=line>  <span class=attr>link:</span></span><br><span class=line>    <span class=attr>placeholder:</span>  <span class=comment>#link_card标签默认的图标图片</span></span><br><span class=line>  <span class=attr>CDN:</span></span><br><span class=line>    <span class=attr>anima:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css</span> <span class=comment>#动画标签anima的依赖</span></span><br><span class=line>    <span class=attr>jquery:</span> <span class=string>https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js</span> <span class=comment>#issues标签依赖</span></span><br><span class=line>    <span class=attr>issues:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/issues.js</span> <span class=comment>#issues标签依赖</span></span><br><span class=line>    <span class=attr>iconfont:</span> <span class=string>//at.alicdn.com/t/font_2032782_8d5kxvn09md.js</span> <span class=comment>#参看https://akilar.top/posts/d2ebecef/</span></span><br><span class=line>    <span class=attr>carousel:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js</span></span><br><span class=line>    <span class=attr>tag_plugins_css:</span> <span class=string>https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css</span></span><br></pre></td></tr></table></figure></li><li><p>外挂标签的使用参考：<a target=_blank rel=noopener href=https://www.fomal.cc/posts/2013454d.html>Markdown语法与外挂标签写法汇总</a></p></li></ol></div></details><p></p><h2 id=音乐插件><a href=#音乐插件 class=headerlink title=音乐插件></a>音乐插件</h2><p>参考：<a target=_blank rel=noopener href=https://butterfly.js.org/posts/507c070f/ >Butterfly添加全局吸底Aplayer教程</a><br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-tag-aplayer --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置：在<code>_config.yml</code>中添加：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo-tag-aplayer</span></span><br><span class=line><span class=comment># 音乐播放器</span></span><br><span class=line><span class=attr>aplayer:</span></span><br><span class=line>  <span class=attr>meting:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>asset_inject:</span> <span class=literal>false</span></span><br></pre></td></tr></table></figure></li><li><p>修改配置：在<code>_config.butterfly.yml</code>中修改<code>aplayerInject</code>配置项：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Inject the css and script (aplayer/meting)</span></span><br><span class=line><span class=attr>aplayerInject:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>per_page:</span> <span class=literal>false</span></span><br></pre></td></tr></table></figure></li><li><p>引入播放器</p><p>在主题配置文件<code>_config.butterfly.yml</code>中<code>inject</code>配置项的<code>bottom</code>子项引入如下元素，具体参数参考<a target=_blank rel=noopener href=https://butterfly.js.org/posts/507c070f/ >Butterfly添加全局吸底Aplayer教程</a></p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Inject</span></span><br><span class=line><span class=comment># Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span></span><br><span class=line><span class=attr>inject:</span></span><br><span class=line>  <span class=attr>head:</span></span><br><span class=line>    <span class=comment># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;link</span> <span class=string>rel=&quot;stylesheet&quot;</span> <span class=string>href=&quot;/static/css/custom.css&quot;&gt;</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;link</span> <span class=string>rel=&quot;stylesheet&quot;</span> <span class=string>href=&quot;/static/css/title-night-light.css&quot;&gt;</span> <span class=comment># 霓虹灯</span></span><br><span class=line>  <span class=attr>bottom:</span></span><br><span class=line>    <span class=comment># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;div</span> <span class=string>class=&quot;aplayer</span> <span class=literal>no</span><span class=string>-destroy&quot;</span> <span class=string>data-id=&quot;14320891825&quot;</span> <span class=string>data-server=&quot;netease&quot;</span> <span class=string>data-type=&quot;playlist&quot;</span> <span class=string>data-fixed=&quot;true&quot;</span> <span class=string>data-mini=&quot;true&quot;</span> <span class=string>data-autoplay=&quot;false&quot;</span> <span class=string>data-volume=&quot;0.3&quot;</span> <span class=string>data-order=&quot;random&quot;&gt;</span> <span class=string>&lt;/div&gt;</span></span><br><span class=line></span><br></pre></td></tr></table></figure><p>其中<code>data-id</code>为歌曲/歌单ID，在网页打开你的歌曲/歌单，将链接中<code>id=14320891825</code>填入此处。</p></li></ol></div></details><p></p><h2 id=文章标题旋转小风车><a href=#文章标题旋转小风车 class=headerlink title=文章标题旋转小风车></a>文章标题旋转小风车</h2><p>为文章H1~H6标题头部添加旋转风车效果<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>修改配置：修改<code>_config.butterfly.yml</code>的<code>beautify.title_prefix_icon</code>配置项：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Configuration for beautifying the content of the article</span></span><br><span class=line><span class=attr>beautify:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>  <span class=comment># Specify the field to beautify (site or post)</span></span><br><span class=line>  <span class=attr>field:</span> <span class=string>post</span></span><br><span class=line>  <span class=comment># Specify the icon to be used as a prefix for the title, such as &#x27;\f0c1&#x27;</span></span><br><span class=line>  <span class=attr>title_prefix_icon:</span> <span class=string>&#x27;\f863&#x27;</span></span><br><span class=line>  <span class=comment># Specify the color of the title prefix icon, such as &#x27;#F47466&#x27;</span></span><br><span class=line>  <span class=attr>title_prefix_icon_color:</span> <span class=string>&#x27;#F47466&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>在<code>[BlogRoot]/static/css/custom.css</code>中添加如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br><span class=line>106</span><br><span class=line>107</span><br><span class=line>108</span><br><span class=line>109</span><br><span class=line>110</span><br><span class=line>111</span><br><span class=line>112</span><br><span class=line>113</span><br><span class=line>114</span><br><span class=line>115</span><br><span class=line>116</span><br><span class=line>117</span><br><span class=line>118</span><br><span class=line>119</span><br><span class=line>120</span><br><span class=line>121</span><br><span class=line>122</span><br><span class=line>123</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ========================================</span></span><br><span class=line><span class=comment>   文章页 H1-H6 标题风车动画效果</span></span><br><span class=line><span class=comment>   ======================================== */</span></span><br><span class=line><span class=comment>/* 变量定义 */</span></span><br><span class=line><span class=selector-pseudo>:root</span> &#123;</span><br><span class=line>  <span class=comment>/* 动画速度 */</span></span><br><span class=line>  <span class=attr>--animation-speed-normal</span>: <span class=number>4s</span>;</span><br><span class=line>  <span class=attr>--animation-speed-hover</span>: <span class=number>6s</span>;</span><br><span class=line>  </span><br><span class=line>  <span class=comment>/* 风车颜色配置 */</span></span><br><span class=line>  <span class=attr>--h1-color</span>: <span class=number>#ef50a8</span>;</span><br><span class=line>  <span class=attr>--h2-color</span>: <span class=number>#fb7061</span>;</span><br><span class=line>  <span class=attr>--h3-color</span>: <span class=number>#ffbf00</span>;</span><br><span class=line>  <span class=attr>--h4-color</span>: <span class=number>#a9e000</span>;</span><br><span class=line>  <span class=attr>--h5-color</span>: <span class=number>#57c850</span>;</span><br><span class=line>  <span class=attr>--h6-color</span>: <span class=number>#5ec1e0</span>;</span><br><span class=line>  </span><br><span class=line>  <span class=comment>/* 风车大小配置 */</span></span><br><span class=line>  <span class=attr>--h1-size</span>: <span class=number>1.3rem</span>;</span><br><span class=line>  <span class=attr>--h2-size</span>: <span class=number>1.1rem</span>;</span><br><span class=line>  <span class=attr>--h3-size</span>: <span class=number>0.95rem</span>;</span><br><span class=line>  <span class=attr>--h4-size</span>: <span class=number>0.8rem</span>;</span><br><span class=line>  <span class=attr>--h5-size</span>: <span class=number>0.7rem</span>;</span><br><span class=line>  <span class=attr>--h6-size</span>: <span class=number>0.66rem</span>;</span><br><span class=line>  </span><br><span class=line>  <span class=comment>/* 风车位置微调 */</span></span><br><span class=line>  <span class=attr>--h1-left</span>: -<span class=number>1.55rem</span>;</span><br><span class=line>  <span class=attr>--h1-top</span>: -<span class=number>0.23rem</span>;</span><br><span class=line>  <span class=attr>--h2-left</span>: -<span class=number>1.35rem</span>;</span><br><span class=line>  <span class=attr>--h2-top</span>: -<span class=number>0.12rem</span>;</span><br><span class=line>  <span class=attr>--h3-left</span>: -<span class=number>1.22rem</span>;</span><br><span class=line>  <span class=attr>--h3-top</span>: -<span class=number>0.09rem</span>;</span><br><span class=line>  <span class=attr>--h4-left</span>: -<span class=number>1.05rem</span>;</span><br><span class=line>  <span class=attr>--h4-top</span>: -<span class=number>0.09rem</span>;</span><br><span class=line>  <span class=attr>--h5-left</span>: -<span class=number>0.9rem</span>;</span><br><span class=line>  <span class=attr>--h5-top</span>: <span class=number>0</span>;</span><br><span class=line>  <span class=attr>--h6-left</span>: -<span class=number>0.9rem</span>;</span><br><span class=line>  <span class=attr>--h6-top</span>: <span class=number>0</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 风车旋转动画定义 */</span></span><br><span class=line><span class=keyword>@keyframes</span> windmill-rotate &#123;</span><br><span class=line>  <span class=selector-tag>from</span> &#123;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>rotate</span>(<span class=number>0deg</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=selector-tag>to</span> &#123;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>rotate</span>(-<span class=number>360deg</span>);</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 基础风车样式 */</span></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-pseudo>:is</span>(<span class=selector-tag>h1</span>, <span class=selector-tag>h2</span>, <span class=selector-tag>h3</span>, <span class=selector-tag>h4</span>, <span class=selector-tag>h5</span>, <span class=selector-tag>h6</span>)<span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>animation</span>: windmill-rotate <span class=built_in>var</span>(--animation-speed-normal) linear infinite;</span><br><span class=line>  <span class=attribute>display</span>: inline-block; <span class=comment>/* 确保transform生效 */</span></span><br><span class=line>  <span class=attribute>transition</span>: color <span class=number>0.3s</span> ease; <span class=comment>/* 添加颜色过渡效果 */</span></span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 各级标题风车样式 */</span></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-tag>h1</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--h1-color);</span><br><span class=line>  <span class=attribute>margin-left</span>: <span class=built_in>var</span>(--h1-left);</span><br><span class=line>  <span class=attribute>font-size</span>: <span class=built_in>var</span>(--h1-size);</span><br><span class=line>  <span class=attribute>margin-top</span>: <span class=built_in>var</span>(--h1-top);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-tag>h2</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--h2-color);</span><br><span class=line>  <span class=attribute>margin-left</span>: <span class=built_in>var</span>(--h2-left);</span><br><span class=line>  <span class=attribute>font-size</span>: <span class=built_in>var</span>(--h2-size);</span><br><span class=line>  <span class=attribute>margin-top</span>: <span class=built_in>var</span>(--h2-top);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-tag>h3</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--h3-color);</span><br><span class=line>  <span class=attribute>margin-left</span>: <span class=built_in>var</span>(--h3-left);</span><br><span class=line>  <span class=attribute>font-size</span>: <span class=built_in>var</span>(--h3-size);</span><br><span class=line>  <span class=attribute>margin-top</span>: <span class=built_in>var</span>(--h3-top);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-tag>h4</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--h4-color);</span><br><span class=line>  <span class=attribute>margin-left</span>: <span class=built_in>var</span>(--h4-left);</span><br><span class=line>  <span class=attribute>font-size</span>: <span class=built_in>var</span>(--h4-size);</span><br><span class=line>  <span class=attribute>margin-top</span>: <span class=built_in>var</span>(--h4-top);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-tag>h5</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--h5-color);</span><br><span class=line>  <span class=attribute>margin-left</span>: <span class=built_in>var</span>(--h5-left);</span><br><span class=line>  <span class=attribute>font-size</span>: <span class=built_in>var</span>(--h5-size);</span><br><span class=line>  <span class=attribute>margin-top</span>: <span class=built_in>var</span>(--h5-top);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-tag>h6</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--h6-color);</span><br><span class=line>  <span class=attribute>margin-left</span>: <span class=built_in>var</span>(--h6-left);</span><br><span class=line>  <span class=attribute>font-size</span>: <span class=built_in>var</span>(--h6-size);</span><br><span class=line>  <span class=attribute>margin-top</span>: <span class=built_in>var</span>(--h6-top);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* Hover效果 */</span></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-pseudo>:is</span>(<span class=selector-tag>h1</span>, <span class=selector-tag>h2</span>, <span class=selector-tag>h3</span>, <span class=selector-tag>h4</span>, <span class=selector-tag>h5</span>, <span class=selector-tag>h6</span>)<span class=selector-pseudo>:hover</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--theme-color);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-id>#content-inner</span><span class=selector-class>.layout</span> <span class=selector-pseudo>:is</span>(<span class=selector-tag>h1</span>, <span class=selector-tag>h2</span>, <span class=selector-tag>h3</span>, <span class=selector-tag>h4</span>, <span class=selector-tag>h5</span>, <span class=selector-tag>h6</span>)<span class=selector-pseudo>:hover</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--theme-color);</span><br><span class=line>  <span class=attribute>animation-duration</span>: <span class=built_in>var</span>(--animation-speed-hover);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 响应式优化 */</span></span><br><span class=line><span class=keyword>@media</span> (<span class=attribute>max-width</span>: <span class=number>768px</span>) &#123;</span><br><span class=line>  <span class=selector-pseudo>:root</span> &#123;</span><br><span class=line>    <span class=comment>/* 移动端可以适当调整大小 */</span></span><br><span class=line>    <span class=attr>--h1-size</span>: <span class=number>1.1rem</span>;</span><br><span class=line>    <span class=attr>--h2-size</span>: <span class=number>0.95rem</span>;</span><br><span class=line>    <span class=attr>--h3-size</span>: <span class=number>0.85rem</span>;</span><br><span class=line>    <span class=attr>--h4-size</span>: <span class=number>0.75rem</span>;</span><br><span class=line>    <span class=attr>--h5-size</span>: <span class=number>0.65rem</span>;</span><br><span class=line>    <span class=attr>--h6-size</span>: <span class=number>0.6rem</span>;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=自定义恶搞标题><a href=#自定义恶搞标题 class=headerlink title=自定义恶搞标题></a>自定义恶搞标题</h2><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>新建文件<code>[BlogRoot]/static/js/title.js</code>，添加如下代码:</p><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// 动态标题</span></span><br><span class=line>(<span class=keyword>function</span>(<span class=params></span>) &#123;</span><br><span class=line>  <span class=string>&#x27;use strict&#x27;</span>;</span><br><span class=line>  </span><br><span class=line>  <span class=keyword>var</span> originTitle = <span class="variable language_">document</span>.<span class=property>title</span>;      <span class=comment>// 自动获取当前页面标题</span></span><br><span class=line>  <span class=keyword>var</span> returnDelay = <span class=number>2000</span>;                <span class=comment>// 返回后多长时间恢复原标题</span></span><br><span class=line>  <span class=keyword>var</span> titleTimer = <span class=literal>null</span>;                 <span class=comment>// 定时器变量</span></span><br><span class=line>  </span><br><span class=line>  <span class=comment>// 标题池</span></span><br><span class=line>  <span class=keyword>var</span> titles = &#123;</span><br><span class=line>    <span class=attr>away</span>: [<span class=string>&#x27;👀 还会再见吗 燕子&#x27;</span>, <span class=string>&#x27;😢 我会想你的~&#x27;</span>, <span class=string>&#x27;😢 你带我走吧 燕子啊！&#x27;</span>, <span class=string>&#x27;🏃 跑哪里去了~&#x27;</span>, <span class=string>&#x27;😢 燕子没有你我怎么活~&#x27;</span>],</span><br><span class=line>    <span class=attr>back</span>: [<span class=string>&#x27;😊 欢迎回来！&#x27;</span>, <span class=string>&#x27;🎉 好久不见！&#x27;</span>, <span class=string>&#x27;🐖 抓到你啦~&#x27;</span>, <span class=string>&#x27;😀 终于等到你&#x27;</span>]</span><br><span class=line>  &#125;;</span><br><span class=line>  </span><br><span class=line>  <span class=comment>// 随机获取标题</span></span><br><span class=line>  <span class=keyword>function</span> <span class="title function_">getRandomTitle</span>(<span class=params>type</span>) &#123;</span><br><span class=line>    <span class=keyword>var</span> titleArray = titles[type];</span><br><span class=line>    <span class=keyword>return</span> titleArray[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * titleArray.<span class=property>length</span>)];</span><br><span class=line>  &#125;</span><br><span class=line>  </span><br><span class=line>  <span class=comment>// 处理页面可见性变化</span></span><br><span class=line>  <span class=keyword>function</span> <span class="title function_">handleVisibilityChange</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class=comment>// 清理之前的定时器</span></span><br><span class=line>    <span class=keyword>if</span> (titleTimer) &#123;</span><br><span class=line>      <span class=built_in>clearTimeout</span>(titleTimer);</span><br><span class=line>      titleTimer = <span class=literal>null</span>;</span><br><span class=line>    &#125;</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>if</span> (<span class="variable language_">document</span>.<span class=property>hidden</span>) &#123;</span><br><span class=line>      <span class=comment>// 页面隐藏时</span></span><br><span class=line>      <span class="variable language_">document</span>.<span class=property>title</span> = <span class="title function_">getRandomTitle</span>(<span class=string>&#x27;away&#x27;</span>);</span><br><span class=line>    &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>      <span class=comment>// 页面显示时</span></span><br><span class=line>      <span class="variable language_">document</span>.<span class=property>title</span> = <span class="title function_">getRandomTitle</span>(<span class=string>&#x27;back&#x27;</span>);</span><br><span class=line>      </span><br><span class=line>      <span class=comment>// 根据returnDelay恢复原标题</span></span><br><span class=line>      titleTimer = <span class=built_in>setTimeout</span>(<span class=keyword>function</span>(<span class=params></span>) &#123;</span><br><span class=line>        <span class="variable language_">document</span>.<span class=property>title</span> = originTitle;</span><br><span class=line>        titleTimer = <span class=literal>null</span>;  <span class=comment>// 清理引用</span></span><br><span class=line>      &#125;, returnDelay);</span><br><span class=line>    &#125;</span><br><span class=line>  &#125;</span><br><span class=line>  </span><br><span class=line>  <span class=comment>// 绑定事件</span></span><br><span class=line>  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class=string>&#x27;visibilitychange&#x27;</span>, handleVisibilityChange);</span><br><span class=line>  </span><br><span class=line>  <span class=comment>// 页面卸载时清理</span></span><br><span class=line>  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class=string>&#x27;beforeunload&#x27;</span>, <span class=keyword>function</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class=keyword>if</span> (titleTimer) &#123;</span><br><span class=line>      <span class=built_in>clearTimeout</span>(titleTimer);</span><br><span class=line>    &#125;</span><br><span class=line>  &#125;);</span><br><span class=line>  </span><br><span class=line>  <span class=comment>// PJAX 支持</span></span><br><span class=line>  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class=string>&#x27;pjax:complete&#x27;</span>, <span class=keyword>function</span>(<span class=params></span>) &#123;</span><br><span class=line>    originTitle = <span class="variable language_">document</span>.<span class=property>title</span>;  <span class=comment>// 更新原始标题</span></span><br><span class=line>  &#125;);</span><br><span class=line>  </span><br><span class=line>&#125;)();</span><br></pre></td></tr></table></figure></li><li><p>引入js</p><p>在<code>_config.butterfly.yml</code>中<code>inject</code>配置项引入该文件：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=attr>inject:</span> </span><br><span class=line>  <span class=attr>bottom:</span> </span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;script</span> <span class=string>async</span> <span class=string>src=&quot;/static/js/title.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id=Twikoo评论系统部署><a href=#Twikoo评论系统部署 class=headerlink title=Twikoo评论系统部署></a>Twikoo评论系统部署</h2><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>根据官方文档部署Twikoo服务<a target=_blank rel=noopener href=https://twikoo.js.org/quick-start.html#针对-vercel-部署的更新方式>官方：Twikoo文档-针对Vercel的部署</a></p><p>博主使用的是MongoDB数据库+Vercel部署的方案，按照这两部分操作即可：<a target=_blank rel=noopener href=https://twikoo.js.org/mongodb-atlas.html>MongoDB Atlas</a> + <a target=_blank rel=noopener href=https://twikoo.js.org/backend.html#vercel-部署>云函数部署 | Vercel</a></p><p>（可选）在Vercel上部署完成后，可在项目页面的<code>Settings</code>-<code>Domains</code>中配置自己的域名</p></li><li><p>修改配置：修改<code>_config.butterfly.yml</code>中<code>comment</code>和<code>twikoo</code>配置项：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre></td><td class=code><pre><span class=line><span class=comment># --------------------------------------</span></span><br><span class=line><span class=comment># Comments System</span></span><br><span class=line><span class=comment># --------------------------------------</span></span><br><span class=line></span><br><span class=line><span class=attr>comments:</span></span><br><span class=line>  <span class=comment># Up to two comments system, the first will be shown as default</span></span><br><span class=line>  <span class=comment># Leave it empty if you don&#x27;t need comments</span></span><br><span class=line>  <span class=comment># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo/Giscus/Remark42/Artalk</span></span><br><span class=line>  <span class=comment># Format of two comments system : Disqus,Waline</span></span><br><span class=line>  <span class=attr>use:</span> <span class=string>Twikoo</span></span><br><span class=line>  <span class=comment># Display the comment name next to the button</span></span><br><span class=line>  <span class=attr>text:</span> <span class=literal>true</span></span><br><span class=line>  <span class=comment># Lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class=line>  <span class=comment># If you set it to true, the comment count will be invalid</span></span><br><span class=line>  <span class=attr>lazyload:</span> <span class=literal>false</span></span><br><span class=line>  <span class=comment># Display comment count in post&#x27;s top_img</span></span><br><span class=line>  <span class=attr>count:</span> <span class=literal>false</span></span><br><span class=line>  <span class=comment># Display comment count in Home Page</span></span><br><span class=line>  <span class=attr>card_post_count:</span> <span class=literal>false</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Twikoo</span></span><br><span class=line><span class=comment># https://github.com/imaegoo/twikoo</span></span><br><span class=line><span class=attr>twikoo:</span></span><br><span class=line>  <span class=attr>envId:</span> <span class=comment># 填入步骤1中的环境id</span></span><br><span class=line>  <span class=attr>region:</span></span><br><span class=line>  <span class=comment># Use Twikoo visitor count as the page view count</span></span><br><span class=line>  <span class=attr>visitor:</span> <span class=literal>false</span></span><br><span class=line>  <span class=attr>option:</span></span><br></pre></td></tr></table></figure></li><li><p>配置管理员密码</p><p>启动项目</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>hexo cl; hexo s</span><br></pre></td></tr></table></figure><p>随意进入一篇文章，等待底部评论系统加载完成，点击右下角设置按钮进入Twikoo管理面板</p><p>第一次进入管理面板需设置管理员登录密码，在管理面板中可管理评论，配置选项也有比较详细的注释，这里不过多介绍</p></li></ol></div></details><h2 id=b站视频适配><a href=#b站视频适配 class=headerlink title=b站视频适配></a>b站视频适配</h2><p>简单添加了几行css样式<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>在<code>[BlogRoot]/static/css/custom.css</code>中添加如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/*哔哩哔哩视频适配*/</span></span><br><span class=line><span class=selector-class>.aspect-ratio</span> &#123;</span><br><span class=line>  <span class=attribute>position</span>: relative;</span><br><span class=line>  <span class=attribute>width</span>: <span class=number>90%</span>;</span><br><span class=line>  <span class=attribute>height</span>: auto;</span><br><span class=line>  <span class=attribute>padding-bottom</span>: <span class=number>75%</span>;</span><br><span class=line>  <span class=attribute>margin</span>: <span class=number>3%</span> auto;</span><br><span class=line>  <span class=attribute>text-align</span>: center;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-class>.aspect-ratio</span> <span class=selector-tag>iframe</span> &#123;</span><br><span class=line>  <span class=attribute>position</span>: absolute;</span><br><span class=line>  <span class=attribute>width</span>: <span class=number>100%</span>;</span><br><span class=line>  <span class=attribute>height</span>: <span class=number>86%</span>;</span><br><span class=line>  <span class=attribute>left</span>: <span class=number>0</span>;</span><br><span class=line>  <span class=attribute>top</span>: <span class=number>0</span>;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>引用bilibili视频</p><p>网页版b站视频分享按钮中选择嵌入代码，复制代码</p><p>在你文章中（markdown文件）使用如下代码引入b站视频，<code>&lt;iframe&gt;&lt;/iframe&gt;</code>替换为复制的内容<br>注意：如果不希望自动播放，需在链接末尾加入<code>autoplay=0</code></p><figure class="highlight markdown"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class=language-xml><span class=tag>&lt;<span class=name>div</span> <span class=attr>align</span>=<span class=string>center</span> <span class=attr>class</span>=<span class=string>&quot;aspect-ratio&quot;</span>&gt;</span></span></span><br><span class=line><span class=code>    &lt;iframe src=&quot;https://player.bilibili.com/player.html?aid=80433022&amp;autoplay=0&quot; </span></span><br><span class=line><span class=code>    allowfullscreen=&quot;true&quot;&gt; </span></span><br><span class=line><span class=code>    &lt;/iframe&gt;</span></span><br><span class=line><span class=code>&lt;/div&gt;</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=评论区输入提示><a href=#评论区输入提示 class=headerlink title=评论区输入提示></a>评论区输入提示</h2><details class=folding-tag gray><summary>详细步骤</summary><div class=content><p>在<code>[BlogRoot]/static/css/custom.css</code>中添加如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ===========================================</span></span><br><span class=line><span class=comment>   评论框提示文字</span></span><br><span class=line><span class=comment>   =========================================== */</span></span><br><span class=line><span class=comment>/* 定义提示文字内容 */</span></span><br><span class=line><span class=selector-class>.el-input</span><span class=selector-class>.el-input--small</span><span class=selector-class>.el-input-group</span><span class=selector-class>.el-input-group--prepend</span><span class=selector-pseudo>:nth-child</span>(<span class=number>1</span>)<span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>    <span class=attribute>content</span>: <span class=string>&#x27;输入QQ号会自动获取昵称和头像🐧&#x27;</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-class>.el-input</span><span class=selector-class>.el-input--small</span><span class=selector-class>.el-input-group</span><span class=selector-class>.el-input-group--prepend</span><span class=selector-pseudo>:nth-child</span>(<span class=number>2</span>)<span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>    <span class=attribute>content</span>: <span class=string>&#x27;收到回复将会发送到您的邮箱📧&#x27;</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-class>.el-input</span><span class=selector-class>.el-input--small</span><span class=selector-class>.el-input-group</span><span class=selector-class>.el-input-group--prepend</span><span class=selector-pseudo>:nth-child</span>(<span class=number>3</span>)<span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>    <span class=attribute>content</span>: <span class=string>&#x27;可以通过昵称访问您的网站🔗&#x27;</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 提示框主体样式 */</span></span><br><span class=line><span class=selector-class>.el-input</span><span class=selector-class>.el-input--small</span><span class=selector-class>.el-input-group</span><span class=selector-class>.el-input-group--prepend</span><span class=selector-pseudo>::before</span> &#123;</span><br><span class=line>    <span class=attribute>display</span>: none;</span><br><span class=line>    <span class=attribute>position</span>: absolute;</span><br><span class=line>    <span class=attribute>top</span>: -<span class=number>60px</span>;</span><br><span class=line>    <span class=attribute>left</span>: <span class=number>50%</span>;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>translate</span>(-<span class=number>50%</span>);</span><br><span class=line>    <span class=attribute>padding</span>: <span class=number>14px</span> <span class=number>18px</span>;</span><br><span class=line>    <span class=attribute>background</span>: <span class=number>#444</span>;</span><br><span class=line>    <span class=attribute>color</span>: <span class=number>#fff</span>;</span><br><span class=line>    <span class=attribute>white-space</span>: nowrap;</span><br><span class=line>    <span class=attribute>border-radius</span>: <span class=number>10px</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 提示框小三角箭头 */</span></span><br><span class=line><span class=selector-class>.el-input</span><span class=selector-class>.el-input--small</span><span class=selector-class>.el-input-group</span><span class=selector-class>.el-input-group--prepend</span><span class=selector-pseudo>::after</span> &#123;</span><br><span class=line>    <span class=attribute>display</span>: none;</span><br><span class=line>    <span class=attribute>content</span>: <span class=string>&#x27;&#x27;</span>;</span><br><span class=line>    <span class=attribute>position</span>: absolute;</span><br><span class=line>    <span class=attribute>top</span>: -<span class=number>48px</span>;</span><br><span class=line>    <span class=attribute>left</span>: <span class=number>50%</span>;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>translateX</span>(-<span class=number>50%</span>);</span><br><span class=line>    <span class=attribute>border</span>: <span class=number>12px</span> solid transparent;</span><br><span class=line>    <span class=attribute>border-top-color</span>: <span class=number>#444</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 输入框获得焦点时显示提示 */</span></span><br><span class=line><span class=selector-class>.el-input</span><span class=selector-class>.el-input--small</span><span class=selector-class>.el-input-group</span><span class=selector-class>.el-input-group--prepend</span><span class=selector-pseudo>:focus-within</span><span class=selector-pseudo>::before</span>,</span><br><span class=line><span class=selector-class>.el-input</span><span class=selector-class>.el-input--small</span><span class=selector-class>.el-input-group</span><span class=selector-class>.el-input-group--prepend</span><span class=selector-pseudo>:focus-within</span><span class=selector-pseudo>::after</span> &#123;</span><br><span class=line>    <span class=attribute>display</span>: block;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></div></details><h2 id=diy通知样式><a href=#diy通知样式 class=headerlink title=diy通知样式></a>diy通知样式</h2><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>新建<code>[BlogRoot]\source\static\js\custom.js</code>，添加如下代码：</p><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ===========================================</span></span><br><span class=line><span class=comment>   Toast 通知</span></span><br><span class=line><span class=comment>   =========================================== */</span></span><br><span class=line><span class=comment>/**</span></span><br><span class=line><span class=comment> * Toast 通知 - 显示消息提示</span></span><br><span class=line><span class=comment> * <span class=doctag>@param</span> &#123;<span class=type>string</span>&#125; <span class=variable>message</span> - 消息内容</span></span><br><span class=line><span class=comment> * <span class=doctag>@param</span> &#123;<span class=type>number</span>&#125; <span class=variable>duration</span> - 显示时长，默认2000ms</span></span><br><span class=line><span class=comment> * </span></span><br><span class=line><span class=comment> * 用法：</span></span><br><span class=line><span class=comment> * showToast(&#x27;操作成功！&#x27;);</span></span><br><span class=line><span class=comment> * showToast(&#x27;切换完成&#x27;, 2000);</span></span><br><span class=line><span class=comment> */</span></span><br><span class=line><span class=keyword>function</span> <span class="title function_">showToast</span>(<span class=params>message, duration = <span class=number>2000</span></span>) &#123;</span><br><span class=line>    <span class=comment>// 检测当前主题</span></span><br><span class=line>    <span class=keyword>const</span> isDarkMode = <span class="variable language_">document</span>.<span class=property>documentElement</span>.<span class="title function_">getAttribute</span>(<span class=string>&#x27;data-theme&#x27;</span>) === <span class=string>&#x27;dark&#x27;</span> || </span><br><span class=line>                      <span class="variable language_">document</span>.<span class=property>body</span>.<span class=property>classList</span>.<span class="title function_">contains</span>(<span class=string>&#x27;DarkMode&#x27;</span>);</span><br><span class=line>    </span><br><span class=line>    <span class=comment>// 创建通知容器</span></span><br><span class=line>    <span class=keyword>let</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&#x27;toast-container&#x27;</span>);</span><br><span class=line>    <span class=keyword>if</span> (!container) &#123;</span><br><span class=line>        container = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&#x27;div&#x27;</span>);</span><br><span class=line>        container.<span class=property>id</span> = <span class=string>&#x27;toast-container&#x27;</span>;</span><br><span class=line>        container.<span class=property>style</span>.<span class=property>cssText</span> = <span class=string>`</span></span><br><span class=line><span class=string>            position: fixed;</span></span><br><span class=line><span class=string>            top: 20px;</span></span><br><span class=line><span class=string>            right: 20px;</span></span><br><span class=line><span class=string>            z-index: 9999;</span></span><br><span class=line><span class=string>            pointer-events: none;</span></span><br><span class=line><span class=string>        `</span>;</span><br><span class=line>        <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">appendChild</span>(container);</span><br><span class=line>    &#125;</span><br><span class=line></span><br><span class=line>    <span class=comment>// 创建通知元素</span></span><br><span class=line>    <span class=keyword>const</span> toast = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&#x27;div&#x27;</span>);</span><br><span class=line>    toast.<span class=property>innerHTML</span> = <span class=string>`</span></span><br><span class=line><span class=string>        &lt;span style=&quot;margin-right: 8px;&quot;&gt;😊&lt;/span&gt;</span></span><br><span class=line><span class=string>        &lt;span&gt;<span class=subst>$&#123;message&#125;</span>&lt;/span&gt;</span></span><br><span class=line><span class=string>    `</span>;</span><br><span class=line>    </span><br><span class=line>    <span class=comment>// 根据主题设置样式</span></span><br><span class=line>    <span class=keyword>const</span> lightStyles = &#123;</span><br><span class=line>        <span class=attr>background</span>: <span class=string>&#x27;#f0f9ff&#x27;</span>,</span><br><span class=line>        <span class=attr>border</span>: <span class=string>&#x27;1px solid #bfdbfe&#x27;</span>,</span><br><span class=line>        <span class=attr>color</span>: <span class=string>&#x27;#1e293b&#x27;</span>,</span><br><span class=line>        <span class=attr>boxShadow</span>: <span class=string>&#x27;0 4px 12px rgba(0,0,0,0.15)&#x27;</span></span><br><span class=line>    &#125;;</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>const</span> darkStyles = &#123;</span><br><span class=line>        <span class=attr>background</span>: <span class=string>&#x27;#1e293b&#x27;</span>,</span><br><span class=line>        <span class=attr>border</span>: <span class=string>&#x27;1px solid #475569&#x27;</span>,</span><br><span class=line>        <span class=attr>color</span>: <span class=string>&#x27;#e2e8f0&#x27;</span>,</span><br><span class=line>        <span class=attr>boxShadow</span>: <span class=string>&#x27;0 4px 12px rgba(0,0,0,0.4)&#x27;</span></span><br><span class=line>    &#125;;</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>const</span> currentStyles = isDarkMode ? darkStyles : lightStyles;</span><br><span class=line>    </span><br><span class=line>    toast.<span class=property>style</span>.<span class=property>cssText</span> = <span class=string>`</span></span><br><span class=line><span class=string>        display: flex;</span></span><br><span class=line><span class=string>        align-items: center;</span></span><br><span class=line><span class=string>        margin-bottom: 10px;</span></span><br><span class=line><span class=string>        padding: 12px 16px;</span></span><br><span class=line><span class=string>        background: <span class=subst>$&#123;currentStyles.background&#125;</span>;</span></span><br><span class=line><span class=string>        border: <span class=subst>$&#123;currentStyles.border&#125;</span>;</span></span><br><span class=line><span class=string>        color: <span class=subst>$&#123;currentStyles.color&#125;</span>;</span></span><br><span class=line><span class=string>        border-radius: 8px;</span></span><br><span class=line><span class=string>        box-shadow: <span class=subst>$&#123;currentStyles.boxShadow&#125;</span>;</span></span><br><span class=line><span class=string>        transform: translateX(100%);</span></span><br><span class=line><span class=string>        transition: all 0.3s ease;</span></span><br><span class=line><span class=string>        pointer-events: auto;</span></span><br><span class=line><span class=string>        max-width: 320px;</span></span><br><span class=line><span class=string>        word-break: break-word;</span></span><br><span class=line><span class=string>        font-size: 14px;</span></span><br><span class=line><span class=string>        line-height: 1.4;</span></span><br><span class=line><span class=string>        cursor: pointer;</span></span><br><span class=line><span class=string>    `</span>;</span><br><span class=line></span><br><span class=line>    container.<span class="title function_">appendChild</span>(toast);</span><br><span class=line></span><br><span class=line>    <span class=comment>// 进入动画</span></span><br><span class=line>    <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>transform</span> = <span class=string>&#x27;translateX(0)&#x27;</span>;</span><br><span class=line>    &#125;, <span class=number>10</span>);</span><br><span class=line></span><br><span class=line>    <span class=comment>// 自动消失</span></span><br><span class=line>    <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>transform</span> = <span class=string>&#x27;translateX(100%)&#x27;</span>;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&#x27;0&#x27;</span>;</span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            <span class=keyword>if</span> (toast.<span class=property>parentNode</span>) &#123;</span><br><span class=line>                toast.<span class=property>parentNode</span>.<span class="title function_">removeChild</span>(toast);</span><br><span class=line>            &#125;</span><br><span class=line>        &#125;, <span class=number>300</span>);</span><br><span class=line>    &#125;, duration);</span><br><span class=line></span><br><span class=line>    <span class=comment>// 点击关闭</span></span><br><span class=line>    toast.<span class="title function_">addEventListener</span>(<span class=string>&#x27;click&#x27;</span>, <span class=function>() =&gt;</span> &#123;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>transform</span> = <span class=string>&#x27;translateX(100%)&#x27;</span>;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&#x27;0&#x27;</span>;</span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            <span class=keyword>if</span> (toast.<span class=property>parentNode</span>) &#123;</span><br><span class=line>                toast.<span class=property>parentNode</span>.<span class="title function_">removeChild</span>(toast);</span><br><span class=line>            &#125;</span><br><span class=line>        &#125;, <span class=number>300</span>);</span><br><span class=line>    &#125;);</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入<code>custom.js</code></p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Inject</span></span><br><span class=line><span class=comment># Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span></span><br><span class=line><span class=attr>inject:</span></span><br><span class=line>  <span class=attr>head:</span></span><br><span class=line>    <span class=comment># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;script</span> <span class=string>src=&quot;/static/js/custom.js&quot;&gt;&lt;/script&gt;</span></span><br><span class=line></span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id=个人信息卡片美化><a href=#个人信息卡片美化 class=headerlink title=个人信息卡片美化></a>个人信息卡片美化</h2><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>在<code>[BlogRoot]/source/static/css/custom.css</code>中添加如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。<br>图片url换成你自己的</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ===========================================</span></span><br><span class=line><span class=comment>   侧边栏个人信息卡片美化</span></span><br><span class=line><span class=comment>   =========================================== */</span></span><br><span class=line><span class=comment>/* 背景图 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;light&quot;</span>]</span> <span class=selector-id>#aside-content</span> &gt; <span class=selector-class>.card-widget</span><span class=selector-class>.card-info</span> &#123;</span><br><span class=line>  <span class=attribute>background</span>: </span><br><span class=line>    <span class=built_in>linear-gradient</span>(<span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>255</span>, <span class=number>255</span>, <span class=number>0.15</span>), <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>255</span>, <span class=number>255</span>, <span class=number>0.45</span>)),</span><br><span class=line>    <span class=built_in>url</span>(<span class=string>/static/img/aside-card-light.webp</span>);</span><br><span class=line>  <span class=attribute>background-repeat</span>: no-repeat;</span><br><span class=line>  <span class=attribute>background-attachment</span>: inherit;</span><br><span class=line>  <span class=attribute>background-size</span>: <span class=number>100%</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#aside-content</span> &gt; <span class=selector-class>.card-widget</span><span class=selector-class>.card-info</span> &#123;</span><br><span class=line>  <span class=attribute>background</span>: </span><br><span class=line>    <span class=built_in>linear-gradient</span>(<span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>0</span>, <span class=number>0</span>, <span class=number>0.15</span>), <span class=built_in>rgba</span>(<span class=number>0</span>, <span class=number>0</span>, <span class=number>0</span>, <span class=number>0.5</span>)),</span><br><span class=line>    <span class=built_in>url</span>(<span class=string>/static/img/aside-card-dark.webp</span>);</span><br><span class=line>  <span class=attribute>background-repeat</span>: no-repeat;</span><br><span class=line>  <span class=attribute>background-attachment</span>: inherit;</span><br><span class=line>  <span class=attribute>background-size</span>: <span class=number>100%</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 头像呼吸灯 - 增强版 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;light&quot;</span>]</span> <span class=selector-class>.avatar-img</span> &#123;</span><br><span class=line>  <span class=attribute>animation</span>: huxi_light <span class=number>4s</span> ease-in-out infinite;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-class>.avatar-img</span> &#123;</span><br><span class=line>  <span class=attribute>animation</span>: huxi_dark <span class=number>4s</span> ease-in-out infinite;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 白天模式呼吸灯 - 1.5倍效果 */</span></span><br><span class=line><span class=keyword>@keyframes</span> huxi_light &#123;</span><br><span class=line>  <span class=number>0%</span> &#123;</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0px</span> <span class=number>0px</span> <span class=number>2px</span> <span class=number>2px</span> <span class=number>#e9f5fa</span>;</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>50%</span> &#123;</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0px</span> <span class=number>0px</span> <span class=number>6px</span> <span class=number>6px</span> <span class=number>#e9f5fa</span>;</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>100%</span> &#123;</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0px</span> <span class=number>0px</span> <span class=number>2px</span> <span class=number>2px</span> <span class=number>#e9f5fa</span>;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* 夜间模式呼吸灯 - 1.5倍效果 */</span></span><br><span class=line><span class=keyword>@keyframes</span> huxi_dark &#123;</span><br><span class=line>  <span class=number>0%</span> &#123;</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0px</span> <span class=number>0px</span> <span class=number>2px</span> <span class=number>2px</span> <span class=number>#3daee2</span>;</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>50%</span> &#123;</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0px</span> <span class=number>0px</span> <span class=number>6px</span> <span class=number>6px</span> <span class=number>#3daee2</span>;</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=number>100%</span> &#123;</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0px</span> <span class=number>0px</span> <span class=number>2px</span> <span class=number>2px</span> <span class=number>#3daee2</span>;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>/* Follow Me按钮 */</span></span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;light&quot;</span>]</span> <span class=selector-id>#aside-content</span> &gt; <span class=selector-class>.card-widget</span><span class=selector-class>.card-info</span> &gt; <span class=selector-id>#card-info-btn</span> &#123;</span><br><span class=line>    <span class=attribute>background-color</span>: <span class=number>#399cffba</span>;</span><br><span class=line>    <span class=attribute>border-radius</span>: <span class=number>8px</span>;</span><br><span class=line>    <span class=attribute>color</span>: <span class=number>#ffffff</span>;</span><br><span class=line>    <span class=attribute>transition</span>: all <span class=number>0.3s</span> ease;</span><br><span class=line>    <span class=attribute>border</span>: none;</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0</span> <span class=number>2px</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>74</span>, <span class=number>158</span>, <span class=number>242</span>, <span class=number>0.3</span>);</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;light&quot;</span>]</span> <span class=selector-id>#aside-content</span> &gt; <span class=selector-class>.card-widget</span><span class=selector-class>.card-info</span> &gt; <span class=selector-id>#card-info-btn</span><span class=selector-pseudo>:hover</span> &#123;</span><br><span class=line>    <span class=attribute>background-color</span>: <span class=number>#fc7836ba</span>;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>translateY</span>(-<span class=number>2px</span>);</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0</span> <span class=number>4px</span> <span class=number>16px</span> <span class=built_in>rgba</span>(<span class=number>255</span>, <span class=number>138</span>, <span class=number>80</span>, <span class=number>0.4</span>);</span><br><span class=line>    <span class=attribute>color</span>: <span class=number>#ffffff</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#aside-content</span> &gt; <span class=selector-class>.card-widget</span><span class=selector-class>.card-info</span> &gt; <span class=selector-id>#card-info-btn</span> &#123;</span><br><span class=line>    <span class=attribute>background-color</span>: <span class=number>#ff8157ba</span>;</span><br><span class=line>    <span class=attribute>border-radius</span>: <span class=number>8px</span>;</span><br><span class=line>    <span class=attribute>color</span>: <span class=number>#ffffff</span>;</span><br><span class=line>    <span class=attribute>transition</span>: all <span class=number>0.3s</span> ease;</span><br><span class=line>    <span class=attribute>border</span>: none;</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0</span> <span class=number>2px</span> <span class=number>8px</span> <span class=built_in>rgba</span>(<span class=number>244</span>, <span class=number>132</span>, <span class=number>95</span>, <span class=number>0.3</span>);</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-attr>[data-theme=<span class=string>&quot;dark&quot;</span>]</span> <span class=selector-id>#aside-content</span> &gt; <span class=selector-class>.card-widget</span><span class=selector-class>.card-info</span> &gt; <span class=selector-id>#card-info-btn</span><span class=selector-pseudo>:hover</span> &#123;</span><br><span class=line>    <span class=attribute>background-color</span>: <span class=number>#6366F1ba</span>;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>translateY</span>(-<span class=number>2px</span>);</span><br><span class=line>    <span class=attribute>box-shadow</span>: <span class=number>0</span> <span class=number>4px</span> <span class=number>16px</span> <span class=built_in>rgba</span>(<span class=number>99</span>, <span class=number>102</span>, <span class=number>241</span>, <span class=number>0.4</span>);</span><br><span class=line>    <span class=attribute>color</span>: <span class=number>#ffffff</span>;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li></ol></div></details><h2 id=待定><a href=#待定 class=headerlink title=待定></a>待定</h2><details class=folding-tag gray><summary>详细步骤</summary><div class=content></div></details><h2 id=追番页面、游戏推荐><a href=#追番页面、游戏推荐 class=headerlink title=追番页面、游戏推荐></a>追番页面、游戏推荐</h2><p>参考：<a target=_blank rel=noopener href=https://github.com/HCLonely/hexo-bilibili-bangumi>为Hexo博客添加追番/追剧页面</a><br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装插件</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-bilibili-bangumi --save</span><br></pre></td></tr></table></figure></li><li><p>使用<code>bangumi</code>数据源（也可使用<code>bilibili</code>数据，但b站番剧不全故不推荐，仍想使用自行查看github仓库）</p><p>访问<a target=_blank rel=noopener href=https://bgm.tv/ >Bangumi 番组计划</a>，注册账号，收藏你像添加的番剧或游戏</p><p><code>f12</code>打开控制台，输入<code>CHOBITS_UID</code>获取用户ID</p></li><li><p>添加配置：在<code>_config.yml</code>中添加：</p><p><code>path</code>、<code>vimd</code>等参数替换为自己的</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo-bilibili-bangumi</span></span><br><span class=line><span class=comment># https://github.com/HCLonely/hexo-bilibili-bangumi</span></span><br><span class=line><span class=attr>bangumi:</span> <span class=comment># 追番设置</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span>           <span class=comment># 是否启用</span></span><br><span class=line>  <span class=attr>source:</span> <span class=string>bangumi</span>          <span class=comment># 数据源</span></span><br><span class=line>  <span class=attr>path:</span> <span class=string>animations/index.html</span>  <span class=comment># 页面路径</span></span><br><span class=line>  <span class=attr>vmid:</span> <span class=string>x1ang</span>                <span class=comment># 用户ID</span></span><br><span class=line>  <span class=attr>title:</span> <span class=string>&#x27;追番列表&#x27;</span>      <span class=comment># 页面标题</span></span><br><span class=line>  <span class=attr>quote:</span> <span class=string>&#x27;你所热爱的 就是你的生活&#x27;</span> <span class=comment># 页面引言</span></span><br><span class=line>  <span class=attr>show:</span> <span class=number>2</span>              <span class=comment># 初始显示页面: 0=想看, 1=在看, 2=看过</span></span><br><span class=line>  <span class=attr>lazyload:</span> <span class=literal>true</span>       <span class=comment># 是否启用图片懒加载</span></span><br><span class=line>  <span class=attr>metaColor:</span> <span class=string>&#x27;#f2b94b&#x27;</span>   <span class=comment># meta 信息字体颜色</span></span><br><span class=line>  <span class=attr>color:</span> <span class=string>&#x27;#6587b5&#x27;</span>       <span class=comment># 简介字体颜色</span></span><br><span class=line>  <span class=attr>webp:</span> <span class=literal>true</span>          <span class=comment># 是否使用 webp 格式图片</span></span><br><span class=line>  <span class=attr>pagination:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>progress:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>progressBar:</span> <span class=literal>false</span></span><br><span class=line>  <span class=attr>extraOrder:</span> <span class=number>1</span></span><br><span class=line>  <span class=attr>order:</span> <span class=string>&#x27;-score&#x27;</span></span><br><span class=line><span class=attr>game:</span> <span class=comment># 游戏设置，仅支持source: bgmv0</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>path:</span> <span class=string>games/index.html</span></span><br><span class=line>  <span class=attr>source:</span> <span class=string>bgmv0</span></span><br><span class=line>  <span class=attr>vmid:</span> <span class=string>x1ang</span></span><br><span class=line>  <span class=attr>title:</span> <span class=string>&#x27;一部游戏一段人生&#x27;</span></span><br><span class=line>  <span class=attr>quote:</span> <span class=string>&#x27;跌宕起伏的故事，引人入胜的玩法，余音绕梁的旋律，沉浸式体验另一段时空&#x27;</span></span><br><span class=line>  <span class=attr>show:</span> <span class=number>2</span></span><br><span class=line>  <span class=attr>lazyload:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>metaColor:</span> <span class=string>&#x27;#f2b94b&#x27;</span></span><br><span class=line>  <span class=attr>color:</span> <span class=string>&#x27;#99A9BF&#x27;</span></span><br><span class=line>  <span class=attr>webp:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>pagination:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>progress:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>progressBar:</span> <span class=literal>false</span></span><br><span class=line>  <span class=attr>extraOrder:</span> <span class=number>1</span></span><br><span class=line>  <span class=attr>order:</span> <span class=string>-score</span></span><br></pre></td></tr></table></figure></li><li><p>页面美化：在<code>[BlogRoot]/static/css/custom.css</code>文件中添加以下代码(具体颜色可以自己调节)：<br>参考：<a target=_blank rel=noopener href=https://blog.anheyu.com/bangumis/ >追番列表 | 安知鱼</a></p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* 番剧插件 */</span></span><br><span class=line><span class=selector-id>#page</span> <span class=selector-id>#article-container</span> <span class=selector-class>.bangumi-tab</span><span class=selector-class>.bangumi-active</span> &#123;</span><br><span class=line>  <span class=attribute>background</span>: <span class=number>#425aef</span> <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>color</span>: <span class=number>#f7f7fa</span> <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>border-radius</span>: <span class=number>10px</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#page</span> <span class=selector-id>#article-container</span> <span class=selector-class>.bangumi-tabs</span> <span class=selector-class>.bangumi-tab</span> &#123;</span><br><span class=line>  <span class=attribute>border-bottom</span>: none;</span><br><span class=line>  <span class=attribute>border-radius</span>: <span class=number>10px</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#page</span> <span class=selector-id>#article-container</span> <span class=selector-class>.bangumi-tabs</span> <span class=selector-tag>a</span><span class=selector-class>.bangumi-tab</span><span class=selector-pseudo>:hover</span> &#123;</span><br><span class=line>  <span class=attribute>text-decoration</span>: none <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>border-radius</span>: <span class=number>10px</span>;</span><br><span class=line>  <span class=attribute>column-gap</span>: <span class=number>#f7f7fa</span> <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#page</span> <span class=selector-id>#article-container</span> <span class=selector-class>.bangumi-pagination</span> <span class=selector-tag>a</span><span class=selector-class>.bangumi-button</span> &#123;</span><br><span class=line>  <span class=attribute>border-bottom</span>: none;</span><br><span class=line>  <span class=attribute>border-radius</span>: <span class=number>10px</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-class>.bangumi-button</span><span class=selector-pseudo>:hover</span> &#123;</span><br><span class=line>  <span class=attribute>background</span>: <span class=number>#425aef</span> <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>border-radius</span>: <span class=number>10px</span> <span class=meta>!important</span>;</span><br><span class=line>  <span class=attribute>color</span>: <span class=number>#f7f7fa</span> <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-tag>a</span><span class=selector-class>.bangumi-button</span><span class=selector-class>.bangumi-nextpage</span><span class=selector-pseudo>:hover</span> &#123;</span><br><span class=line>  <span class=attribute>text-decoration</span>: none <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-class>.bangumi-button</span> &#123;</span><br><span class=line>  <span class=attribute>padding</span>: <span class=number>5px</span> <span class=number>10px</span> <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-tag>a</span><span class=selector-class>.bangumi-tab</span> &#123;</span><br><span class=line>  <span class=attribute>padding</span>: <span class=number>5px</span> <span class=number>10px</span> <span class=meta>!important</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-tag>svg</span><span class=selector-class>.icon</span><span class=selector-class>.faa-tada</span> &#123;</span><br><span class=line>  <span class=attribute>font-size</span>: <span class=number>1.1em</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-class>.bangumi-info-item</span> &#123;</span><br><span class=line>  <span class=attribute>border-right</span>: <span class=number>1px</span> solid <span class=number>#f2b94b</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-class>.bangumi-info-item</span> <span class=selector-tag>span</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=number>#f2b94b</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-class>.bangumi-info-item</span> <span class=selector-tag>em</span> &#123;</span><br><span class=line>  <span class=attribute>color</span>: <span class=number>#f2b94b</span>;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>获取数据：命令行运行：</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>hexo game -u;</span><br><span class=line>hexo bangumi -u;</span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=Github-Action><a href=#Github-Action class=headerlink title="Github Action"></a>Github Action</h2><p>随着文章越来越多，在本地使用<code>Hexo</code>部署的时间也会越来越长，借助<code>Github Action</code>，我们只需将修改<code>push</code>到远程仓库，将工作交给<code>github</code>完成<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>获取Token</p><p>访问<a target=_blank rel=noopener href=https://github.com/settings/tokens><code>Github-&gt;头像-&gt;Settings-&gt;Developer Settings-&gt;Personal access tokens-&gt;Token(classic)</code></a><code>-&gt;generate new token(classic)</code></p><p><code>Token</code>名称随意，<code>Expiration</code>选择<code>No Expiration</code>，必须勾选<code>repo</code>项和<code>workflows</code>项，保存生成的<code>Token</code>。</p><p><em>注意：<code>Token</code>只会显示一次，后续无法查看，如果遗忘了只能重新生成。</em></p></li><li><p>创建源码仓库（如有可跳过）</p><p>需要创建一个用来存放<code>Hexo</code>博客源码的私有仓库，创建完成后需要使用<code>git</code>将本地的源码<code>push</code>到仓库。</p><p><code>git</code>使用方法这里不展开，可以参考：<a target=_blank rel=noopener href=https://liaoxuefeng.com/books/git/introduction/index.html>简介 - Git教程 - 廖雪峰的官方网站</a></p><p>使用<code>git</code>提交前配置<code>.gitignore</code>，避免把一些可自动生成的文件上传：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre></td><td class=code><pre><span class=line># Hexo 生成的文件</span><br><span class=line>public/</span><br><span class=line>.deploy_git/</span><br><span class=line>db.json</span><br><span class=line></span><br><span class=line># 缓存与临时文件</span><br><span class=line>node_modules/</span><br><span class=line>tmp/</span><br><span class=line>.nyc_output/</span><br><span class=line>coverage/</span><br><span class=line>dist/</span><br><span class=line>npm-debug.log*</span><br><span class=line>yarn-debug.log*</span><br><span class=line>yarn-error.log*</span><br><span class=line></span><br><span class=line># 编辑器相关</span><br><span class=line>.DS_Store</span><br><span class=line>Thumbs.db</span><br><span class=line>.vscode/</span><br><span class=line>.idea/</span><br><span class=line></span><br><span class=line># 系统临时文件</span><br><span class=line>*.swp</span><br><span class=line>*.swo</span><br><span class=line>*.tmp</span><br><span class=line>*.log</span><br><span class=line></span><br></pre></td></tr></table></figure></li><li><p>配置<code>Github Action</code></p><p>新建<code>[Blogroot]/.github/workflows/autodeploy.yml</code>添加以下配置：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br></pre></td><td class=code><pre><span class=line><span class=comment># 当有改动推送到main分支时，启动Action</span></span><br><span class=line><span class=attr>name:</span> <span class=string>自动部署</span></span><br><span class=line></span><br><span class=line><span class=attr>on:</span></span><br><span class=line>  <span class=attr>push:</span></span><br><span class=line>    <span class=attr>branches:</span></span><br><span class=line>      <span class=bullet>-</span> <span class=string>main</span></span><br><span class=line>  <span class=attr>release:</span></span><br><span class=line>    <span class=attr>types:</span></span><br><span class=line>      <span class=bullet>-</span> <span class=string>published</span></span><br><span class=line></span><br><span class=line><span class=attr>jobs:</span></span><br><span class=line>  <span class=attr>deploy:</span></span><br><span class=line>    <span class=attr>runs-on:</span> <span class=string>ubuntu-latest</span></span><br><span class=line>    <span class=attr>steps:</span></span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>检查分支</span></span><br><span class=line>      <span class=attr>uses:</span> <span class=string>actions/checkout@v4</span></span><br><span class=line>      <span class=attr>with:</span></span><br><span class=line>        <span class=attr>ref:</span> <span class=string>main</span></span><br><span class=line>        </span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>安装</span> <span class=string>Node</span></span><br><span class=line>      <span class=attr>uses:</span> <span class=string>actions/setup-node@v4</span></span><br><span class=line>      <span class=attr>with:</span></span><br><span class=line>        <span class=attr>node-version:</span> <span class=string>&quot;20.x&quot;</span> <span class=comment># 替换成你本地使用的node大版本，用node -v查看</span></span><br><span class=line>        <span class=attr>cache:</span> <span class=string>&#x27;npm&#x27;</span> <span class=comment># 使用缓存，确保你的package-lock.json被正确上传</span></span><br><span class=line>        </span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>安装</span> <span class=string>Hexo</span></span><br><span class=line>      <span class=attr>run:</span> <span class=string>|</span></span><br><span class=line><span class=string>        export TZ=&#x27;Asia/Shanghai&#x27;</span></span><br><span class=line><span class=string>        npm install hexo-cli -g</span></span><br><span class=line><span class=string></span>        </span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>缓存</span> <span class=string>Hexo</span></span><br><span class=line>      <span class=attr>uses:</span> <span class=string>actions/cache@v4</span></span><br><span class=line>      <span class=attr>id:</span> <span class=string>cache</span></span><br><span class=line>      <span class=attr>with:</span></span><br><span class=line>        <span class=attr>path:</span> <span class=string>node_modules</span></span><br><span class=line>        <span class=attr>key:</span> <span class=string>$&#123;&#123;</span> <span class=string>runner.OS</span> <span class=string>&#125;&#125;-node-modules-$&#123;&#123;</span> <span class=string>hashFiles(&#x27;**/package.json&#x27;)</span> <span class=string>&#125;&#125;</span></span><br><span class=line>        <span class=attr>restore-keys:</span> <span class=string>|</span></span><br><span class=line><span class=string>          $&#123;&#123; runner.OS &#125;&#125;-node-modules-</span></span><br><span class=line><span class=string></span>          </span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>安装依赖</span></span><br><span class=line>      <span class=attr>if:</span> <span class=string>steps.cache.outputs.cache-hit</span> <span class=type>!=</span> <span class=string>&#x27;true&#x27;</span></span><br><span class=line>      <span class=attr>run:</span> <span class=string>|</span></span><br><span class=line><span class=string>        npm install --prefer-offline --no-audit</span></span><br><span class=line><span class=string></span>        </span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>生成静态文件</span></span><br><span class=line>      <span class=attr>run:</span> <span class=string>|</span> <span class=comment># 有其他需要运行的命令，自行添加（例如glup压缩等）</span></span><br><span class=line>        <span class=string>hexo</span> <span class=string>clean</span></span><br><span class=line>        <span class=string>hexo</span> <span class=string>generate</span></span><br><span class=line>        </span><br><span class=line>    <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>部署</span> </span><br><span class=line>      <span class=attr>run:</span> <span class=string>|</span> <span class=comment># 末尾main:main指从本地main分支推送到远程main分支，本地分支名不用修改，远程改成博客静态文件仓库的主分支</span></span><br><span class=line>        <span class=string>cd</span> <span class=string>./public</span></span><br><span class=line>        <span class=string>git</span> <span class=string>init</span></span><br><span class=line>        <span class=string>git</span> <span class=string>config</span> <span class=string>--global</span> <span class=string>user.name</span> <span class=string>&#x27;$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;&#x27;</span></span><br><span class=line>        <span class=string>git</span> <span class=string>config</span> <span class=string>--global</span> <span class=string>user.email</span> <span class=string>&#x27;$&#123;&#123; secrets.GITHUBEMAIL &#125;&#125;&#x27;</span></span><br><span class=line>        <span class=string>git</span> <span class=string>add</span> <span class=string>.</span></span><br><span class=line>        <span class=string>git</span> <span class=string>commit</span> <span class=string>-m</span> <span class=string>&quot;$<span class=template-variable>&#123;&#123; github.event.head_commit.message &#125;&#125;</span> $(date +&quot;</span><span class=string>%Z</span> <span class=string>%Y-%m-%d</span> <span class=string>%A</span> <span class=string>%H:%M:%S&quot;)</span> <span class=string>Updated</span> <span class=string>By</span> <span class=string>Github</span> <span class=string>Actions&quot;</span></span><br><span class=line>        <span class=string>git</span> <span class=string>branch</span> <span class=string>-M</span> <span class=string>main</span></span><br><span class=line>        <span class=string>git</span> <span class=string>push</span> <span class=string>--force</span> <span class=string>--quiet</span> <span class=string>&quot;https://$<span class=template-variable>&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;</span>:$<span class=template-variable>&#123;&#123; secrets.GITHUBTOKEN &#125;&#125;</span>@github.com/$<span class=template-variable>&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;</span>/$<span class=template-variable>&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;</span>.github.io.git&quot;</span> <span class=string>main:main</span> </span><br></pre></td></tr></table></figure></li><li><p>添加仓库秘钥</p><p>到你的博客<strong>源码</strong>仓库的<code>Settings-&gt;Secrets and variables-&gt;Actions</code>中添加<code>Repository secrets</code></p><p>点击<code>New repository secret</code>，将<code>autodeploy.yml</code>中使用的几个秘钥添加：</p><p>GITHUBUSERNAME ：你的<code>github</code>用户名，例如：我的博客静态文件仓库为<code>x1angji/x1angji.github.io</code>，在此处填入<code>x1angji</code></p><p>GITHUBEMAIL ：用于接收部署信息的邮箱</p><p>GITHUBTOKEN ：第一步获取的<code>Token</code></p></li><li><p>自动部署</p><p>使用<code>git</code>随意推送一次提交到<code>源码</code>仓库</p><p>打开源码仓库，找到<code>Actions-&gt;自动部署</code>，根据提交记录点进刚刚的提交，点击<code>deploy</code>即可查看部署过程</p></li></ol></div></details><p></p><h1 id=源码魔改><a href=#源码魔改 class=headerlink title=源码魔改></a>源码魔改</h1><p>该部分涉及到butterfly主题源码的修改，升级主题难以保留，需重新魔改</p><h2 id=分享本页><a href=#分享本页 class=headerlink title=分享本页></a>分享本页</h2><p>参考：<a target=_blank rel=noopener href=https://www.fomal.cc/posts/2d7ac914.html>博客魔改教程总结(三) | Fomalhaut🥝</a><br>前置条件：diy通知样式<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>侧边栏添加分享按钮，在<code>[ThemeRoot]/layout/include/rightside.pug</code>做以下修改：</p><figure class="highlight diff"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=meta>@@ -22,4 +22,7 @@</span></span><br><span class=line>       when &#x27;toc&#x27;</span><br><span class=line>         if showToc</span><br><span class=line>           button#mobile-toc-button.close(type=&quot;button&quot; title=_p(&quot;rightside.toc&quot;))</span><br><span class=line>             i.fas.fa-list-ul</span><br><span class=line><span class=addition>+      when &#x27;share&#x27;</span></span><br><span class=line><span class=addition>+        button.share(type=&quot;button&quot; title=&#x27;分享链接&#x27; onclick=&quot;pageShare()&quot;)</span></span><br><span class=line><span class=addition>+          i.fas.fa-share-nodes</span></span><br></pre></td></tr></table></figure></li><li><p>新建<code>[BlogRoot]/source/static/js/page-share.js</code>，添加如下代码：</p><p>获取的<code>title</code>结尾会有字符<code>| [你的站点名]</code>，<code>subTitle</code>目的是去除结尾的字符，根据你的站点名修改<code>endsWith</code>和<code>substring</code>的参数。</p><p><code>writeText</code>的参数为复制内容</p><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// 分享本页</span></span><br><span class=line><span class=keyword>function</span> <span class="title function_">pageShare</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class=keyword>let</span> url = <span class="variable language_">window</span>.<span class=property>location</span>.<span class=property>origin</span> + <span class="variable language_">window</span>.<span class=property>location</span>.<span class=property>pathname</span></span><br><span class=line>    <span class=keyword>try</span> &#123;</span><br><span class=line>        <span class=comment>// 截取标题</span></span><br><span class=line>        <span class=keyword>var</span> title = <span class="variable language_">document</span>.<span class=property>title</span>; <span class=comment>//获取的title结尾会有字符&quot;| 你的站点名&quot;</span></span><br><span class=line>        <span class=keyword>var</span> subTitle = title.<span class="title function_">endsWith</span>(<span class=string>&quot;| x1ang&quot;</span>) ? title.<span class="title function_">substring</span>(<span class=number>0</span>, title.<span class=property>length</span> - <span class=number>7</span>) : title;修改</span><br><span class=line>        navigator.<span class=property>clipboard</span>.<span class="title function_">writeText</span>(<span class=string>&#x27;x1ang的站内分享\n标题：&#x27;</span> + subTitle + <span class=string>&#x27;\n链接：&#x27;</span> + url + <span class=string>&#x27;\n欢迎来访！🍭🍭🍭&#x27;</span>); <span class=comment>// 复制内容</span></span><br><span class=line>        <span class="title function_">showToast</span>(<span class=string>&#x27;本页链接已复制到剪切板~&#x27;</span>, <span class=number>2000</span>); <span class=comment>// 通知</span></span><br><span class=line>    &#125; <span class=keyword>catch</span> (err) &#123;</span><br><span class=line>        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class=string>&#x27;复制失败！&#x27;</span>, err);</span><br><span class=line>    &#125;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>在<code>_config.butterfly.yml</code>中引入<code>ClipboardJS</code>依赖和<code>page-share</code>文件：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=attr>inject:</span></span><br><span class=line>  <span class=attr>bottom:</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;script</span> <span class=string>defer</span> <span class=string>src=&quot;https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js&quot;&gt;&lt;/script&gt;</span> <span class=comment># ClipboardJS依赖</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;script</span> <span class=string>defer</span> <span class=string>src=&quot;/static/js/page-share.js&quot;&gt;&lt;/script&gt;</span> <span class=comment># 分享本页</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=文章统计图><a href=#文章统计图 class=headerlink title=文章统计图></a>文章统计图</h2><p>参考：<a target=_blank rel=noopener href=https://blog.eurkon.com/post/1213ef82.html>Hexo 博客文章统计图</a><br>博主只保留了其中<code>categories</code>的文章分类统计和<code>archives</code>的文章发布统计<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>安装模块</p><figure class="highlight cmd"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install cheerio --save</span><br></pre></td></tr></table></figure></li><li><p>导入文章统计代码</p><p>新建 <code>[ThemeRoot]\scripts\helpers\charts.js</code>文件，然后添加以下代码：</p><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br><span class=line>106</span><br><span class=line>107</span><br><span class=line>108</span><br><span class=line>109</span><br><span class=line>110</span><br><span class=line>111</span><br><span class=line>112</span><br><span class=line>113</span><br><span class=line>114</span><br><span class=line>115</span><br><span class=line>116</span><br><span class=line>117</span><br><span class=line>118</span><br><span class=line>119</span><br><span class=line>120</span><br><span class=line>121</span><br><span class=line>122</span><br><span class=line>123</span><br><span class=line>124</span><br><span class=line>125</span><br><span class=line>126</span><br><span class=line>127</span><br><span class=line>128</span><br><span class=line>129</span><br><span class=line>130</span><br><span class=line>131</span><br><span class=line>132</span><br><span class=line>133</span><br><span class=line>134</span><br><span class=line>135</span><br><span class=line>136</span><br><span class=line>137</span><br><span class=line>138</span><br><span class=line>139</span><br><span class=line>140</span><br><span class=line>141</span><br><span class=line>142</span><br><span class=line>143</span><br><span class=line>144</span><br><span class=line>145</span><br><span class=line>146</span><br><span class=line>147</span><br><span class=line>148</span><br><span class=line>149</span><br><span class=line>150</span><br><span class=line>151</span><br><span class=line>152</span><br><span class=line>153</span><br><span class=line>154</span><br><span class=line>155</span><br><span class=line>156</span><br><span class=line>157</span><br><span class=line>158</span><br><span class=line>159</span><br><span class=line>160</span><br><span class=line>161</span><br><span class=line>162</span><br><span class=line>163</span><br><span class=line>164</span><br><span class=line>165</span><br><span class=line>166</span><br><span class=line>167</span><br><span class=line>168</span><br><span class=line>169</span><br><span class=line>170</span><br><span class=line>171</span><br><span class=line>172</span><br><span class=line>173</span><br><span class=line>174</span><br><span class=line>175</span><br><span class=line>176</span><br><span class=line>177</span><br><span class=line>178</span><br><span class=line>179</span><br><span class=line>180</span><br><span class=line>181</span><br><span class=line>182</span><br><span class=line>183</span><br><span class=line>184</span><br><span class=line>185</span><br><span class=line>186</span><br><span class=line>187</span><br><span class=line>188</span><br><span class=line>189</span><br><span class=line>190</span><br><span class=line>191</span><br><span class=line>192</span><br><span class=line>193</span><br><span class=line>194</span><br><span class=line>195</span><br><span class=line>196</span><br><span class=line>197</span><br><span class=line>198</span><br><span class=line>199</span><br><span class=line>200</span><br><span class=line>201</span><br><span class=line>202</span><br><span class=line>203</span><br><span class=line>204</span><br><span class=line>205</span><br><span class=line>206</span><br><span class=line>207</span><br><span class=line>208</span><br><span class=line>209</span><br><span class=line>210</span><br><span class=line>211</span><br><span class=line>212</span><br><span class=line>213</span><br><span class=line>214</span><br><span class=line>215</span><br><span class=line>216</span><br><span class=line>217</span><br><span class=line>218</span><br><span class=line>219</span><br><span class=line>220</span><br><span class=line>221</span><br><span class=line>222</span><br><span class=line>223</span><br><span class=line>224</span><br><span class=line>225</span><br><span class=line>226</span><br><span class=line>227</span><br><span class=line>228</span><br><span class=line>229</span><br><span class=line>230</span><br><span class=line>231</span><br><span class=line>232</span><br><span class=line>233</span><br><span class=line>234</span><br><span class=line>235</span><br><span class=line>236</span><br><span class=line>237</span><br><span class=line>238</span><br><span class=line>239</span><br><span class=line>240</span><br><span class=line>241</span><br><span class=line>242</span><br><span class=line>243</span><br><span class=line>244</span><br><span class=line>245</span><br><span class=line>246</span><br><span class=line>247</span><br><span class=line>248</span><br><span class=line>249</span><br><span class=line>250</span><br><span class=line>251</span><br><span class=line>252</span><br><span class=line>253</span><br><span class=line>254</span><br><span class=line>255</span><br><span class=line>256</span><br><span class=line>257</span><br><span class=line>258</span><br><span class=line>259</span><br><span class=line>260</span><br><span class=line>261</span><br><span class=line>262</span><br><span class=line>263</span><br><span class=line>264</span><br><span class=line>265</span><br><span class=line>266</span><br><span class=line>267</span><br><span class=line>268</span><br><span class=line>269</span><br><span class=line>270</span><br><span class=line>271</span><br><span class=line>272</span><br><span class=line>273</span><br><span class=line>274</span><br><span class=line>275</span><br><span class=line>276</span><br><span class=line>277</span><br><span class=line>278</span><br><span class=line>279</span><br><span class=line>280</span><br><span class=line>281</span><br><span class=line>282</span><br><span class=line>283</span><br><span class=line>284</span><br><span class=line>285</span><br><span class=line>286</span><br><span class=line>287</span><br><span class=line>288</span><br><span class=line>289</span><br><span class=line>290</span><br><span class=line>291</span><br><span class=line>292</span><br><span class=line>293</span><br><span class=line>294</span><br><span class=line>295</span><br><span class=line>296</span><br><span class=line>297</span><br><span class=line>298</span><br><span class=line>299</span><br><span class=line>300</span><br><span class=line>301</span><br><span class=line>302</span><br><span class=line>303</span><br><span class=line>304</span><br><span class=line>305</span><br><span class=line>306</span><br><span class=line>307</span><br><span class=line>308</span><br><span class=line>309</span><br><span class=line>310</span><br><span class=line>311</span><br><span class=line>312</span><br><span class=line>313</span><br><span class=line>314</span><br><span class=line>315</span><br><span class=line>316</span><br><span class=line>317</span><br><span class=line>318</span><br><span class=line>319</span><br><span class=line>320</span><br><span class=line>321</span><br><span class=line>322</span><br><span class=line>323</span><br><span class=line>324</span><br><span class=line>325</span><br><span class=line>326</span><br><span class=line>327</span><br><span class=line>328</span><br><span class=line>329</span><br><span class=line>330</span><br><span class=line>331</span><br><span class=line>332</span><br><span class=line>333</span><br><span class=line>334</span><br><span class=line>335</span><br><span class=line>336</span><br><span class=line>337</span><br><span class=line>338</span><br><span class=line>339</span><br><span class=line>340</span><br><span class=line>341</span><br><span class=line>342</span><br><span class=line>343</span><br><span class=line>344</span><br><span class=line>345</span><br><span class=line>346</span><br><span class=line>347</span><br><span class=line>348</span><br><span class=line>349</span><br><span class=line>350</span><br><span class=line>351</span><br><span class=line>352</span><br><span class=line>353</span><br><span class=line>354</span><br><span class=line>355</span><br><span class=line>356</span><br><span class=line>357</span><br><span class=line>358</span><br><span class=line>359</span><br><span class=line>360</span><br><span class=line>361</span><br><span class=line>362</span><br><span class=line>363</span><br><span class=line>364</span><br><span class=line>365</span><br><span class=line>366</span><br><span class=line>367</span><br><span class=line>368</span><br><span class=line>369</span><br><span class=line>370</span><br><span class=line>371</span><br><span class=line>372</span><br><span class=line>373</span><br><span class=line>374</span><br><span class=line>375</span><br><span class=line>376</span><br><span class=line>377</span><br><span class=line>378</span><br><span class=line>379</span><br><span class=line>380</span><br><span class=line>381</span><br><span class=line>382</span><br><span class=line>383</span><br><span class=line>384</span><br><span class=line>385</span><br><span class=line>386</span><br><span class=line>387</span><br><span class=line>388</span><br><span class=line>389</span><br><span class=line>390</span><br><span class=line>391</span><br><span class=line>392</span><br><span class=line>393</span><br><span class=line>394</span><br><span class=line>395</span><br><span class=line>396</span><br><span class=line>397</span><br><span class=line>398</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>const</span> cheerio = <span class=built_in>require</span>(<span class=string>&#x27;cheerio&#x27;</span>)</span><br><span class=line><span class=keyword>const</span> moment = <span class=built_in>require</span>(<span class=string>&#x27;moment&#x27;</span>)</span><br><span class=line></span><br><span class=line>hexo.<span class=property>extend</span>.<span class=property>filter</span>.<span class="title function_">register</span>(<span class=string>&#x27;after_render:html&#x27;</span>, <span class=keyword>function</span> (<span class=params>locals</span>) &#123;</span><br><span class=line>  <span class=keyword>const</span> $ = cheerio.<span class="title function_">load</span>(locals)</span><br><span class=line>  <span class=keyword>const</span> post = $(<span class=string>&#x27;#posts-chart&#x27;</span>)</span><br><span class=line>  <span class=keyword>const</span> tag = $(<span class=string>&#x27;#tags-chart&#x27;</span>)</span><br><span class=line>  <span class=keyword>const</span> category = $(<span class=string>&#x27;#categories-chart&#x27;</span>)</span><br><span class=line>  <span class=keyword>const</span> htmlEncode = <span class=literal>false</span></span><br><span class=line></span><br><span class=line>  <span class=keyword>if</span> (post.<span class=property>length</span> &gt; <span class=number>0</span> || tag.<span class=property>length</span> &gt; <span class=number>0</span> || category.<span class=property>length</span> &gt; <span class=number>0</span>) &#123;</span><br><span class=line>    <span class=keyword>if</span> (post.<span class=property>length</span> &gt; <span class=number>0</span> &amp;&amp; $(<span class=string>&#x27;#postsChart&#x27;</span>).<span class=property>length</span> === <span class=number>0</span>) &#123;</span><br><span class=line>      <span class=keyword>if</span> (post.<span class="title function_">attr</span>(<span class=string>&#x27;data-encode&#x27;</span>) === <span class=string>&#x27;true&#x27;</span>) htmlEncode = <span class=literal>true</span></span><br><span class=line>      post.<span class="title function_">after</span>(<span class="title function_">postsChart</span>(post.<span class="title function_">attr</span>(<span class=string>&#x27;data-start&#x27;</span>)))</span><br><span class=line>    &#125;</span><br><span class=line>    <span class=keyword>if</span> (tag.<span class=property>length</span> &gt; <span class=number>0</span> &amp;&amp; $(<span class=string>&#x27;#tagsChart&#x27;</span>).<span class=property>length</span> === <span class=number>0</span>) &#123;</span><br><span class=line>      <span class=keyword>if</span> (tag.<span class="title function_">attr</span>(<span class=string>&#x27;data-encode&#x27;</span>) === <span class=string>&#x27;true&#x27;</span>) htmlEncode = <span class=literal>true</span></span><br><span class=line>      tag.<span class="title function_">after</span>(<span class="title function_">tagsChart</span>(tag.<span class="title function_">attr</span>(<span class=string>&#x27;data-length&#x27;</span>)))</span><br><span class=line>    &#125;</span><br><span class=line>    <span class=keyword>if</span> (category.<span class=property>length</span> &gt; <span class=number>0</span> &amp;&amp; $(<span class=string>&#x27;#categoriesChart&#x27;</span>).<span class=property>length</span> === <span class=number>0</span>) &#123;</span><br><span class=line>      <span class=keyword>if</span> (category.<span class="title function_">attr</span>(<span class=string>&#x27;data-encode&#x27;</span>) === <span class=string>&#x27;true&#x27;</span>) htmlEncode = <span class=literal>true</span></span><br><span class=line>      category.<span class="title function_">after</span>(<span class="title function_">categoriesChart</span>(category.<span class="title function_">attr</span>(<span class=string>&#x27;data-parent&#x27;</span>)))</span><br><span class=line>    &#125;</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (htmlEncode) &#123;</span><br><span class=line>      <span class=keyword>return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>().<span class="title function_">replace</span>(<span class=regexp>/&amp;amp;#/g</span>, <span class=string>&#x27;&amp;#&#x27;</span>)</span><br><span class=line>    &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>      <span class=keyword>return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>()</span><br><span class=line>    &#125;</span><br><span class=line>  &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>    <span class=keyword>return</span> locals</span><br><span class=line>  &#125;</span><br><span class=line>&#125;, <span class=number>15</span>)</span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">postsChart</span> (<span class=params>startMonth</span>) &#123;</span><br><span class=line>  <span class=keyword>const</span> startDate = <span class="title function_">moment</span>(startMonth || <span class=string>&#x27;2020-01&#x27;</span>)</span><br><span class=line>  <span class=keyword>const</span> endDate = <span class="title function_">moment</span>()</span><br><span class=line></span><br><span class=line>  <span class=keyword>const</span> monthMap = <span class=keyword>new</span> <span class="title class_">Map</span>()</span><br><span class=line>  <span class=keyword>const</span> dayTime = <span class=number>3600</span> * <span class=number>24</span> * <span class=number>1000</span></span><br><span class=line>  <span class=keyword>for</span> (<span class=keyword>let</span> time = startDate; time &lt;= endDate; time += dayTime) &#123;</span><br><span class=line>    <span class=keyword>const</span> month = <span class="title function_">moment</span>(time).<span class="title function_">format</span>(<span class=string>&#x27;YYYY-MM&#x27;</span>)</span><br><span class=line>    <span class=keyword>if</span> (!monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class=line>      monthMap.<span class="title function_">set</span>(month, <span class=number>0</span>)</span><br><span class=line>    &#125;</span><br><span class=line>  &#125;</span><br><span class=line>  hexo.<span class=property>locals</span>.<span class="title function_">get</span>(<span class=string>&#x27;posts&#x27;</span>).<span class="title function_">forEach</span>(<span class=keyword>function</span> (<span class=params>post</span>) &#123;</span><br><span class=line>    <span class=keyword>const</span> month = post.<span class=property>date</span>.<span class="title function_">format</span>(<span class=string>&#x27;YYYY-MM&#x27;</span>)</span><br><span class=line>    <span class=keyword>if</span> (monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class=line>      monthMap.<span class="title function_">set</span>(month, monthMap.<span class="title function_">get</span>(month) + <span class=number>1</span>)</span><br><span class=line>    &#125;</span><br><span class=line>  &#125;)</span><br><span class=line>  <span class=keyword>const</span> monthArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">keys</span>()])</span><br><span class=line>  <span class=keyword>const</span> monthValueArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">values</span>()])</span><br><span class=line></span><br><span class=line>  <span class=keyword>return</span> <span class=string>`</span></span><br><span class=line><span class=string>  &lt;script id=&quot;postsChart&quot;&gt;</span></span><br><span class=line><span class=string>    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class=line><span class=string>    var postsChart = echarts.init(document.getElementById(&#x27;posts-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class=line><span class=string>    var postsOption = &#123;</span></span><br><span class=line><span class=string>      title: &#123;</span></span><br><span class=line><span class=string>        text: &#x27;文章发布统计图&#x27;,</span></span><br><span class=line><span class=string>        x: &#x27;center&#x27;,</span></span><br><span class=line><span class=string>        textStyle: &#123;</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      tooltip: &#123;</span></span><br><span class=line><span class=string>        trigger: &#x27;axis&#x27;</span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      xAxis: &#123;</span></span><br><span class=line><span class=string>        name: &#x27;日期&#x27;,</span></span><br><span class=line><span class=string>        type: &#x27;category&#x27;,</span></span><br><span class=line><span class=string>        boundaryGap: false,</span></span><br><span class=line><span class=string>        nameTextStyle: &#123;</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisTick: &#123;</span></span><br><span class=line><span class=string>          show: false</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisLabel: &#123;</span></span><br><span class=line><span class=string>          show: true,</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisLine: &#123;</span></span><br><span class=line><span class=string>          show: true,</span></span><br><span class=line><span class=string>          lineStyle: &#123;</span></span><br><span class=line><span class=string>            color: color</span></span><br><span class=line><span class=string>          &#125;</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        data: <span class=subst>$&#123;monthArr&#125;</span></span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      yAxis: &#123;</span></span><br><span class=line><span class=string>        name: &#x27;文章篇数&#x27;,</span></span><br><span class=line><span class=string>        type: &#x27;value&#x27;,</span></span><br><span class=line><span class=string>        nameTextStyle: &#123;</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        splitLine: &#123;</span></span><br><span class=line><span class=string>          show: false</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisTick: &#123;</span></span><br><span class=line><span class=string>          show: false</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisLabel: &#123;</span></span><br><span class=line><span class=string>          show: true,</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisLine: &#123;</span></span><br><span class=line><span class=string>          show: true,</span></span><br><span class=line><span class=string>          lineStyle: &#123;</span></span><br><span class=line><span class=string>            color: color</span></span><br><span class=line><span class=string>          &#125;</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      series: [&#123;</span></span><br><span class=line><span class=string>        name: &#x27;文章篇数&#x27;,</span></span><br><span class=line><span class=string>        type: &#x27;line&#x27;,</span></span><br><span class=line><span class=string>        smooth: true,</span></span><br><span class=line><span class=string>        lineStyle: &#123;</span></span><br><span class=line><span class=string>            width: 0</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        showSymbol: false,</span></span><br><span class=line><span class=string>        itemStyle: &#123;</span></span><br><span class=line><span class=string>          opacity: 1,</span></span><br><span class=line><span class=string>          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class=line><span class=string>            offset: 0,</span></span><br><span class=line><span class=string>            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class=line><span class=string>          &#125;,</span></span><br><span class=line><span class=string>          &#123;</span></span><br><span class=line><span class=string>            offset: 1,</span></span><br><span class=line><span class=string>            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class=line><span class=string>          &#125;])</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        areaStyle: &#123;</span></span><br><span class=line><span class=string>          opacity: 1,</span></span><br><span class=line><span class=string>          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class=line><span class=string>            offset: 0,</span></span><br><span class=line><span class=string>            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class=line><span class=string>          &#125;, &#123;</span></span><br><span class=line><span class=string>            offset: 1,</span></span><br><span class=line><span class=string>            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class=line><span class=string>          &#125;])</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        data: <span class=subst>$&#123;monthValueArr&#125;</span>,</span></span><br><span class=line><span class=string>        markLine: &#123;</span></span><br><span class=line><span class=string>          data: [&#123;</span></span><br><span class=line><span class=string>            name: &#x27;平均值&#x27;,</span></span><br><span class=line><span class=string>            type: &#x27;average&#x27;,</span></span><br><span class=line><span class=string>            label: &#123;</span></span><br><span class=line><span class=string>              color: color</span></span><br><span class=line><span class=string>            &#125;</span></span><br><span class=line><span class=string>          &#125;]</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;]</span></span><br><span class=line><span class=string>    &#125;;</span></span><br><span class=line><span class=string>    postsChart.setOption(postsOption);</span></span><br><span class=line><span class=string>    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class=line><span class=string>      postsChart.resize();</span></span><br><span class=line><span class=string>    &#125;);</span></span><br><span class=line><span class=string>    postsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class=line><span class=string>      if (event.componentType === &#x27;series&#x27;) window.location.href = &#x27;/archives/&#x27; + event.name.replace(&#x27;-&#x27;, &#x27;/&#x27;);</span></span><br><span class=line><span class=string>    &#125;);</span></span><br><span class=line><span class=string>  &lt;/script&gt;`</span></span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">tagsChart</span> (<span class=params>len</span>) &#123;</span><br><span class=line>  <span class=keyword>const</span> tagArr = []</span><br><span class=line>  hexo.<span class=property>locals</span>.<span class="title function_">get</span>(<span class=string>&#x27;tags&#x27;</span>).<span class="title function_">map</span>(<span class=keyword>function</span> (<span class=params>tag</span>) &#123;</span><br><span class=line>    tagArr.<span class="title function_">push</span>(&#123; <span class=attr>name</span>: tag.<span class=property>name</span>, <span class=attr>value</span>: tag.<span class=property>length</span>, <span class=attr>path</span>: tag.<span class=property>path</span> &#125;)</span><br><span class=line>  &#125;)</span><br><span class=line>  tagArr.<span class="title function_">sort</span>(<span class=function>(<span class=params>a, b</span>) =&gt;</span> &#123; <span class=keyword>return</span> b.<span class=property>value</span> - a.<span class=property>value</span> &#125;)</span><br><span class=line></span><br><span class=line>  <span class=keyword>const</span> dataLength = <span class="title class_">Math</span>.<span class="title function_">min</span>(tagArr.<span class=property>length</span>, len) || tagArr.<span class=property>length</span></span><br><span class=line>  <span class=keyword>const</span> tagNameArr = []</span><br><span class=line>  <span class=keyword>for</span> (<span class=keyword>let</span> i = <span class=number>0</span>; i &lt; dataLength; i++) &#123;</span><br><span class=line>    tagNameArr.<span class="title function_">push</span>(tagArr[i].<span class=property>name</span>)</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=keyword>const</span> tagNameArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagNameArr)</span><br><span class=line>  <span class=keyword>const</span> tagArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagArr)</span><br><span class=line></span><br><span class=line>  <span class=keyword>return</span> <span class=string>`</span></span><br><span class=line><span class=string>  &lt;script id=&quot;tagsChart&quot;&gt;</span></span><br><span class=line><span class=string>    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class=line><span class=string>    var tagsChart = echarts.init(document.getElementById(&#x27;tags-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class=line><span class=string>    var tagsOption = &#123;</span></span><br><span class=line><span class=string>      title: &#123;</span></span><br><span class=line><span class=string>        text: &#x27;Top <span class=subst>$&#123;dataLength&#125;</span> 标签统计图&#x27;,</span></span><br><span class=line><span class=string>        x: &#x27;center&#x27;,</span></span><br><span class=line><span class=string>        textStyle: &#123;</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      tooltip: &#123;&#125;,</span></span><br><span class=line><span class=string>      xAxis: &#123;</span></span><br><span class=line><span class=string>        name: &#x27;标签&#x27;,</span></span><br><span class=line><span class=string>        type: &#x27;category&#x27;,</span></span><br><span class=line><span class=string>        nameTextStyle: &#123;</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisTick: &#123;</span></span><br><span class=line><span class=string>          show: false</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisLabel: &#123;</span></span><br><span class=line><span class=string>          show: true,</span></span><br><span class=line><span class=string>          color: color,</span></span><br><span class=line><span class=string>          interval: 0</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisLine: &#123;</span></span><br><span class=line><span class=string>          show: true,</span></span><br><span class=line><span class=string>          lineStyle: &#123;</span></span><br><span class=line><span class=string>            color: color</span></span><br><span class=line><span class=string>          &#125;</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        data: <span class=subst>$&#123;tagNameArrJson&#125;</span></span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      yAxis: &#123;</span></span><br><span class=line><span class=string>        name: &#x27;文章篇数&#x27;,</span></span><br><span class=line><span class=string>        type: &#x27;value&#x27;,</span></span><br><span class=line><span class=string>        splitLine: &#123;</span></span><br><span class=line><span class=string>          show: false</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        nameTextStyle: &#123;</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisTick: &#123;</span></span><br><span class=line><span class=string>          show: false</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisLabel: &#123;</span></span><br><span class=line><span class=string>          show: true,</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        axisLine: &#123;</span></span><br><span class=line><span class=string>          show: true,</span></span><br><span class=line><span class=string>          lineStyle: &#123;</span></span><br><span class=line><span class=string>            color: color</span></span><br><span class=line><span class=string>          &#125;</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      series: [&#123;</span></span><br><span class=line><span class=string>        name: &#x27;文章篇数&#x27;,</span></span><br><span class=line><span class=string>        type: &#x27;bar&#x27;,</span></span><br><span class=line><span class=string>        data: <span class=subst>$&#123;tagArrJson&#125;</span>,</span></span><br><span class=line><span class=string>        itemStyle: &#123;</span></span><br><span class=line><span class=string>          borderRadius: [5, 5, 0, 0],</span></span><br><span class=line><span class=string>          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class=line><span class=string>            offset: 0,</span></span><br><span class=line><span class=string>            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class=line><span class=string>          &#125;,</span></span><br><span class=line><span class=string>          &#123;</span></span><br><span class=line><span class=string>            offset: 1,</span></span><br><span class=line><span class=string>            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class=line><span class=string>          &#125;])</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        emphasis: &#123;</span></span><br><span class=line><span class=string>          itemStyle: &#123;</span></span><br><span class=line><span class=string>            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class=line><span class=string>              offset: 0,</span></span><br><span class=line><span class=string>              color: &#x27;rgba(128, 255, 195)&#x27;</span></span><br><span class=line><span class=string>            &#125;,</span></span><br><span class=line><span class=string>            &#123;</span></span><br><span class=line><span class=string>              offset: 1,</span></span><br><span class=line><span class=string>              color: &#x27;rgba(1, 211, 255)&#x27;</span></span><br><span class=line><span class=string>            &#125;])</span></span><br><span class=line><span class=string>          &#125;</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        markLine: &#123;</span></span><br><span class=line><span class=string>          data: [&#123;</span></span><br><span class=line><span class=string>            name: &#x27;平均值&#x27;,</span></span><br><span class=line><span class=string>            type: &#x27;average&#x27;,</span></span><br><span class=line><span class=string>            label: &#123;</span></span><br><span class=line><span class=string>              color: color</span></span><br><span class=line><span class=string>            &#125;</span></span><br><span class=line><span class=string>          &#125;]</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;]</span></span><br><span class=line><span class=string>    &#125;;</span></span><br><span class=line><span class=string>    tagsChart.setOption(tagsOption);</span></span><br><span class=line><span class=string>    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class=line><span class=string>      tagsChart.resize();</span></span><br><span class=line><span class=string>    &#125;);</span></span><br><span class=line><span class=string>    tagsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class=line><span class=string>      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class=line><span class=string>    &#125;);</span></span><br><span class=line><span class=string>  &lt;/script&gt;`</span></span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">categoriesChart</span> (<span class=params>dataParent</span>) &#123;</span><br><span class=line>  <span class=keyword>const</span> categoryArr = []</span><br><span class=line>  <span class=keyword>let</span> categoryParentFlag = <span class=literal>false</span></span><br><span class=line>  hexo.<span class=property>locals</span>.<span class="title function_">get</span>(<span class=string>&#x27;categories&#x27;</span>).<span class="title function_">map</span>(<span class=keyword>function</span> (<span class=params>category</span>) &#123;</span><br><span class=line>    <span class=keyword>if</span> (category.<span class=property>parent</span>) categoryParentFlag = <span class=literal>true</span></span><br><span class=line>    categoryArr.<span class="title function_">push</span>(&#123;</span><br><span class=line>      <span class=attr>name</span>: category.<span class=property>name</span>,</span><br><span class=line>      <span class=attr>value</span>: category.<span class=property>length</span>,</span><br><span class=line>      <span class=attr>path</span>: category.<span class=property>path</span>,</span><br><span class=line>      <span class=attr>id</span>: category.<span class=property>_id</span>,</span><br><span class=line>      <span class=attr>parentId</span>: category.<span class=property>parent</span> || <span class=string>&#x27;0&#x27;</span></span><br><span class=line>    &#125;)</span><br><span class=line>  &#125;)</span><br><span class=line>  categoryParentFlag = categoryParentFlag &amp;&amp; dataParent === <span class=string>&#x27;true&#x27;</span></span><br><span class=line>  categoryArr.<span class="title function_">sort</span>(<span class=function>(<span class=params>a, b</span>) =&gt;</span> &#123; <span class=keyword>return</span> b.<span class=property>value</span> - a.<span class=property>value</span> &#125;)</span><br><span class=line>  <span class=keyword>function</span> <span class="title function_">translateListToTree</span> (<span class=params>data, parent</span>) &#123;</span><br><span class=line>    <span class=keyword>let</span> tree = []</span><br><span class=line>    <span class=keyword>let</span> temp</span><br><span class=line>    data.<span class="title function_">forEach</span>(<span class=function>(<span class=params>item, index</span>) =&gt;</span> &#123;</span><br><span class=line>      <span class=keyword>if</span> (data[index].<span class=property>parentId</span> == parent) &#123;</span><br><span class=line>        <span class=keyword>let</span> obj = data[index];</span><br><span class=line>        temp = <span class="title function_">translateListToTree</span>(data, data[index].<span class=property>id</span>);</span><br><span class=line>        <span class=keyword>if</span> (temp.<span class=property>length</span> &gt; <span class=number>0</span>) &#123;</span><br><span class=line>          obj.<span class=property>children</span> = temp</span><br><span class=line>        &#125;</span><br><span class=line>        <span class=keyword>if</span> (tree.<span class="title function_">indexOf</span>())</span><br><span class=line>          tree.<span class="title function_">push</span>(obj)</span><br><span class=line>      &#125;</span><br><span class=line>    &#125;)</span><br><span class=line>    <span class=keyword>return</span> tree</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=keyword>const</span> categoryNameJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr.<span class="title function_">map</span>(<span class=keyword>function</span> (<span class=params>category</span>) &#123; <span class=keyword>return</span> category.<span class=property>name</span> &#125;))</span><br><span class=line>  <span class=keyword>const</span> categoryArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr)</span><br><span class=line>  <span class=keyword>const</span> categoryArrParentJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title function_">translateListToTree</span>(categoryArr, <span class=string>&#x27;0&#x27;</span>))</span><br><span class=line></span><br><span class=line>  <span class=keyword>return</span> <span class=string>`</span></span><br><span class=line><span class=string>  &lt;script id=&quot;categoriesChart&quot;&gt;</span></span><br><span class=line><span class=string>    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class=line><span class=string>    var categoriesChart = echarts.init(document.getElementById(&#x27;categories-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class=line><span class=string>    var categoryParentFlag = <span class=subst>$&#123;categoryParentFlag&#125;</span></span></span><br><span class=line><span class=string>    var categoriesOption = &#123;</span></span><br><span class=line><span class=string>      title: &#123;</span></span><br><span class=line><span class=string>        text: &#x27;文章分类统计图&#x27;,</span></span><br><span class=line><span class=string>        x: &#x27;center&#x27;,</span></span><br><span class=line><span class=string>        textStyle: &#123;</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      legend: &#123;</span></span><br><span class=line><span class=string>        top: &#x27;bottom&#x27;,</span></span><br><span class=line><span class=string>        data: <span class=subst>$&#123;categoryNameJson&#125;</span>,</span></span><br><span class=line><span class=string>        textStyle: &#123;</span></span><br><span class=line><span class=string>          color: color</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      tooltip: &#123;</span></span><br><span class=line><span class=string>        trigger: &#x27;item&#x27;</span></span><br><span class=line><span class=string>      &#125;,</span></span><br><span class=line><span class=string>      series: []</span></span><br><span class=line><span class=string>    &#125;;</span></span><br><span class=line><span class=string>    categoriesOption.series.push(</span></span><br><span class=line><span class=string>      categoryParentFlag ? </span></span><br><span class=line><span class=string>      &#123;</span></span><br><span class=line><span class=string>        nodeClick :false,</span></span><br><span class=line><span class=string>        name: &#x27;文章篇数&#x27;,</span></span><br><span class=line><span class=string>        type: &#x27;sunburst&#x27;,</span></span><br><span class=line><span class=string>        radius: [&#x27;15%&#x27;, &#x27;90%&#x27;],</span></span><br><span class=line><span class=string>        center: [&#x27;50%&#x27;, &#x27;55%&#x27;],</span></span><br><span class=line><span class=string>        sort: &#x27;desc&#x27;,</span></span><br><span class=line><span class=string>        data: <span class=subst>$&#123;categoryArrParentJson&#125;</span>,</span></span><br><span class=line><span class=string>        itemStyle: &#123;</span></span><br><span class=line><span class=string>          borderColor: &#x27;#fff&#x27;,</span></span><br><span class=line><span class=string>          borderWidth: 2,</span></span><br><span class=line><span class=string>          emphasis: &#123;</span></span><br><span class=line><span class=string>            focus: &#x27;ancestor&#x27;,</span></span><br><span class=line><span class=string>            shadowBlur: 10,</span></span><br><span class=line><span class=string>            shadowOffsetX: 0,</span></span><br><span class=line><span class=string>            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class=line><span class=string>          &#125;</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;</span></span><br><span class=line><span class=string>      :</span></span><br><span class=line><span class=string>      &#123;</span></span><br><span class=line><span class=string>        name: &#x27;文章篇数&#x27;,</span></span><br><span class=line><span class=string>        type: &#x27;pie&#x27;,</span></span><br><span class=line><span class=string>        radius: [30, 80],</span></span><br><span class=line><span class=string>        roseType: &#x27;area&#x27;,</span></span><br><span class=line><span class=string>        label: &#123;</span></span><br><span class=line><span class=string>          color: color,</span></span><br><span class=line><span class=string>          formatter: &#x27;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span></span><br><span class=line><span class=string>        &#125;,</span></span><br><span class=line><span class=string>        data: <span class=subst>$&#123;categoryArrJson&#125;</span>,</span></span><br><span class=line><span class=string>        itemStyle: &#123;</span></span><br><span class=line><span class=string>          emphasis: &#123;</span></span><br><span class=line><span class=string>            shadowBlur: 10,</span></span><br><span class=line><span class=string>            shadowOffsetX: 0,</span></span><br><span class=line><span class=string>            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class=line><span class=string>          &#125;</span></span><br><span class=line><span class=string>        &#125;</span></span><br><span class=line><span class=string>      &#125;</span></span><br><span class=line><span class=string>    )</span></span><br><span class=line><span class=string>    categoriesChart.setOption(categoriesOption);</span></span><br><span class=line><span class=string>    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class=line><span class=string>      categoriesChart.resize();</span></span><br><span class=line><span class=string>    &#125;);</span></span><br><span class=line><span class=string>    categoriesChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class=line><span class=string>      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class=line><span class=string>    &#125;);</span></span><br><span class=line><span class=string>  &lt;/script&gt;`</span></span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure></li><li><p><code>categories</code>页面添加统计图</p><p>注意：一定要注释掉<code>type: categories</code>如果想保留分类页面原功能，参考完整教程</p><figure class="highlight markdown"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>---</span><br><span class=line>title: 分类</span><br><span class=line>date: 2025-07-31 15:59:03</span><br><span class=line><span class=section># type: categories</span></span><br><span class=line>---</span><br><span class=line>&lt;!-- 引入echarts.js --&gt;</span><br><span class=line><span class=language-xml><span class=tag>&lt;<span class=name>script</span> <span class=attr>src</span>=<span class=string>&quot;https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js&quot;</span>&gt;</span></span><span class=language-xml><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span></span><br><span class=line>&lt;!-- 文章分类统计图 --&gt;</span><br><span class=line><span class=language-xml><span class=tag>&lt;<span class=name>div</span> <span class=attr>id</span>=<span class=string>&quot;categories-chart&quot;</span> <span class=attr>data-parent</span>=<span class=string>&quot;true&quot;</span> <span class=attr>style</span>=<span class=string>&quot;height: 320px; padding: 10px;&quot;</span>&gt;</span></span><span class=language-xml><span class=tag>&lt;/<span class=name>div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p><code>archives</code>页面添加统计图</p><p>修改<code>[ThemeRoot]\layout\archive.pug</code>，如下：</p><figure class="highlight diff"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=meta>@@ -5,4 +5,8 @@</span></span><br><span class=line>  block content</span><br><span class=line>    include ./includes/mixins/article-sort.pug</span><br><span class=line>    #archive</span><br><span class=line><span class=addition>+     &lt;!-- 引入echarts.js --&gt;</span></span><br><span class=line><span class=addition>+     &lt;script src=&quot;https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class=line><span class=addition>+     &lt;!-- 文章发布时间统计图 --&gt;</span></span><br><span class=line><span class=addition>+     &lt;div id=&quot;posts-chart&quot; data-start=&quot;2024-09&quot; style=&quot;border-radius: 8px; height: 320px; padding: 5px;&quot;&gt;&lt;/div&gt;</span></span><br><span class=line>      .article-sort-title= `$&#123;_p(&#x27;page.articles&#x27;)&#125; - $&#123;getArchiveLength()&#125;`</span><br></pre></td></tr></table></figure></li><li><p><code>pjax</code>适配<br>修改<code>[ThemeRoot]/layout/includes/third-party/pjax.pug</code>如下：</p><figure class="highlight diff"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=meta>@@ -1,6 +1,6 @@</span></span><br><span class=line> - var pjaxExclude = &#x27;a:not([target=&quot;_blank&quot;])&#x27;</span><br><span class=line> if theme.pjax.exclude</span><br><span class=line>   each val in theme.pjax.exclude</span><br><span class=line>     - pjaxExclude += `:not([href=&quot;$&#123;val&#125;&quot;])`</span><br><span class=line></span><br><span class=line><span class=deletion>- - let pjaxSelectors = [&#x27;head &gt; title&#x27;, &#x27;#config-diff&#x27;, &#x27;#body-wrap&#x27;, &#x27;#rightside-config-hide&#x27;, &#x27;#rightside-config-show&#x27;, &#x27;.js-pjax&#x27;]</span></span><br><span class=line><span class=addition>+ - let pjaxSelectors = [&#x27;head &gt; title&#x27;, &#x27;#config-diff&#x27;, &#x27;#body-wrap&#x27;, &#x27;#rightside-config-hide&#x27;, &#x27;#rightside-config-show&#x27;, &#x27;.js-pjax&#x27;, &#x27;#posts-chart&#x27;, &#x27;#categories-chart&#x27;]</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=昼夜切换动画><a href=#昼夜切换动画 class=headerlink title=昼夜切换动画></a>昼夜切换动画</h2><p>参考：<a target=_blank rel=noopener href=https://www.fomal.cc/posts/d739261b.html>博客魔改教程总结(四) | Fomalhaut🥝</a><br><strong>前置条件</strong>：diy页面通知样式<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>新建<code>[ThemeRoot]\layout\includes\sun_moon.pug</code>，复制如下代码：</p><p>这部分是用Pug模板语法定义的SVG图标，包含太阳（#icon-sun）和月亮（#icon-moon）。通过js控制这两个图标的旋转、显隐和透明度变化，实现日夜切换的动画效果。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>svg(aria-hidden=&#x27;true&#x27;, style=&#x27;position:absolute; overflow:hidden; width:0; height:0&#x27;)</span><br><span class=line>  symbol#icon-sun(viewBox=&#x27;0 0 1024 1024&#x27;)</span><br><span class=line>    path(d=&#x27;M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z&#x27;, fill=&#x27;#FFD878&#x27;, p-id=&#x27;8420&#x27;)</span><br><span class=line>    path(d=&#x27;M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z&#x27;, fill=&#x27;#FFE4A9&#x27;, p-id=&#x27;8421&#x27;)</span><br><span class=line>    path(d=&#x27;M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z&#x27;, fill=&#x27;#4D5152&#x27;, p-id=&#x27;8422&#x27;)</span><br><span class=line>    path(d=&#x27;M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z&#x27;, fill=&#x27;#4D5152&#x27;, p-id=&#x27;8423&#x27;)</span><br><span class=line>  symbol#icon-moon(viewBox=&#x27;0 0 1024 1024&#x27;)</span><br><span class=line>    path(d=&#x27;M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z&#x27;, fill=&#x27;#FFB531&#x27;, p-id=&#x27;11345&#x27;)</span><br><span class=line>    path(d=&#x27;M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z&#x27;, fill=&#x27;#030835&#x27;, p-id=&#x27;11346&#x27;)</span><br></pre></td></tr></table></figure></li><li><p>新建<code>[ThemeRoot]\source\css\_layout\sun_moon.styl</code>，复制如下代码：</p><figure class="highlight stylus"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br></pre></td><td class=code><pre><span class=line><span class=selector-class>.Cuteen_DarkSky</span>,</span><br><span class=line><span class=selector-class>.Cuteen_DarkSky</span><span class=selector-pseudo>:before</span></span><br><span class=line>  <span class=attribute>content</span> <span class=string>&#x27;&#x27;</span></span><br><span class=line>  <span class=attribute>position</span> fixed</span><br><span class=line>  <span class=attribute>left</span> <span class=number>0</span></span><br><span class=line>  <span class=attribute>right</span> <span class=number>0</span></span><br><span class=line>  <span class=attribute>top</span> <span class=number>0</span></span><br><span class=line>  <span class=attribute>bottom</span> <span class=number>0</span></span><br><span class=line>  <span class=attribute>z-index</span> <span class=number>88888888</span></span><br><span class=line></span><br><span class=line><span class=selector-class>.Cuteen_DarkSky</span></span><br><span class=line>  <span class=attribute>background</span> <span class=built_in>linear-gradient</span>(to top, <span class=number>#f8cd71</span> <span class=number>0</span>, <span class=number>#5bfde9</span> <span class=number>80%</span>)</span><br><span class=line>  <span class=selector-pseudo>&amp;:before</span></span><br><span class=line>    <span class=attribute>transition</span> <span class=number>2s</span> ease all</span><br><span class=line>    <span class=attribute>opacity</span> <span class=number>0</span></span><br><span class=line>    <span class=attribute>background</span> <span class=built_in>linear-gradient</span>(to top, <span class=number>#30cfd0</span> <span class=number>0</span>, <span class=number>#330867</span> <span class=number>100%</span>)</span><br><span class=line></span><br><span class=line><span class=selector-class>.DarkMode</span></span><br><span class=line>  <span class=selector-class>.Cuteen_DarkSky</span></span><br><span class=line>    <span class=selector-pseudo>&amp;:before</span></span><br><span class=line>      <span class=attribute>opacity</span> <span class=number>1</span></span><br><span class=line></span><br><span class=line><span class=selector-class>.Cuteen_DarkPlanet</span></span><br><span class=line>  <span class=attribute>z-index</span> <span class=number>99999999</span></span><br><span class=line>  <span class=attribute>position</span> fixed</span><br><span class=line>  <span class=attribute>left</span> -<span class=number>50%</span></span><br><span class=line>  <span class=attribute>top</span> -<span class=number>50%</span></span><br><span class=line>  <span class=attribute>width</span> <span class=number>200%</span></span><br><span class=line>  <span class=attribute>height</span> <span class=number>200%</span></span><br><span class=line>  -webkit-<span class=attribute>animation</span> CuteenPlanetMove <span class=number>2s</span> <span class=built_in>cubic-bezier</span>(<span class=number>0.7</span>, <span class=number>0</span>, <span class=number>0</span>, <span class=number>1</span>)</span><br><span class=line>  <span class=attribute>animation</span> CuteenPlanetMove <span class=number>2s</span> <span class=built_in>cubic-bezier</span>(<span class=number>0.7</span>, <span class=number>0</span>, <span class=number>0</span>, <span class=number>1</span>)</span><br><span class=line>  <span class=attribute>transform-origin</span> center bottom</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>@-webkit-keyframes</span> CuteenPlanetMove &#123;</span><br><span class=line>  <span class=number>0%</span> &#123;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>rotate</span>(<span class=number>0</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  to &#123;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>rotate</span>(<span class=number>360deg</span>);</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line><span class=keyword>@keyframes</span> CuteenPlanetMove &#123;</span><br><span class=line>  <span class=number>0%</span> &#123;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>rotate</span>(<span class=number>0</span>);</span><br><span class=line>  &#125;</span><br><span class=line>  to &#123;</span><br><span class=line>    <span class=attribute>transform</span>: <span class=built_in>rotate</span>(<span class=number>360deg</span>);</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-class>.Cuteen_DarkPlanet</span></span><br><span class=line>  <span class=selector-id>#sun</span></span><br><span class=line>    <span class=attribute>position</span> absolute</span><br><span class=line>    <span class=attribute>border-radius</span> <span class=number>100%</span></span><br><span class=line>    <span class=attribute>left</span> <span class=number>44%</span></span><br><span class=line>    <span class=attribute>top</span> <span class=number>30%</span></span><br><span class=line>    <span class=attribute>height</span> <span class=number>6rem</span></span><br><span class=line>    <span class=attribute>width</span> <span class=number>6rem</span></span><br><span class=line>    <span class=attribute>background</span> <span class=number>#ffee94</span></span><br><span class=line>    <span class=attribute>box-shadow</span> <span class=number>0</span> <span class=number>0</span> <span class=number>40px</span> <span class=number>#ffee94</span></span><br><span class=line>    <span class=comment>// opacity 0</span></span><br><span class=line></span><br><span class=line>  <span class=selector-id>#moon</span></span><br><span class=line>    <span class=attribute>position</span> absolute</span><br><span class=line>    <span class=attribute>border-radius</span> <span class=number>100%</span></span><br><span class=line>    <span class=attribute>left</span> <span class=number>44%</span></span><br><span class=line>    <span class=attribute>top</span> <span class=number>30%</span></span><br><span class=line>    <span class=attribute>position</span> absolute</span><br><span class=line>    <span class=attribute>border-radius</span> <span class=number>100%</span></span><br><span class=line>    <span class=attribute>height</span> <span class=number>6rem</span></span><br><span class=line>    <span class=attribute>width</span> <span class=number>6rem</span></span><br><span class=line>    <span class=attribute>box-shadow</span> -<span class=number>1.8em</span> <span class=number>1.8em</span> <span class=number>0</span> <span class=number>0.2em</span> <span class=number>#fff</span></span><br><span class=line></span><br><span class=line><span class=selector-class>.search</span></span><br><span class=line>  <span class=selector-tag>span</span></span><br><span class=line>    <span class=attribute>display</span> none</span><br><span class=line></span><br><span class=line><span class=selector-class>.menus_item</span></span><br><span class=line>  <span class=selector-tag>a</span></span><br><span class=line>    <span class=attribute>text-decoration</span> none<span class=meta>!important</span></span><br></pre></td></tr></table></figure></li><li><p>新建<code>[BlogRoot]\source\static\js\custom.js</code>，复制如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。</p><p>定义了一个通知函数，后面也会有用到，所以单独建了一个文件管理</p><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* ===========================================</span></span><br><span class=line><span class=comment>   Toast 通知</span></span><br><span class=line><span class=comment>   =========================================== */</span></span><br><span class=line><span class=comment>/**</span></span><br><span class=line><span class=comment> * Toast 通知 - 显示消息提示</span></span><br><span class=line><span class=comment> * <span class=doctag>@param</span> &#123;<span class=type>string</span>&#125; <span class=variable>message</span> - 消息内容</span></span><br><span class=line><span class=comment> * <span class=doctag>@param</span> &#123;<span class=type>number</span>&#125; <span class=variable>duration</span> - 显示时长，默认2000ms</span></span><br><span class=line><span class=comment> * </span></span><br><span class=line><span class=comment> * 用法：</span></span><br><span class=line><span class=comment> * showToast(&#x27;操作成功！&#x27;);</span></span><br><span class=line><span class=comment> * showToast(&#x27;切换完成&#x27;, 2000);</span></span><br><span class=line><span class=comment> */</span></span><br><span class=line><span class=keyword>function</span> <span class="title function_">showToast</span>(<span class=params>message, duration = <span class=number>2000</span></span>) &#123;</span><br><span class=line>    <span class=comment>// 检测当前主题</span></span><br><span class=line>    <span class=keyword>const</span> isDarkMode = <span class="variable language_">document</span>.<span class=property>documentElement</span>.<span class="title function_">getAttribute</span>(<span class=string>&#x27;data-theme&#x27;</span>) === <span class=string>&#x27;dark&#x27;</span> || </span><br><span class=line>                      <span class="variable language_">document</span>.<span class=property>body</span>.<span class=property>classList</span>.<span class="title function_">contains</span>(<span class=string>&#x27;DarkMode&#x27;</span>);</span><br><span class=line>    </span><br><span class=line>    <span class=comment>// 创建通知容器</span></span><br><span class=line>    <span class=keyword>let</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&#x27;toast-container&#x27;</span>);</span><br><span class=line>    <span class=keyword>if</span> (!container) &#123;</span><br><span class=line>        container = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&#x27;div&#x27;</span>);</span><br><span class=line>        container.<span class=property>id</span> = <span class=string>&#x27;toast-container&#x27;</span>;</span><br><span class=line>        container.<span class=property>style</span>.<span class=property>cssText</span> = <span class=string>`</span></span><br><span class=line><span class=string>            position: fixed;</span></span><br><span class=line><span class=string>            top: 20px;</span></span><br><span class=line><span class=string>            right: 20px;</span></span><br><span class=line><span class=string>            z-index: 9999;</span></span><br><span class=line><span class=string>            pointer-events: none;</span></span><br><span class=line><span class=string>        `</span>;</span><br><span class=line>        <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">appendChild</span>(container);</span><br><span class=line>    &#125;</span><br><span class=line></span><br><span class=line>    <span class=comment>// 创建通知元素</span></span><br><span class=line>    <span class=keyword>const</span> toast = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&#x27;div&#x27;</span>);</span><br><span class=line>    toast.<span class=property>innerHTML</span> = <span class=string>`</span></span><br><span class=line><span class=string>        &lt;span style=&quot;margin-right: 8px;&quot;&gt;😊&lt;/span&gt;</span></span><br><span class=line><span class=string>        &lt;span&gt;<span class=subst>$&#123;message&#125;</span>&lt;/span&gt;</span></span><br><span class=line><span class=string>    `</span>;</span><br><span class=line>    </span><br><span class=line>    <span class=comment>// 根据主题设置样式</span></span><br><span class=line>    <span class=keyword>const</span> lightStyles = &#123;</span><br><span class=line>        <span class=attr>background</span>: <span class=string>&#x27;#f0f9ff&#x27;</span>,</span><br><span class=line>        <span class=attr>border</span>: <span class=string>&#x27;1px solid #bfdbfe&#x27;</span>,</span><br><span class=line>        <span class=attr>color</span>: <span class=string>&#x27;#1e293b&#x27;</span>,</span><br><span class=line>        <span class=attr>boxShadow</span>: <span class=string>&#x27;0 4px 12px rgba(0,0,0,0.15)&#x27;</span></span><br><span class=line>    &#125;;</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>const</span> darkStyles = &#123;</span><br><span class=line>        <span class=attr>background</span>: <span class=string>&#x27;#1e293b&#x27;</span>,</span><br><span class=line>        <span class=attr>border</span>: <span class=string>&#x27;1px solid #475569&#x27;</span>,</span><br><span class=line>        <span class=attr>color</span>: <span class=string>&#x27;#e2e8f0&#x27;</span>,</span><br><span class=line>        <span class=attr>boxShadow</span>: <span class=string>&#x27;0 4px 12px rgba(0,0,0,0.4)&#x27;</span></span><br><span class=line>    &#125;;</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>const</span> currentStyles = isDarkMode ? darkStyles : lightStyles;</span><br><span class=line>    </span><br><span class=line>    toast.<span class=property>style</span>.<span class=property>cssText</span> = <span class=string>`</span></span><br><span class=line><span class=string>        display: flex;</span></span><br><span class=line><span class=string>        align-items: center;</span></span><br><span class=line><span class=string>        margin-bottom: 10px;</span></span><br><span class=line><span class=string>        padding: 12px 16px;</span></span><br><span class=line><span class=string>        background: <span class=subst>$&#123;currentStyles.background&#125;</span>;</span></span><br><span class=line><span class=string>        border: <span class=subst>$&#123;currentStyles.border&#125;</span>;</span></span><br><span class=line><span class=string>        color: <span class=subst>$&#123;currentStyles.color&#125;</span>;</span></span><br><span class=line><span class=string>        border-radius: 8px;</span></span><br><span class=line><span class=string>        box-shadow: <span class=subst>$&#123;currentStyles.boxShadow&#125;</span>;</span></span><br><span class=line><span class=string>        transform: translateX(100%);</span></span><br><span class=line><span class=string>        transition: all 0.3s ease;</span></span><br><span class=line><span class=string>        pointer-events: auto;</span></span><br><span class=line><span class=string>        max-width: 320px;</span></span><br><span class=line><span class=string>        word-break: break-word;</span></span><br><span class=line><span class=string>        font-size: 14px;</span></span><br><span class=line><span class=string>        line-height: 1.4;</span></span><br><span class=line><span class=string>        cursor: pointer;</span></span><br><span class=line><span class=string>    `</span>;</span><br><span class=line></span><br><span class=line>    container.<span class="title function_">appendChild</span>(toast);</span><br><span class=line></span><br><span class=line>    <span class=comment>// 进入动画</span></span><br><span class=line>    <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>transform</span> = <span class=string>&#x27;translateX(0)&#x27;</span>;</span><br><span class=line>    &#125;, <span class=number>10</span>);</span><br><span class=line></span><br><span class=line>    <span class=comment>// 自动消失</span></span><br><span class=line>    <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>transform</span> = <span class=string>&#x27;translateX(100%)&#x27;</span>;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&#x27;0&#x27;</span>;</span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            <span class=keyword>if</span> (toast.<span class=property>parentNode</span>) &#123;</span><br><span class=line>                toast.<span class=property>parentNode</span>.<span class="title function_">removeChild</span>(toast);</span><br><span class=line>            &#125;</span><br><span class=line>        &#125;, <span class=number>300</span>);</span><br><span class=line>    &#125;, duration);</span><br><span class=line></span><br><span class=line>    <span class=comment>// 点击关闭</span></span><br><span class=line>    toast.<span class="title function_">addEventListener</span>(<span class=string>&#x27;click&#x27;</span>, <span class=function>() =&gt;</span> &#123;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>transform</span> = <span class=string>&#x27;translateX(100%)&#x27;</span>;</span><br><span class=line>        toast.<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&#x27;0&#x27;</span>;</span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            <span class=keyword>if</span> (toast.<span class=property>parentNode</span>) &#123;</span><br><span class=line>                toast.<span class=property>parentNode</span>.<span class="title function_">removeChild</span>(toast);</span><br><span class=line>            &#125;</span><br><span class=line>        &#125;, <span class=number>300</span>);</span><br><span class=line>    &#125;);</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>新建<code>[BlogRoot]\source\static\js\sun-moon.js</code>，复制如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。</p><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// 保存主题状态</span></span><br><span class=line><span class=keyword>const</span> saveToLocal = &#123;</span><br><span class=line>    <span class=attr>set</span>: <span class=keyword>function</span>(<span class=params>key, value, expire</span>) &#123;</span><br><span class=line>        <span class=keyword>if</span> (expire) &#123;</span><br><span class=line>            <span class=keyword>const</span> expireDate = <span class=keyword>new</span> <span class="title class_">Date</span>();</span><br><span class=line>            expireDate.<span class="title function_">setDate</span>(expireDate.<span class="title function_">getDate</span>() + expire);</span><br><span class=line>            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class=line>                <span class=attr>value</span>: value,</span><br><span class=line>                <span class=attr>expire</span>: expireDate.<span class="title function_">getTime</span>()</span><br><span class=line>            &#125;));</span><br><span class=line>        &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, value);</span><br><span class=line>        &#125;</span><br><span class=line>    &#125;,</span><br><span class=line>    <span class=attr>get</span>: <span class=keyword>function</span>(<span class=params>key</span>) &#123;</span><br><span class=line>        <span class=keyword>const</span> item = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class=line>        <span class=keyword>if</span> (!item) <span class=keyword>return</span> <span class=literal>null</span>;</span><br><span class=line>        <span class=keyword>try</span> &#123;</span><br><span class=line>            <span class=keyword>const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(item);</span><br><span class=line>            <span class=keyword>if</span> (data.<span class=property>expire</span> &amp;&amp; <span class=keyword>new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() &gt; data.<span class=property>expire</span>) &#123;</span><br><span class=line>                <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class=line>                <span class=keyword>return</span> <span class=literal>null</span>;</span><br><span class=line>            &#125;</span><br><span class=line>            <span class=keyword>return</span> data.<span class=property>value</span>;</span><br><span class=line>        &#125; <span class=keyword>catch</span>(e) &#123;</span><br><span class=line>            <span class=keyword>return</span> item;</span><br><span class=line>        &#125;</span><br><span class=line>    &#125;</span><br><span class=line>&#125;;</span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">switchNightMode</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class=string>&#x27;body&#x27;</span>).<span class="title function_">insertAdjacentHTML</span>(<span class=string>&#x27;beforeend&#x27;</span>, <span class=string>&#x27;&lt;div class=&quot;Cuteen_DarkSky&quot;&gt;&lt;div class=&quot;Cuteen_DarkPlanet&quot;&gt;&lt;div id=&quot;sun&quot;&gt;&lt;/div&gt;&lt;div id=&quot;moon&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>),</span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class=string>&#x27;body&#x27;</span>).<span class=property>classList</span>.<span class="title function_">contains</span>(<span class=string>&#x27;DarkMode&#x27;</span>) ? (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class=string>&#x27;body&#x27;</span>).<span class=property>classList</span>.<span class="title function_">remove</span>(<span class=string>&#x27;DarkMode&#x27;</span>), <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class=string>&#x27;isDark&#x27;</span>, <span class=string>&#x27;0&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class=string>&#x27;xlink:href&#x27;</span>, <span class=string>&#x27;#icon-moon&#x27;</span>)) : (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class=string>&#x27;body&#x27;</span>).<span class=property>classList</span>.<span class="title function_">add</span>(<span class=string>&#x27;DarkMode&#x27;</span>), <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class=string>&#x27;isDark&#x27;</span>, <span class=string>&#x27;1&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class=string>&#x27;xlink:href&#x27;</span>, <span class=string>&#x27;#icon-sun&#x27;</span>)),</span><br><span class=line>                <span class=built_in>setTimeout</span>(<span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class=string>&#x27;Cuteen_DarkSky&#x27;</span>)[<span class=number>0</span>].<span class=property>style</span>.<span class=property>transition</span> = <span class=string>&#x27;opacity 3s&#x27;</span>;</span><br><span class=line>                    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class=string>&#x27;Cuteen_DarkSky&#x27;</span>)[<span class=number>0</span>].<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&#x27;0&#x27;</span>;</span><br><span class=line>                    <span class=built_in>setTimeout</span>(<span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class=string>&#x27;Cuteen_DarkSky&#x27;</span>)[<span class=number>0</span>].<span class="title function_">remove</span>();</span><br><span class=line>                    &#125;, <span class=number>1e3</span>);</span><br><span class=line>                &#125;, <span class=number>2e3</span>)</span><br><span class=line>        &#125;)</span><br><span class=line>    <span class=keyword>const</span> nowMode = <span class="variable language_">document</span>.<span class=property>documentElement</span>.<span class="title function_">getAttribute</span>(<span class=string>&#x27;data-theme&#x27;</span>) === <span class=string>&#x27;dark&#x27;</span> ? <span class=string>&#x27;dark&#x27;</span> : <span class=string>&#x27;light&#x27;</span></span><br><span class=line>    <span class=keyword>if</span> (nowMode === <span class=string>&#x27;light&#x27;</span>) &#123;</span><br><span class=line>        <span class=comment>// 先设置太阳月亮透明度</span></span><br><span class=line>        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;sun&quot;</span>).<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&quot;1&quot;</span>;</span><br><span class=line>        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;moon&quot;</span>).<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&quot;0&quot;</span>;</span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;sun&quot;</span>).<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&quot;0&quot;</span>;</span><br><span class=line>            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;moon&quot;</span>).<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&quot;1&quot;</span>;</span><br><span class=line>        &#125;, <span class=number>1000</span>);</span><br><span class=line></span><br><span class=line>        <span class="variable language_">document</span>.<span class=property>documentElement</span>.<span class="title function_">setAttribute</span>(<span class=string>&#x27;data-theme&#x27;</span>, <span class=string>&#x27;dark&#x27;</span>);</span><br><span class=line>        saveToLocal.<span class="title function_">set</span>(<span class=string>&#x27;theme&#x27;</span>, <span class=string>&#x27;dark&#x27;</span>, <span class=number>2</span>)</span><br><span class=line>        <span class=comment>// GLOBAL_CONFIG.Snackbar !== undefined &amp;&amp; btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)</span></span><br><span class=line>        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class=string>&#x27;xlink:href&#x27;</span>, <span class=string>&#x27;#icon-sun&#x27;</span>)</span><br><span class=line>        <span class=comment>// 延时弹窗提醒</span></span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            <span class="title function_">showToast</span>(<span class=string>&quot;天黑请闭眼🌙&quot;</span>);</span><br><span class=line>        &#125;, <span class=number>2500</span>);</span><br><span class=line>    &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>        <span class=comment>// 先设置太阳月亮透明度</span></span><br><span class=line>        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;sun&quot;</span>).<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&quot;0&quot;</span>;</span><br><span class=line>        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;moon&quot;</span>).<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&quot;1&quot;</span>;</span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;sun&quot;</span>).<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&quot;1&quot;</span>;</span><br><span class=line>            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;moon&quot;</span>).<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&quot;0&quot;</span>;</span><br><span class=line>        &#125;, <span class=number>1000</span>);</span><br><span class=line>        </span><br><span class=line>        <span class="variable language_">document</span>.<span class=property>documentElement</span>.<span class="title function_">setAttribute</span>(<span class=string>&#x27;data-theme&#x27;</span>, <span class=string>&#x27;light&#x27;</span>);</span><br><span class=line>        saveToLocal.<span class="title function_">set</span>(<span class=string>&#x27;theme&#x27;</span>, <span class=string>&#x27;light&#x27;</span>, <span class=number>2</span>)</span><br><span class=line>        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class=string>&#x27;body&#x27;</span>).<span class=property>classList</span>.<span class="title function_">add</span>(<span class=string>&#x27;DarkMode&#x27;</span>), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class=string>&#x27;xlink:href&#x27;</span>, <span class=string>&#x27;#icon-moon&#x27;</span>)</span><br><span class=line>        <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            <span class="title function_">showToast</span>(<span class=string>&quot;天亮请睁眼🌞&quot;</span>);</span><br><span class=line>        &#125;, <span class=number>2500</span>)</span><br><span class=line>    &#125;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改<code>[ThemeRoot]\layout\includes\head.pug</code></p><figure class="highlight diff"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line><span class=meta>@@ -75,3 +75,6 @@</span></span><br><span class=line> include ./head/config_site.pug</span><br><span class=line></span><br><span class=line> !=fragment_cache(&#x27;injectHead&#x27;, function()&#123;return injectHtml(theme.inject.head)&#125;)</span><br><span class=line><span class=addition>+</span></span><br><span class=line><span class=addition>+// 日夜间模式切换动画</span></span><br><span class=line><span class=addition>+include sun_moon.pug</span></span><br></pre></td></tr></table></figure></li><li><p>修改<code>[ThemeRoot]\layout\includes\rightside.pug</code>,把原本的昼夜切换按钮替换掉</p><figure class="highlight diff"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=meta>@@ -13,4 +13,5 @@</span></span><br><span class=line>  when &#x27;darkmode&#x27;</span><br><span class=line>    if darkmode.enable &amp;&amp; darkmode.button</span><br><span class=line><span class=deletion>-     button#darkmode(type=&quot;button&quot; title=_p(&#x27;rightside.night_mode_title&#x27;))</span></span><br><span class=line><span class=deletion>-       i.fas.fa-adjust</span></span><br><span class=line><span class=addition>+     a.icon-V.hidden(onclick=&#x27;switchNightMode()&#x27;,  title=_p(&#x27;rightside.night_mode_title&#x27;))</span></span><br><span class=line><span class=addition>+       svg(width=&#x27;25&#x27;, height=&#x27;25&#x27;, viewBox=&#x27;0 0 1024 1024&#x27;)</span></span><br><span class=line><span class=addition>+         use#modeicon(xlink:href=&#x27;#icon-moon&#x27;)</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=右键菜单><a href=#右键菜单 class=headerlink title=右键菜单></a>右键菜单</h2><p>参考：<a target=_blank rel=noopener href=https://www.fomal.cc/posts/d739261b.html>博客魔改教程总结(四) | Fomalhaut🥝</a><br><strong>前置条件</strong>：diy通知样式、昼夜切换动画<br>右键菜单中没有的功能，可以将其注释<br></p><details class=folding-tag gray><summary>详细步骤</summary><div class=content><ol><li><p>新建 <code>[ThemeRoot]\layout\includes\rightmenu.pug</code>，添加如下代码：<br>其中<code>关于博客</code>的<code>href</code>修改成你想跳转的页面</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br></pre></td><td class=code><pre><span class=line>#rightMenu.js-pjax</span><br><span class=line> .rightMenu-group.rightMenu-small</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:window.history.back();&quot;)</span><br><span class=line>         i.fa.fa-arrow-left</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:window.history.forward();&quot;)</span><br><span class=line>         i.fa.fa-arrow-right</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:window.location.reload();&quot;)</span><br><span class=line>         i.fa.fa-refresh</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.scrollToTop();&quot;)</span><br><span class=line>         i.fa.fa-arrow-up</span><br><span class=line> .rightMenu-group.rightMenu-line.hide#menu-text</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.copySelect();&quot;)</span><br><span class=line>         i.fa.fa-copy</span><br><span class=line>         span=&#x27;复制文本&#x27;</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:window.open(\&quot;https://www.google.com/search?q=\&quot;+window.getSelection().toString());window.location.reload();&quot;)</span><br><span class=line>         i.fa.fa-search</span><br><span class=line>         span=&#x27;谷歌搜索&#x27;</span><br><span class=line> .rightMenu-group.rightMenu-line.hide#menu-too</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:window.open(window.getSelection().toString());window.location.reload();&quot;)</span><br><span class=line>         i.fa.fa-link</span><br><span class=line>         span=&#x27;转到链接&#x27;</span><br><span class=line> .rightMenu-group.rightMenu-line.hide#menu-paste</span><br><span class=line>     a.rightMenu-item(href=&#x27;javascript:rmf.paste()&#x27;)</span><br><span class=line>         i.fa.fa-copy</span><br><span class=line>         span=&#x27;粘贴文本&#x27;</span><br><span class=line> .rightMenu-group.rightMenu-line.hide#menu-post</span><br><span class=line>     a.rightMenu-item(href=&quot;#post-comment&quot;)</span><br><span class=line>         i.fas.fa-comment</span><br><span class=line>         span=&#x27;空降评论&#x27;</span><br><span class=line>     a.rightMenu-item.menu-link(href=&#x27;/categories/&#x27;)</span><br><span class=line>         i.fas.fa-folder-open</span><br><span class=line>         span=&#x27;文章分类&#x27;</span><br><span class=line>     a.rightMenu-item.menu-link(href=&#x27;/tags/&#x27;)</span><br><span class=line>         i.fas.fa-tags</span><br><span class=line>         span=&#x27;文章标签&#x27;</span><br><span class=line> .rightMenu-group.rightMenu-line.hide#menu-to</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.openWithNewTab()&quot;)</span><br><span class=line>         i.fa.fa-window-restore</span><br><span class=line>         span=&#x27;新窗口打开&#x27;</span><br><span class=line>     a.rightMenu-item#menu-too(href=&quot;javascript:rmf.open()&quot;)</span><br><span class=line>         i.fa.fa-link</span><br><span class=line>         span=&#x27;转到链接&#x27;</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.copyLink()&quot;)</span><br><span class=line>         i.fa.fa-copy</span><br><span class=line>         span=&#x27;复制链接&#x27;</span><br><span class=line> .rightMenu-group.rightMenu-line.hide#menu-img</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.saveAs()&quot;)</span><br><span class=line>         i.fa.fa-download</span><br><span class=line>         span=&#x27;保存图片&#x27;</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.openWithNewTab()&quot;)</span><br><span class=line>         i.fa.fa-window-restore</span><br><span class=line>         span=&#x27;在新窗口打开&#x27;</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.copyLink()&quot;)</span><br><span class=line>         i.fa.fa-copy</span><br><span class=line>         span=&#x27;复制图片链接&#x27;</span><br><span class=line> .rightMenu-group.rightMenu-line</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.copyWordsLink()&quot;)</span><br><span class=line>         i.fa.fa-link</span><br><span class=line>         span=&#x27;复制地址&#x27;</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:switchNightMode();&quot;)</span><br><span class=line>         i.fa.fa-circle-half-stroke</span><br><span class=line>         span=&#x27;昼夜切换&#x27;</span><br><span class=line>     a.rightMenu-item(href=&quot;javascript:rmf.fullScreen();&quot;)</span><br><span class=line>         i.fas.fa-expand</span><br><span class=line>         span=&#x27;全屏切换&#x27;</span><br><span class=line>     a.rightMenu-item(href=&quot;/myself/&quot;)</span><br><span class=line>         i.fa.fa-info-circle</span><br><span class=line>         span=&#x27;关于我&#x27;</span><br></pre></td></tr></table></figure></li><li><p>修改<code>[ThemeRoot]/layout/includes/layout.pug</code>：</p><figure class="highlight diff"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=meta>@@ -36,2 +36,3 @@</span></span><br><span class=line>     include ./rightside.pug</span><br><span class=line><span class=addition>+    !=partial(&#x27;includes/rightmenu&#x27;,&#123;&#125;, &#123;cache:true&#125;)</span></span><br><span class=line>     include ./additional-js.pug</span><br></pre></td></tr></table></figure></li><li><p>在<code>[BlogRoot]/source/static/css/custom.css</code>中添加如下代码，并在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入。</p><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/* 右键菜单 */</span></span><br><span class=line><span class=selector-id>#rightMenu</span> &#123;</span><br><span class=line>  <span class=attribute>display</span>: none;</span><br><span class=line>  <span class=attribute>position</span>: fixed;</span><br><span class=line>  <span class=attribute>width</span>: <span class=number>160px</span>;</span><br><span class=line>  <span class=attribute>height</span>: fit-content;</span><br><span class=line>  <span class=attribute>top</span>: <span class=number>10%</span>;</span><br><span class=line>  <span class=attribute>left</span>: <span class=number>10%</span>;</span><br><span class=line>    <span class=comment>/* 菜单面板背景色 */</span></span><br><span class=line>  <span class=attribute>background-color</span>: <span class=built_in>var</span>(--card-bg);</span><br><span class=line>    <span class=comment>/* 菜单面板文字颜色 */</span></span><br><span class=line>  <span class=attribute>border</span>: <span class=number>1px</span> solid <span class=built_in>var</span>(--font-color);</span><br><span class=line>  <span class=attribute>border-radius</span>: <span class=number>8px</span>;</span><br><span class=line>  <span class=attribute>z-index</span>: <span class=number>100</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span> &#123;</span><br><span class=line>  <span class=attribute>padding</span>: <span class=number>7px</span> <span class=number>6px</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span><span class=selector-pseudo>:not</span>(<span class=selector-pseudo>:nth-last-child</span>(<span class=number>1</span>)) &#123;</span><br><span class=line>  <span class=attribute>border-bottom</span>: <span class=number>1px</span> solid <span class=built_in>var</span>(--font-color);</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span><span class=selector-class>.rightMenu-small</span> &#123;</span><br><span class=line>  <span class=attribute>display</span>: flex;</span><br><span class=line>  <span class=attribute>justify-content</span>: space-between;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span> <span class=selector-class>.rightMenu-item</span> &#123;</span><br><span class=line>  <span class=attribute>height</span>: <span class=number>30px</span>;</span><br><span class=line>  <span class=attribute>line-height</span>: <span class=number>30px</span>;</span><br><span class=line>  <span class=attribute>border-radius</span>: <span class=number>8px</span>;</span><br><span class=line>  <span class=attribute>transition</span>: <span class=number>0.3s</span>;</span><br><span class=line>  <span class=attribute>color</span>: <span class=built_in>var</span>(--font-color);</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span><span class=selector-class>.rightMenu-line</span> <span class=selector-class>.rightMenu-item</span> &#123;</span><br><span class=line>  <span class=attribute>display</span>: flex;</span><br><span class=line>  <span class=attribute>height</span>: <span class=number>40px</span>;</span><br><span class=line>  <span class=attribute>line-height</span>: <span class=number>40px</span>;</span><br><span class=line>  <span class=attribute>padding</span>: <span class=number>0</span> <span class=number>4px</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span> <span class=selector-class>.rightMenu-item</span><span class=selector-pseudo>:hover</span> &#123;</span><br><span class=line>    <span class=comment>/* 鼠标悬浮选项颜色 */</span></span><br><span class=line>  <span class=attribute>background-color</span>: <span class=built_in>var</span>(--text-bg-hover);</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span> <span class=selector-class>.rightMenu-item</span> <span class=selector-tag>i</span> &#123;</span><br><span class=line>  <span class=attribute>display</span>: inline-block;</span><br><span class=line>  <span class=attribute>text-align</span>: center;</span><br><span class=line>  <span class=attribute>line-height</span>: <span class=number>30px</span>;</span><br><span class=line>  <span class=attribute>width</span>: <span class=number>30px</span>;</span><br><span class=line>  <span class=attribute>height</span>: <span class=number>30px</span>;</span><br><span class=line>  <span class=attribute>padding</span>: <span class=number>0</span> <span class=number>5px</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span> <span class=selector-class>.rightMenu-item</span> <span class=selector-tag>span</span> &#123;</span><br><span class=line>  <span class=attribute>line-height</span>: <span class=number>30px</span>;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=selector-id>#rightMenu</span> <span class=selector-class>.rightMenu-group</span><span class=selector-class>.rightMenu-line</span> <span class=selector-class>.rightMenu-item</span> * &#123;</span><br><span class=line>  <span class=attribute>height</span>: <span class=number>40px</span>;</span><br><span class=line>  <span class=attribute>line-height</span>: <span class=number>40px</span>;</span><br><span class=line>&#125;</span><br><span class=line><span class=selector-class>.rightMenu-group</span><span class=selector-class>.hide</span> &#123;</span><br><span class=line>  <span class=attribute>display</span>: none;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure></li><li><p>新建<code>[BlogRoot]/source/static/js/right-menu.js</code>，添加如下代码：</p><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br><span class=line>106</span><br><span class=line>107</span><br><span class=line>108</span><br><span class=line>109</span><br><span class=line>110</span><br><span class=line>111</span><br><span class=line>112</span><br><span class=line>113</span><br><span class=line>114</span><br><span class=line>115</span><br><span class=line>116</span><br><span class=line>117</span><br><span class=line>118</span><br><span class=line>119</span><br><span class=line>120</span><br><span class=line>121</span><br><span class=line>122</span><br><span class=line>123</span><br><span class=line>124</span><br><span class=line>125</span><br><span class=line>126</span><br><span class=line>127</span><br><span class=line>128</span><br><span class=line>129</span><br><span class=line>130</span><br><span class=line>131</span><br><span class=line>132</span><br><span class=line>133</span><br><span class=line>134</span><br><span class=line>135</span><br><span class=line>136</span><br><span class=line>137</span><br><span class=line>138</span><br><span class=line>139</span><br><span class=line>140</span><br><span class=line>141</span><br><span class=line>142</span><br><span class=line>143</span><br><span class=line>144</span><br><span class=line>145</span><br><span class=line>146</span><br><span class=line>147</span><br><span class=line>148</span><br><span class=line>149</span><br><span class=line>150</span><br><span class=line>151</span><br><span class=line>152</span><br><span class=line>153</span><br><span class=line>154</span><br><span class=line>155</span><br><span class=line>156</span><br><span class=line>157</span><br><span class=line>158</span><br><span class=line>159</span><br><span class=line>160</span><br><span class=line>161</span><br><span class=line>162</span><br><span class=line>163</span><br><span class=line>164</span><br><span class=line>165</span><br><span class=line>166</span><br><span class=line>167</span><br><span class=line>168</span><br><span class=line>169</span><br><span class=line>170</span><br><span class=line>171</span><br><span class=line>172</span><br><span class=line>173</span><br><span class=line>174</span><br><span class=line>175</span><br><span class=line>176</span><br><span class=line>177</span><br><span class=line>178</span><br><span class=line>179</span><br><span class=line>180</span><br><span class=line>181</span><br><span class=line>182</span><br><span class=line>183</span><br><span class=line>184</span><br><span class=line>185</span><br><span class=line>186</span><br><span class=line>187</span><br><span class=line>188</span><br><span class=line>189</span><br><span class=line>190</span><br><span class=line>191</span><br><span class=line>192</span><br><span class=line>193</span><br><span class=line>194</span><br><span class=line>195</span><br><span class=line>196</span><br><span class=line>197</span><br><span class=line>198</span><br><span class=line>199</span><br><span class=line>200</span><br><span class=line>201</span><br><span class=line>202</span><br><span class=line>203</span><br><span class=line>204</span><br><span class=line>205</span><br><span class=line>206</span><br><span class=line>207</span><br><span class=line>208</span><br><span class=line>209</span><br><span class=line>210</span><br><span class=line>211</span><br><span class=line>212</span><br><span class=line>213</span><br><span class=line>214</span><br><span class=line>215</span><br><span class=line>216</span><br><span class=line>217</span><br><span class=line>218</span><br><span class=line>219</span><br><span class=line>220</span><br><span class=line>221</span><br><span class=line>222</span><br><span class=line>223</span><br><span class=line>224</span><br><span class=line>225</span><br><span class=line>226</span><br><span class=line>227</span><br><span class=line>228</span><br><span class=line>229</span><br><span class=line>230</span><br><span class=line>231</span><br><span class=line>232</span><br><span class=line>233</span><br><span class=line>234</span><br><span class=line>235</span><br><span class=line>236</span><br><span class=line>237</span><br><span class=line>238</span><br><span class=line>239</span><br><span class=line>240</span><br><span class=line>241</span><br><span class=line>242</span><br><span class=line>243</span><br><span class=line>244</span><br><span class=line>245</span><br><span class=line>246</span><br><span class=line>247</span><br><span class=line>248</span><br><span class=line>249</span><br><span class=line>250</span><br><span class=line>251</span><br><span class=line>252</span><br><span class=line>253</span><br><span class=line>254</span><br><span class=line>255</span><br><span class=line>256</span><br><span class=line>257</span><br><span class=line>258</span><br><span class=line>259</span><br><span class=line>260</span><br><span class=line>261</span><br><span class=line>262</span><br><span class=line>263</span><br><span class=line>264</span><br><span class=line>265</span><br><span class=line>266</span><br><span class=line>267</span><br><span class=line>268</span><br><span class=line>269</span><br><span class=line>270</span><br><span class=line>271</span><br><span class=line>272</span><br><span class=line>273</span><br><span class=line>274</span><br><span class=line>275</span><br><span class=line>276</span><br><span class=line>277</span><br><span class=line>278</span><br><span class=line>279</span><br><span class=line>280</span><br><span class=line>281</span><br><span class=line>282</span><br><span class=line>283</span><br><span class=line>284</span><br><span class=line>285</span><br><span class=line>286</span><br><span class=line>287</span><br><span class=line>288</span><br><span class=line>289</span><br><span class=line>290</span><br><span class=line>291</span><br><span class=line>292</span><br><span class=line>293</span><br><span class=line>294</span><br><span class=line>295</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// 切换右键模式</span></span><br><span class=line><span class=keyword>function</span> <span class="title function_">changeMouseMode</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class=keyword>if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class=string>&quot;mouse&quot;</span>) == <span class=string>&quot;on&quot;</span>) &#123;</span><br><span class=line>        mouseMode = <span class=string>&quot;off&quot;</span>;</span><br><span class=line>        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class=string>&quot;mouse&quot;</span>, <span class=string>&quot;off&quot;</span>);</span><br><span class=line>        <span class="title function_">showToast</span>(<span class=string>&quot;鼠标右键已恢复系统样式！&quot;</span>);</span><br><span class=line>    &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>        mouseMode = <span class=string>&quot;on&quot;</span>;</span><br><span class=line>        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class=string>&quot;mouse&quot;</span>, <span class=string>&quot;on&quot;</span>);</span><br><span class=line>        <span class="title function_">showToast</span>(<span class=string>&quot;鼠标右键已更换为特殊样式！&quot;</span>);</span><br><span class=line>    &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">setMask</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class=comment>//设置遮罩</span></span><br><span class=line>    <span class=keyword>if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class=string>&quot;rmMask&quot;</span>)[<span class=number>0</span>] != <span class=literal>undefined</span>)</span><br><span class=line>        <span class=keyword>return</span> <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class=string>&quot;rmMask&quot;</span>)[<span class=number>0</span>];</span><br><span class=line>    mask = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&#x27;div&#x27;</span>);</span><br><span class=line>    mask.<span class=property>className</span> = <span class=string>&quot;rmMask&quot;</span>;</span><br><span class=line>    mask.<span class=property>style</span>.<span class=property>width</span> = <span class="variable language_">window</span>.<span class=property>innerWidth</span> + <span class=string>&#x27;px&#x27;</span>;</span><br><span class=line>    mask.<span class=property>style</span>.<span class=property>height</span> = <span class="variable language_">window</span>.<span class=property>innerHeight</span> + <span class=string>&#x27;px&#x27;</span>;</span><br><span class=line>    mask.<span class=property>style</span>.<span class=property>background</span> = <span class=string>&#x27;#fff&#x27;</span>;</span><br><span class=line>    mask.<span class=property>style</span>.<span class=property>opacity</span> = <span class=string>&#x27;.0&#x27;</span>;</span><br><span class=line>    mask.<span class=property>style</span>.<span class=property>position</span> = <span class=string>&#x27;fixed&#x27;</span>;</span><br><span class=line>    mask.<span class=property>style</span>.<span class=property>top</span> = <span class=string>&#x27;0&#x27;</span>;</span><br><span class=line>    mask.<span class=property>style</span>.<span class=property>left</span> = <span class=string>&#x27;0&#x27;</span>;</span><br><span class=line>    mask.<span class=property>style</span>.<span class=property>zIndex</span> = <span class=number>998</span>;</span><br><span class=line>    <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">appendChild</span>(mask);</span><br><span class=line>    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&quot;rightMenu&quot;</span>).<span class=property>style</span>.<span class=property>zIndex</span> = <span class=number>19198</span>;</span><br><span class=line>    <span class=keyword>return</span> mask;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">insertAtCursor</span>(<span class=params>myField, myValue</span>) &#123;</span><br><span class=line></span><br><span class=line>    <span class=comment>//IE 浏览器</span></span><br><span class=line>    <span class=keyword>if</span> (<span class="variable language_">document</span>.<span class=property>selection</span>) &#123;</span><br><span class=line>        myField.<span class="title function_">focus</span>();</span><br><span class=line>        sel = <span class="variable language_">document</span>.<span class=property>selection</span>.<span class="title function_">createRange</span>();</span><br><span class=line>        sel.<span class=property>text</span> = myValue;</span><br><span class=line>        sel.<span class="title function_">select</span>();</span><br><span class=line>    &#125;</span><br><span class=line></span><br><span class=line>    <span class=comment>//FireFox、Chrome等</span></span><br><span class=line>    <span class=keyword>else</span> <span class=keyword>if</span> (myField.<span class=property>selectionStart</span> || myField.<span class=property>selectionStart</span> == <span class=string>&#x27;0&#x27;</span>) &#123;</span><br><span class=line>        <span class=keyword>var</span> startPos = myField.<span class=property>selectionStart</span>;</span><br><span class=line>        <span class=keyword>var</span> endPos = myField.<span class=property>selectionEnd</span>;</span><br><span class=line></span><br><span class=line>        <span class=comment>// 保存滚动条</span></span><br><span class=line>        <span class=keyword>var</span> restoreTop = myField.<span class=property>scrollTop</span>;</span><br><span class=line>        myField.<span class=property>value</span> = myField.<span class=property>value</span>.<span class="title function_">substring</span>(<span class=number>0</span>, startPos) + myValue + myField.<span class=property>value</span>.<span class="title function_">substring</span>(endPos, myField.<span class=property>value</span>.<span class=property>length</span>);</span><br><span class=line></span><br><span class=line>        <span class=keyword>if</span> (restoreTop &gt; <span class=number>0</span>) &#123;</span><br><span class=line>            myField.<span class=property>scrollTop</span> = restoreTop;</span><br><span class=line>        &#125;</span><br><span class=line></span><br><span class=line>        myField.<span class="title function_">focus</span>();</span><br><span class=line>        myField.<span class=property>selectionStart</span> = startPos + myValue.<span class=property>length</span>;</span><br><span class=line>        myField.<span class=property>selectionEnd</span> = startPos + myValue.<span class=property>length</span>;</span><br><span class=line>    &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>        myField.<span class=property>value</span> += myValue;</span><br><span class=line>        myField.<span class="title function_">focus</span>();</span><br><span class=line>    &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=keyword>let</span> rmf = &#123;&#125;;</span><br><span class=line>rmf.<span class=property>showRightMenu</span> = <span class=keyword>function</span> (<span class=params>isTrue, x = <span class=number>0</span>, y = <span class=number>0</span></span>) &#123;</span><br><span class=line>    <span class=keyword>let</span> $rightMenu = $(<span class=string>&#x27;#rightMenu&#x27;</span>);</span><br><span class=line>    $rightMenu.<span class="title function_">css</span>(<span class=string>&#x27;top&#x27;</span>, x + <span class=string>&#x27;px&#x27;</span>).<span class="title function_">css</span>(<span class=string>&#x27;left&#x27;</span>, y + <span class=string>&#x27;px&#x27;</span>);</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (isTrue) &#123;</span><br><span class=line>        $rightMenu.<span class="title function_">show</span>();</span><br><span class=line>    &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>        $rightMenu.<span class="title function_">hide</span>();</span><br><span class=line>    &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>rmf.<span class=property>copyWordsLink</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>    <span class=keyword>let</span> url = <span class="variable language_">window</span>.<span class=property>location</span>.<span class=property>href</span></span><br><span class=line>    <span class=keyword>let</span> txa = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&quot;textarea&quot;</span>);</span><br><span class=line>    txa.<span class=property>value</span> = url;</span><br><span class=line>    <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">appendChild</span>(txa)</span><br><span class=line>    txa.<span class="title function_">select</span>();</span><br><span class=line>    <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class=string>&quot;Copy&quot;</span>);</span><br><span class=line>    <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">removeChild</span>(txa);</span><br><span class=line>&#125;</span><br><span class=line>rmf.<span class=property>switchReadMode</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>    <span class=keyword>const</span> $body = <span class="variable language_">document</span>.<span class=property>body</span></span><br><span class=line>    $body.<span class=property>classList</span>.<span class="title function_">add</span>(<span class=string>&#x27;read-mode&#x27;</span>)</span><br><span class=line>    <span class=keyword>const</span> newEle = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&#x27;button&#x27;</span>)</span><br><span class=line>    newEle.<span class=property>type</span> = <span class=string>&#x27;button&#x27;</span></span><br><span class=line>    newEle.<span class=property>className</span> = <span class=string>&#x27;fas fa-sign-out-alt exit-readmode&#x27;</span></span><br><span class=line>    $body.<span class="title function_">appendChild</span>(newEle)</span><br><span class=line></span><br><span class=line>    <span class=keyword>function</span> <span class="title function_">clickFn</span>(<span class=params></span>) &#123;</span><br><span class=line>        $body.<span class=property>classList</span>.<span class="title function_">remove</span>(<span class=string>&#x27;read-mode&#x27;</span>)</span><br><span class=line>        newEle.<span class="title function_">remove</span>()</span><br><span class=line>        newEle.<span class="title function_">removeEventListener</span>(<span class=string>&#x27;click&#x27;</span>, clickFn)</span><br><span class=line>    &#125;</span><br><span class=line></span><br><span class=line>    newEle.<span class="title function_">addEventListener</span>(<span class=string>&#x27;click&#x27;</span>, clickFn)</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>//复制选中文字</span></span><br><span class=line>rmf.<span class=property>copySelect</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>    <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class=string>&#x27;Copy&#x27;</span>, <span class=literal>false</span>, <span class=literal>null</span>);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>//回到顶部</span></span><br><span class=line>rmf.<span class=property>scrollToTop</span> = <span class=keyword>function</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class=comment>// 核心滚动功能</span></span><br><span class=line>    <span class=keyword>if</span> (<span class=keyword>typeof</span> btf !== <span class=string>&#x27;undefined&#x27;</span> &amp;&amp; btf.<span class=property>scrollToDest</span>) &#123;</span><br><span class=line>        btf.<span class="title function_">scrollToDest</span>(<span class=number>0</span>, <span class=number>500</span>);</span><br><span class=line>    &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>        <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(&#123;</span><br><span class=line>            <span class=attr>top</span>: <span class=number>0</span>,</span><br><span class=line>            <span class=attr>behavior</span>: <span class=string>&#x27;smooth&#x27;</span></span><br><span class=line>        &#125;);</span><br><span class=line>    &#125;</span><br><span class=line>&#125;;</span><br><span class=line></span><br><span class=line><span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">addEventListener</span>(<span class=string>&#x27;touchmove&#x27;</span>, <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line></span><br><span class=line>&#125;, &#123; <span class=attr>passive</span>: <span class=literal>false</span> &#125;);</span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">popupMenu</span>(<span class=params></span>) &#123;</span><br><span class=line>    <span class="variable language_">window</span>.<span class=property>oncontextmenu</span> = <span class=keyword>function</span> (<span class=params>event</span>) &#123;</span><br><span class=line>        <span class=comment>// if (event.ctrlKey) return true;</span></span><br><span class=line></span><br><span class=line>        <span class=comment>// 当关掉自定义右键时候直接返回</span></span><br><span class=line>        <span class=keyword>if</span> (mouseMode == <span class=string>&quot;off&quot;</span>) <span class=keyword>return</span> <span class=literal>true</span>;</span><br><span class=line></span><br><span class=line>        $(<span class=string>&#x27;.rightMenu-group.hide&#x27;</span>).<span class="title function_">hide</span>();</span><br><span class=line>        <span class=keyword>if</span> (<span class="variable language_">document</span>.<span class="title function_">getSelection</span>().<span class="title function_">toString</span>()) &#123;</span><br><span class=line>            $(<span class=string>&#x27;#menu-text&#x27;</span>).<span class="title function_">show</span>();</span><br><span class=line>        &#125;</span><br><span class=line>        <span class=keyword>if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&#x27;post&#x27;</span>)) &#123;</span><br><span class=line>            $(<span class=string>&#x27;#menu-post&#x27;</span>).<span class="title function_">show</span>();</span><br><span class=line>        &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>            <span class=keyword>if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class=string>&#x27;page&#x27;</span>)) &#123;</span><br><span class=line>                $(<span class=string>&#x27;#menu-post&#x27;</span>).<span class="title function_">show</span>();</span><br><span class=line>            &#125;</span><br><span class=line>        &#125;</span><br><span class=line>        <span class=keyword>var</span> el = <span class="variable language_">window</span>.<span class=property>document</span>.<span class=property>body</span>;</span><br><span class=line>        el = event.<span class=property>target</span>;</span><br><span class=line>        <span class=keyword>var</span> a = <span class=regexp>/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&amp;&#x27;\*\+,;=.]+$/</span></span><br><span class=line>        <span class=keyword>if</span> (a.<span class="title function_">test</span>(<span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">toString</span>()) &amp;&amp; el.<span class=property>tagName</span> != <span class=string>&quot;A&quot;</span>) &#123;</span><br><span class=line>            $(<span class=string>&#x27;#menu-too&#x27;</span>).<span class="title function_">show</span>()</span><br><span class=line>        &#125;</span><br><span class=line>        <span class=keyword>if</span> (el.<span class=property>tagName</span> == <span class=string>&#x27;A&#x27;</span>) &#123;</span><br><span class=line>            $(<span class=string>&#x27;#menu-to&#x27;</span>).<span class="title function_">show</span>()</span><br><span class=line>            rmf.<span class=property>open</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                <span class=keyword>if</span> (el.<span class=property>href</span>.<span class="title function_">indexOf</span>(<span class=string>&quot;http://&quot;</span>) == -<span class=number>1</span> &amp;&amp; el.<span class=property>href</span>.<span class="title function_">indexOf</span>(<span class=string>&quot;https://&quot;</span>) == -<span class=number>1</span> || el.<span class=property>href</span>.<span class="title function_">indexOf</span>(<span class=string>&quot;yisous.xyz&quot;</span>) != -<span class=number>1</span>) &#123;</span><br><span class=line>                    pjax.<span class="title function_">loadUrl</span>(el.<span class=property>href</span>)</span><br><span class=line>                &#125;</span><br><span class=line>                <span class=keyword>else</span> &#123;</span><br><span class=line>                    location.<span class=property>href</span> = el.<span class=property>href</span></span><br><span class=line>                &#125;</span><br><span class=line>            &#125;</span><br><span class=line>            rmf.<span class=property>openWithNewTab</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                <span class="variable language_">window</span>.<span class="title function_">open</span>(el.<span class=property>href</span>);</span><br><span class=line>                <span class=comment>// window.location.reload();</span></span><br><span class=line>            &#125;</span><br><span class=line>            rmf.<span class=property>copyLink</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                <span class=keyword>let</span> url = el.<span class=property>href</span></span><br><span class=line>                <span class=keyword>let</span> txa = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&quot;textarea&quot;</span>);</span><br><span class=line>                txa.<span class=property>value</span> = url;</span><br><span class=line>                <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">appendChild</span>(txa)</span><br><span class=line>                txa.<span class="title function_">select</span>();</span><br><span class=line>                <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class=string>&quot;Copy&quot;</span>);</span><br><span class=line>                <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">removeChild</span>(txa);</span><br><span class=line>            &#125;</span><br><span class=line>        &#125; <span class=keyword>else</span> <span class=keyword>if</span> (el.<span class=property>tagName</span> == <span class=string>&#x27;IMG&#x27;</span>) &#123;</span><br><span class=line>            $(<span class=string>&#x27;#menu-img&#x27;</span>).<span class="title function_">show</span>()</span><br><span class=line>            rmf.<span class=property>openWithNewTab</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                <span class="variable language_">window</span>.<span class="title function_">open</span>(el.<span class=property>src</span>);</span><br><span class=line>                <span class=comment>// window.location.reload();</span></span><br><span class=line>            &#125;</span><br><span class=line>            rmf.<span class=property>click</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                el.<span class="title function_">click</span>()</span><br><span class=line>            &#125;</span><br><span class=line>            rmf.<span class=property>copyLink</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                <span class=keyword>let</span> url = el.<span class=property>src</span></span><br><span class=line>                <span class=keyword>let</span> txa = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&quot;textarea&quot;</span>);</span><br><span class=line>                txa.<span class=property>value</span> = url;</span><br><span class=line>                <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">appendChild</span>(txa)</span><br><span class=line>                txa.<span class="title function_">select</span>();</span><br><span class=line>                <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class=string>&quot;Copy&quot;</span>);</span><br><span class=line>                <span class="variable language_">document</span>.<span class=property>body</span>.<span class="title function_">removeChild</span>(txa);</span><br><span class=line>            &#125;</span><br><span class=line>            rmf.<span class=property>saveAs</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                <span class=keyword>var</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class=string>&#x27;a&#x27;</span>);</span><br><span class=line>                <span class=keyword>var</span> url = el.<span class=property>src</span>;</span><br><span class=line>                <span class=keyword>var</span> filename = url.<span class="title function_">split</span>(<span class=string>&quot;/&quot;</span>)[-<span class=number>1</span>];</span><br><span class=line>                a.<span class=property>href</span> = url;</span><br><span class=line>                a.<span class=property>download</span> = filename;</span><br><span class=line>                a.<span class="title function_">click</span>();</span><br><span class=line>                <span class="variable language_">window</span>.<span class=property>URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span><br><span class=line>            &#125;</span><br><span class=line>        &#125; <span class=keyword>else</span> <span class=keyword>if</span> (el.<span class=property>tagName</span> == <span class=string>&quot;TEXTAREA&quot;</span> || el.<span class=property>tagName</span> == <span class=string>&quot;INPUT&quot;</span>) &#123;</span><br><span class=line>            $(<span class=string>&#x27;#menu-paste&#x27;</span>).<span class="title function_">show</span>();</span><br><span class=line>            rmf.<span class=property>paste</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>                navigator.<span class=property>permissions</span></span><br><span class=line>                    .<span class="title function_">query</span>(&#123;</span><br><span class=line>                        <span class=attr>name</span>: <span class=string>&#x27;clipboard-read&#x27;</span></span><br><span class=line>                    &#125;)</span><br><span class=line>                    .<span class="title function_">then</span>(<span class=function><span class=params>result</span> =&gt;</span> &#123;</span><br><span class=line>                        <span class=keyword>if</span> (result.<span class=property>state</span> == <span class=string>&#x27;granted&#x27;</span> || result.<span class=property>state</span> == <span class=string>&#x27;prompt&#x27;</span>) &#123;</span><br><span class=line>                            <span class=comment>//读取剪贴板</span></span><br><span class=line>                            navigator.<span class=property>clipboard</span>.<span class="title function_">readText</span>().<span class="title function_">then</span>(<span class=function><span class=params>text</span> =&gt;</span> &#123;</span><br><span class=line>                                <span class="variable language_">console</span>.<span class="title function_">log</span>(text)</span><br><span class=line>                                <span class="title function_">insertAtCursor</span>(el, text)</span><br><span class=line>                            &#125;)</span><br><span class=line>                        &#125; <span class=keyword>else</span> &#123;</span><br><span class=line>                            <span class="title class_">Snackbar</span>.<span class="title function_">show</span>(&#123;</span><br><span class=line>                                <span class=attr>text</span>: <span class=string>&#x27;请允许读取剪贴板！&#x27;</span>,</span><br><span class=line>                                <span class=attr>pos</span>: <span class=string>&#x27;top-center&#x27;</span>,</span><br><span class=line>                                <span class=attr>showAction</span>: <span class=literal>false</span>,</span><br><span class=line>                            &#125;)</span><br><span class=line>                        &#125;</span><br><span class=line>                    &#125;)</span><br><span class=line>            &#125;</span><br><span class=line>        &#125;</span><br><span class=line>        <span class=keyword>let</span> pageX = event.<span class=property>clientX</span> + <span class=number>10</span>;</span><br><span class=line>        <span class=keyword>let</span> pageY = event.<span class=property>clientY</span>;</span><br><span class=line>        <span class=keyword>let</span> rmWidth = $(<span class=string>&#x27;#rightMenu&#x27;</span>).<span class="title function_">width</span>();</span><br><span class=line>        <span class=keyword>let</span> rmHeight = $(<span class=string>&#x27;#rightMenu&#x27;</span>).<span class="title function_">height</span>();</span><br><span class=line>        <span class=keyword>if</span> (pageX + rmWidth &gt; <span class="variable language_">window</span>.<span class=property>innerWidth</span>) &#123;</span><br><span class=line>            pageX -= rmWidth + <span class=number>10</span>;</span><br><span class=line>        &#125;</span><br><span class=line>        <span class=keyword>if</span> (pageY + rmHeight &gt; <span class="variable language_">window</span>.<span class=property>innerHeight</span>) &#123;</span><br><span class=line>            pageY -= pageY + rmHeight - <span class="variable language_">window</span>.<span class=property>innerHeight</span>;</span><br><span class=line>        &#125;</span><br><span class=line>        mask = <span class="title function_">setMask</span>();</span><br><span class=line>        <span class=comment>// 滚动消失的代码和阅读进度有冲突，因此放到readPercent.js里面了</span></span><br><span class=line>        $(<span class=string>&quot;.rightMenu-item&quot;</span>).<span class="title function_">click</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            $(<span class=string>&#x27;.rmMask&#x27;</span>).<span class="title function_">attr</span>(<span class=string>&#x27;style&#x27;</span>, <span class=string>&#x27;display: none&#x27;</span>);</span><br><span class=line>        &#125;)</span><br><span class=line>        $(<span class="variable language_">window</span>).<span class="title function_">resize</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            rmf.<span class="title function_">showRightMenu</span>(<span class=literal>false</span>);</span><br><span class=line>            $(<span class=string>&#x27;.rmMask&#x27;</span>).<span class="title function_">attr</span>(<span class=string>&#x27;style&#x27;</span>, <span class=string>&#x27;display: none&#x27;</span>);</span><br><span class=line>        &#125;)</span><br><span class=line>        mask.<span class=property>onclick</span> = <span class=function>() =&gt;</span> &#123;</span><br><span class=line>            $(<span class=string>&#x27;.rmMask&#x27;</span>).<span class="title function_">attr</span>(<span class=string>&#x27;style&#x27;</span>, <span class=string>&#x27;display: none&#x27;</span>);</span><br><span class=line>        &#125;</span><br><span class=line>        rmf.<span class="title function_">showRightMenu</span>(<span class=literal>true</span>, pageY, pageX);</span><br><span class=line>        $(<span class=string>&#x27;.rmMask&#x27;</span>).<span class="title function_">attr</span>(<span class=string>&#x27;style&#x27;</span>, <span class=string>&#x27;display: flex&#x27;</span>);</span><br><span class=line>        <span class=keyword>return</span> <span class=literal>false</span>;</span><br><span class=line>    &#125;;</span><br><span class=line></span><br><span class=line>    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class=string>&#x27;click&#x27;</span>, <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>        rmf.<span class="title function_">showRightMenu</span>(<span class=literal>false</span>);</span><br><span class=line>    &#125;);</span><br><span class=line>&#125;</span><br><span class=line><span class=keyword>if</span> (!(navigator.<span class=property>userAgent</span>.<span class="title function_">match</span>(<span class=regexp>/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i</span>))) &#123;</span><br><span class=line>    <span class="title function_">popupMenu</span>()</span><br><span class=line>&#125;</span><br><span class=line><span class=keyword>const</span> box = <span class="variable language_">document</span>.<span class=property>documentElement</span></span><br><span class=line></span><br><span class=line><span class=keyword>function</span> <span class="title function_">addLongtabListener</span>(<span class=params>target, callback</span>) &#123;</span><br><span class=line>    <span class=keyword>let</span> timer = <span class=number>0</span> <span class=comment>// 初始化timer</span></span><br><span class=line></span><br><span class=line>    target.<span class=property>ontouchstart</span> = <span class=function>() =&gt;</span> &#123;</span><br><span class=line>        timer = <span class=number>0</span> <span class=comment>// 重置timer</span></span><br><span class=line>        timer = <span class=built_in>setTimeout</span>(<span class=function>() =&gt;</span> &#123;</span><br><span class=line>            <span class="title function_">callback</span>();</span><br><span class=line>            timer = <span class=number>0</span></span><br><span class=line>        &#125;, <span class=number>380</span>) <span class=comment>// 超时器能成功执行，说明是长按</span></span><br><span class=line>    &#125;</span><br><span class=line></span><br><span class=line>    target.<span class=property>ontouchmove</span> = <span class=function>() =&gt;</span> &#123;</span><br><span class=line>        <span class=built_in>clearTimeout</span>(timer) <span class=comment>// 如果来到这里，说明是滑动</span></span><br><span class=line>        timer = <span class=number>0</span></span><br><span class=line>    &#125;</span><br><span class=line></span><br><span class=line>    target.<span class=property>ontouchend</span> = <span class=function>() =&gt;</span> &#123; <span class=comment>// 到这里如果timer有值，说明此触摸时间不足380ms，是点击</span></span><br><span class=line>        <span class=keyword>if</span> (timer) &#123;</span><br><span class=line>            <span class=built_in>clearTimeout</span>(timer)</span><br><span class=line>        &#125;</span><br><span class=line>    &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class="title function_">addLongtabListener</span>(box, popupMenu)</span><br><span class=line></span><br><span class=line><span class=comment>// 全屏</span></span><br><span class=line>rmf.<span class=property>fullScreen</span> = <span class=keyword>function</span> (<span class=params></span>) &#123;</span><br><span class=line>    <span class=keyword>if</span> (<span class="variable language_">document</span>.<span class=property>fullscreenElement</span>) <span class="variable language_">document</span>.<span class="title function_">exitFullscreen</span>();</span><br><span class=line>    <span class=keyword>else</span> <span class="variable language_">document</span>.<span class=property>documentElement</span>.<span class="title function_">requestFullscreen</span>();</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>// 右键开关</span></span><br><span class=line><span class=keyword>if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class=string>&quot;mouse&quot;</span>) == <span class=literal>undefined</span>) &#123;</span><br><span class=line>    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class=string>&quot;mouse&quot;</span>, <span class=string>&quot;on&quot;</span>);</span><br><span class=line>&#125;</span><br><span class=line><span class=keyword>var</span> mouseMode = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class=string>&quot;mouse&quot;</span>);</span><br><span class=line></span><br></pre></td></tr></table></figure></li><li><p>在<code>_config.butterfly.yml</code>的<code>inject</code>配置项中引入<code>right-menu.js</code>和<code>jQuery</code>依赖。</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Inject</span></span><br><span class=line><span class=comment># Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span></span><br><span class=line><span class=attr>inject:</span></span><br><span class=line>  <span class=attr>bottom:</span></span><br><span class=line>    <span class=comment># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;script</span> <span class=string>type=&quot;text/javascript&quot;</span> <span class=string>src=&quot;https://cdn1.tianli0.top/npm/jquery@latest/dist/jquery.min.js&quot;&gt;&lt;/script&gt;</span> <span class=comment># 右键菜单依赖jQuery</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>&lt;script</span> <span class=string>type=&quot;text/javascript&quot;</span> <span class=string>src=&quot;/static/js/right-menu.js&quot;&gt;&lt;/script&gt;</span> <span class=comment># diy右键菜单</span></span><br></pre></td></tr></table></figure></li><li><p>侧边栏右键开关</p><p>修改<code>[ThemeRoot]\layout\includes\rightside.pug</code></p><figure class="highlight diff"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=meta>@@ -30,4 +30,7 @@</span></span><br><span class=line>       when &#x27;comment&#x27;</span><br><span class=line>         if commentsJsLoad</span><br><span class=line>           a#to_comment(href=&quot;#post-comment&quot; title=_p(&quot;rightside.scroll_to_comment&quot;))</span><br><span class=line>             i.fas.fa-comments</span><br><span class=line><span class=addition>+      when &#x27;mouse&#x27;</span></span><br><span class=line><span class=addition>+        button.share(type=&quot;button&quot; title=&#x27;右键模式&#x27; onclick=&quot;changeMouseMode()&quot;)</span></span><br><span class=line><span class=addition>+          i.fas.fa-mouse</span></span><br></pre></td></tr></table></figure><p>修改<code>_config.butterfly.yml</code>的<code>rightside_item_order</code>配置项：</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Don&#x27;t modify the following settings unless you know how they work</span></span><br><span class=line><span class=comment># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class=line><span class=comment># Don&#x27;t repeat the same value</span></span><br><span class=line><span class=attr>rightside_item_order:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>  <span class=comment># Default: readmode,translate,darkmode,hideAside</span></span><br><span class=line>  <span class=attr>hide:</span> <span class=string>readmode,translate,hideAside,mouse</span></span><br><span class=line>  <span class=comment># Default: toc,chat,comment</span></span><br><span class=line>  <span class=attr>show:</span> <span class=string>toc,chat,comment,darkmode</span></span><br></pre></td></tr></table></figure></li></ol></div></details><p></p><h2 id=待定-1><a href=#待定-1 class=headerlink title=待定></a>待定</h2><details class=folding-tag gray><summary>详细步骤</summary><div class=content></div></details></article><div class=post-copyright><div class=copyright-cc-box><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class=post-copyright__author_box><a class=post-copyright__author_img href=/about/ title=头像><img class=post-copyright__author_img_back src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/keqing.webp title=头像 alt=头像><img class=post-copyright__author_img_front src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/keqing.webp title=头像 alt=头像></a><div class=post-copyright__author_name>x1ang</div><div class=post-copyright__author_desc>东隅已逝 桑榆非晚</div></div><div class=post-copyright__post__info><a class=post-copyright__original title=该文章为原创文章，注意版权协议 href=https://x1ang.com/2025/09/19/butterfly%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/ >原创</a><a class=post-copyright-title><span onclick='rm.copyPageUrl("https://x1ang.com/2025/09/19/butterfly主题魔改/")'>butterfly主题魔改</span></a></div><div class=post-tools id=post-tools><div class=post-tools-left><div class=rewardLeftButton><div class=post-reward onclick=anzhiyu.addRewardMask()><div class="reward-button button--animated" title=赞赏作者><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class=reward-main><div class=reward-all><span class=reward-title>感谢你赐予我前进的力量</span><ul class=reward-group><li class=reward-item><a href=https://assets.blog.x1ang.com/config/wechat.webp target=_blank><img class=post-qr-code-img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/wechat.webp alt=微信></a><div class=post-qr-code-desc>微信</div></li><li class=reward-item><a href=https://assets.blog.x1ang.com/config/alipay.webp target=_blank><img class=post-qr-code-img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/alipay.webp alt=支付宝></a><div class=post-qr-code-desc>支付宝</div></li></ul><a class=reward-main-btn href=/about/#about-reward target=_blank><div class=reward-text>赞赏者名单</div><div class=reward-dec>因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id=quit-box onclick=anzhiyu.removeRewardMask() style=display:none></div></div><div class=shareRight><div class="share-link mobile"><div class=share-qrcode><div class=share-button title=使用手机访问这篇文章><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class=share-main><div class=share-main-all><div id=qrcode title=https://x1ang.com/2025/09/19/butterfly%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/ ></div><div class=reward-dec>使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class=share-button target=_blank href="https://service.weibo.com/share/share.php?title=butterfly主题魔改&amp;url=https://x1ang.com/2025/09/19/butterfly%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/&amp;pic=https://assets.blog.x1ang.com/butterfly主题魔改/butterfly.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class=share-button id=post-share-url title=复制链接 onclick=copyCurrentPageUrl()><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class=post-copyright__notice><span class=post-copyright-info>本博客所有文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href=https://x1ang.com target=_blank>x1ang</a>！</span></div></div><div class=post-tools-right><div class=tag_share><div class=post-meta__box><div class=post-meta__box__tag-list><a class=post-meta__box__tags href=/tags/%E9%AD%94%E6%94%B9/ ><span class=tags-punctuation><i class="anzhiyufont anzhiyu-icon-tag"></i></span>魔改<span class=tagsPageCount>6</span></a><a class=post-meta__box__tags href=/tags/%E7%AC%94%E8%AE%B0/ ><span class=tags-punctuation> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>笔记<span class=tagsPageCount>4</span></a><a class=post-meta__box__tags href=/tags/%E6%8F%92%E4%BB%B6/ ><span class=tags-punctuation> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>插件<span class=tagsPageCount>2</span></a><a class=post-meta__box__tags href=/tags/%E5%8D%9A%E5%AE%A2/ ><span class=tags-punctuation> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>博客<span class=tagsPageCount>2</span></a></div></div></div><div class=post_share><div class=social-share data-image="https://assets.blog.x1ang.com/config/default_cover_3.webp?_r_=9b83b97c-75b2-28d0-3b8c-ac6486da8d74" data-sites=facebook,twitter,wechat,qq,qzone></div><link rel=stylesheet href=https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css media=print onload='this.media="all"'><script src=https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js defer=defer></script></div></div><nav class=pagination-post id=pagination><div class="prev-post pull-left"><a href=/2025/03/15/C-%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/ ><img class=prev-cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/C++查漏补缺/C++.png onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class=pagination-info><div class=label>上一篇</div><div class=prev_info>C++查漏补缺</div></div></a></div><div class="next-post pull-right"><a href=/2025/10/17/anzhiyu%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/ ><img class=next-cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/anzhiyu主题魔改/anzhiyu.webp onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class=pagination-info><div class=label>下一篇</div><div class=next_info>anzhiyu主题魔改</div></div></a></div></nav><div class=relatedPosts><div class=headline><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style=font-size:1.5rem;margin-right:4px></i><span>喜欢这篇文章的人也看了</span></div><div class=relatedPosts-list><div><a href=/2025/10/17/anzhiyu%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/ title=anzhiyu主题魔改><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/anzhiyu主题魔改/anzhiyu.webp alt=cover><div class="content is-center"><div class=date><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-10-17</div><div class=title>anzhiyu主题魔改</div></div></a></div><div><a href=/2024/10/28/%E7%AC%94%E8%AE%B0%E6%9C%AC%E6%B0%AE%E5%8C%96%E9%95%93%E7%94%B5%E6%BA%90%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8C%97/ title=笔记本氮化镓电源使用指北><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://photo.x1ang.com/静物摄影/241019-c170电源/c170.webp alt=cover><div class="content is-center"><div class=date><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-10-28</div><div class=title>笔记本氮化镓电源使用指北</div></div></a></div><div><a href=/2022/09/05/diy%E5%8D%8A%E5%AF%BC%E4%BD%93%E5%B0%8F%E5%86%B0%E7%AE%B1%E5%BF%83%E5%BE%97/ title=diy半导体小冰箱心得（待上传）><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/diy半导体小冰箱心得/IMG_20220905_230807.webp alt=cover><div class="content is-center"><div class=date><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-09-05</div><div class=title>diy半导体小冰箱心得（待上传）</div></div></a></div><div><a href=/2022/07/08/diy%E6%98%BE%E7%A4%BA%E5%99%A8%E5%BF%83%E5%BE%97/ title=diy显示器心得（待上传）><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/diy显示器心得/IMG_20230222_120111.webp alt=cover><div class="content is-center"><div class=date><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-07-09</div><div class=title>diy显示器心得（待上传）</div></div></a></div><div><a href=/2024/06/02/%E8%A7%A3%E5%86%B3%E7%B4%A2%E5%B0%BCWH-1000XM4%E9%99%8D%E5%99%AA%E6%A8%A1%E5%BC%8F%E5%95%B8%E5%8F%AB%E9%97%AE%E9%A2%98/ title=解决索尼WH-1000XM4降噪模式啸叫问题><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/解决索尼WH-1000XM4降噪模式啸叫问题/wh1000xm4.webp alt=cover><div class="content is-center"><div class=date><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-02</div><div class=title>解决索尼WH-1000XM4降噪模式啸叫问题</div></div></a></div><div><a href=/2025/03/15/C-%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/ title=C++查漏补缺><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/C++查漏补缺/C++.png alt=cover><div class="content is-center"><div class=date><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-15</div><div class=title>C++查漏补缺</div></div></a></div></div></div><hr><div id=post-comment><div class=comment-head><div class=comment-headline><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class=comment-randomInfo><a onclick=anzhiyu.addRandomCommentInfo() href=javascript:void(0)>匿名评论</a><a href=/privacy style=margin-left:4px>隐私政策</a></div><div class=comment-tips id=comment-tips><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class=comment-wrap><div><div id=twikoo-wrap></div></div></div></div><div class=comment-barrage></div></div><div class=aside-content id=aside-content><div class="card-widget card-info"><div class=card-content><div class=author-info__sayhi id=author-info__sayhi onclick=anzhiyu.changeSayHelloText()></div><div class=author-info-avatar><img class=avatar-img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/keqing.webp onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt=avatar><div class=author-status><img class=g-status src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/doge.png alt=status></div></div><div class=author-info__description><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">相信你可以在这里找到对你有用的<b style=color:#fff>知识</b>和<b style=color:#fff>教程</b>。</div></div><div class=author-info__bottom-group><a class=author-info__bottom-group-left href=/about><h1 class=author-info__name>x1ang</h1><div class=author-info__desc>东隅已逝 桑榆非晚</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href=https://github.com/x1angji target=_blank title=Github><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href=https://steamcommunity.com/id/x1angji/ target=_blank title=Steam><i class="fab fa-steam faa-tada"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class=item-headline><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class=announcement_content>笔记正在陆续整理上传~</div></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class=toc-percentage></span></div><div class=toc-content><ol class=toc><li class="toc-item toc-level-1"><a class=toc-link href=#%E5%89%8D%E8%A8%80><span class=toc-number>1.</span> <span class=toc-text>前言</span></a></li><li class="toc-item toc-level-1"><a class=toc-link href=#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9><span class=toc-number>2.</span> <span class=toc-text>注意事项</span></a></li><li class="toc-item toc-level-1"><a class=toc-link href=#hexo%E4%B8%8Ebutterfly><span class=toc-number>3.</span> <span class=toc-text>hexo与butterfly</span></a></li><li class="toc-item toc-level-1"><a class=toc-link href=#%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0><span class=toc-number>4.</span> <span class=toc-text>插件实现</span></a><ol class=toc-child><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%87%AA%E5%8A%A8%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6><span class=toc-number>4.1.</span> <span class=toc-text>自动压缩文件</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1><span class=toc-number>4.2.</span> <span class=toc-text>字数统计</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD><span class=toc-number>4.3.</span> <span class=toc-text>文章搜索功能</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#Live2D><span class=toc-number>4.4.</span> <span class=toc-text>Live2D</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#violet%E7%95%99%E8%A8%80%E6%9D%BF><span class=toc-number>4.5.</span> <span class=toc-text>violet留言板</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%BB%9F%E4%B8%80%E9%A6%96%E9%A1%B5%E8%83%8C%E6%99%AF><span class=toc-number>4.6.</span> <span class=toc-text>统一首页背景</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%A1%B5%E8%84%9A%E7%BE%8E%E5%8C%96><span class=toc-number>4.7.</span> <span class=toc-text>页脚美化</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB%E7%A3%81%E8%B4%B4><span class=toc-number>4.8.</span> <span class=toc-text>文章分类磁贴</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%96%87%E7%AB%A0%E8%BD%AE%E6%92%AD><span class=toc-number>4.9.</span> <span class=toc-text>文章轮播</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AF%BC%E5%85%A5%E5%A4%96%E9%83%A8%E5%AD%97%E4%BD%93><span class=toc-number>4.10.</span> <span class=toc-text>导入外部字体</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%85%83%E7%B4%A0%E5%8A%A8%E7%94%BB><span class=toc-number>4.11.</span> <span class=toc-text>元素动画</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%AD%94%E6%94%B9><span class=toc-number>4.12.</span> <span class=toc-text>导航栏魔改</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%A4%9C%E9%97%B4%E6%A8%A1%E5%BC%8F%E6%A0%87%E9%A2%98%E9%9C%93%E8%99%B9%E7%81%AF><span class=toc-number>4.13.</span> <span class=toc-text>夜间模式标题霓虹灯</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE><span class=toc-number>4.14.</span> <span class=toc-text>外挂标签</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%9F%B3%E4%B9%90%E6%8F%92%E4%BB%B6><span class=toc-number>4.15.</span> <span class=toc-text>音乐插件</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98%E6%97%8B%E8%BD%AC%E5%B0%8F%E9%A3%8E%E8%BD%A6><span class=toc-number>4.16.</span> <span class=toc-text>文章标题旋转小风车</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%81%B6%E6%90%9E%E6%A0%87%E9%A2%98><span class=toc-number>4.17.</span> <span class=toc-text>自定义恶搞标题</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#Twikoo%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2><span class=toc-number>4.18.</span> <span class=toc-text>Twikoo评论系统部署</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#b%E7%AB%99%E8%A7%86%E9%A2%91%E9%80%82%E9%85%8D><span class=toc-number>4.19.</span> <span class=toc-text>b站视频适配</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%AF%84%E8%AE%BA%E5%8C%BA%E8%BE%93%E5%85%A5%E6%8F%90%E7%A4%BA><span class=toc-number>4.20.</span> <span class=toc-text>评论区输入提示</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#diy%E9%80%9A%E7%9F%A5%E6%A0%B7%E5%BC%8F><span class=toc-number>4.21.</span> <span class=toc-text>diy通知样式</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E5%8D%A1%E7%89%87%E7%BE%8E%E5%8C%96><span class=toc-number>4.22.</span> <span class=toc-text>个人信息卡片美化</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%BE%85%E5%AE%9A><span class=toc-number>4.23.</span> <span class=toc-text>待定</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%BF%BD%E7%95%AA%E9%A1%B5%E9%9D%A2%E3%80%81%E6%B8%B8%E6%88%8F%E6%8E%A8%E8%8D%90><span class=toc-number>4.24.</span> <span class=toc-text>追番页面、游戏推荐</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#Github-Action><span class=toc-number>4.25.</span> <span class=toc-text>Github Action</span></a></li></ol></li><li class="toc-item toc-level-1"><a class=toc-link href=#%E6%BA%90%E7%A0%81%E9%AD%94%E6%94%B9><span class=toc-number>5.</span> <span class=toc-text>源码魔改</span></a><ol class=toc-child><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%88%86%E4%BA%AB%E6%9C%AC%E9%A1%B5><span class=toc-number>5.1.</span> <span class=toc-text>分享本页</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%96%87%E7%AB%A0%E7%BB%9F%E8%AE%A1%E5%9B%BE><span class=toc-number>5.2.</span> <span class=toc-text>文章统计图</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%98%BC%E5%A4%9C%E5%88%87%E6%8D%A2%E5%8A%A8%E7%94%BB><span class=toc-number>5.3.</span> <span class=toc-text>昼夜切换动画</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95><span class=toc-number>5.4.</span> <span class=toc-text>右键菜单</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%BE%85%E5%AE%9A-1><span class=toc-number>5.5.</span> <span class=toc-text>待定</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class=aside-list><div class=aside-list-item><a class=thumbnail href=/2026/02/05/Cpp23%E6%96%B0%E7%89%B9%E6%80%A7%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/ title="C++23 新特性完全指南：从语法到实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://assets.blog.x1ang.com/config/default_cover_3.webp?_r_=9b83b97c-75b2-28d0-3b8c-ac6486da8d74" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="C++23 新特性完全指南：从语法到实践"></a><div class=content><a class=title href=/2026/02/05/Cpp23%E6%96%B0%E7%89%B9%E6%80%A7%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/ title="C++23 新特性完全指南：从语法到实践">C++23 新特性完全指南：从语法到实践</a><time datetime=2026-02-05T19:32:00.000Z title="发表于 2026-02-06 03:32:00">2026-02-06</time></div></div><div class=aside-list-item><a class=thumbnail href=/2026/02/05/Cpp20%E6%96%B0%E7%89%B9%E6%80%A7%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/ title="C++20 新特性完全指南：从语法到实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://assets.blog.x1ang.com/config/default_cover_3.webp?_r_=67cb8eb3-353a-dd9d-e4c2-7189de9ef333" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="C++20 新特性完全指南：从语法到实践"></a><div class=content><a class=title href=/2026/02/05/Cpp20%E6%96%B0%E7%89%B9%E6%80%A7%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/ title="C++20 新特性完全指南：从语法到实践">C++20 新特性完全指南：从语法到实践</a><time datetime=2026-02-05T19:31:00.000Z title="发表于 2026-02-06 03:31:00">2026-02-06</time></div></div><div class=aside-list-item><a class=thumbnail href=/2026/02/05/Cpp17%E6%96%B0%E7%89%B9%E6%80%A7%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/ title="C++17 新特性完全指南：从语法到实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://assets.blog.x1ang.com/config/default_cover_2.webp?_r_=07027681-e2ba-76e3-0581-7aa9d5ace786" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="C++17 新特性完全指南：从语法到实践"></a><div class=content><a class=title href=/2026/02/05/Cpp17%E6%96%B0%E7%89%B9%E6%80%A7%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/ title="C++17 新特性完全指南：从语法到实践">C++17 新特性完全指南：从语法到实践</a><time datetime=2026-02-05T19:30:00.000Z title="发表于 2026-02-06 03:30:00">2026-02-06</time></div></div><div class=aside-list-item><a class=thumbnail href=/2026/02/05/Cpp17-Result%E7%B1%BB%E5%9E%8B%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%BC%98%E5%8C%96/ title="C++17 Result 类型设计：构造函数优化与值语义"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://assets.blog.x1ang.com/config/default_cover_4.webp?_r_=91cbb402-fcaa-5b7f-f7b3-ae36f268eaef" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="C++17 Result 类型设计：构造函数优化与值语义"></a><div class=content><a class=title href=/2026/02/05/Cpp17-Result%E7%B1%BB%E5%9E%8B%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%BC%98%E5%8C%96/ title="C++17 Result 类型设计：构造函数优化与值语义">C++17 Result 类型设计：构造函数优化与值语义</a><time datetime=2026-02-05T19:03:00.000Z title="发表于 2026-02-06 03:03:00">2026-02-06</time></div></div><div class=aside-list-item><a class=thumbnail href=/2026/02/05/Cpp%E5%AE%8F%E5%AE%9A%E4%B9%89%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90GetterSetter/ title="C++ 宏元编程：自动生成属性访问器的设计模式"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://assets.blog.x1ang.com/config/default_cover_2.webp?_r_=912f95f2-725b-9738-4b0d-7dbb6526866a" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="C++ 宏元编程：自动生成属性访问器的设计模式"></a><div class=content><a class=title href=/2026/02/05/Cpp%E5%AE%8F%E5%AE%9A%E4%B9%89%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90GetterSetter/ title="C++ 宏元编程：自动生成属性访问器的设计模式">C++ 宏元编程：自动生成属性访问器的设计模式</a><time datetime=2026-02-05T19:02:00.000Z title="发表于 2026-02-06 03:02:00">2026-02-06</time></div></div></div></div></div></div></div></main><footer id=footer><div id=footer-wrap><div id=workboard><div id=runtimeTextTip></div></div><p id=ghbdages><a class=github-badge target=_blank href=https://hexo.io/ style=margin-inline:5px data-title=博客框架为Hexo_v7.0.0 title=博客框架为Hexo_v7.0.0><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/Frame-Hexo.svg alt=博客框架为Hexo_v7.0.0></a><a class=github-badge target=_blank href=https://blog.anheyu.com/ style=margin-inline:5px data-title=本站使用AnZhiYu主题 title=本站使用AnZhiYu主题><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/Theme-AnZhiYu-2E67D3.svg alt=本站使用AnZhiYu主题></a><a class=github-badge target=_blank href=https://hyperos.mi.com/font/zh/ style=margin-inline:5px data-title="本站使用 MiSans 字体" title="本站使用 MiSans 字体"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/Font-Misans-EC6617.svg alt="本站使用 MiSans 字体"></a><a class=github-badge target=_blank href=https://github.com/ style=margin-inline:5px data-title=本站项目由Github托管 title=本站项目由Github托管><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/Source-Github.svg alt=本站项目由Github托管></a><a class=github-badge target=_blank href=https://vercel.com/ style=margin-inline:5px data-title=本站线路托管于Vercel title=本站线路托管于Vercel><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/Hosted-Vercel-brightgreen.svg alt=本站线路托管于Vercel></a><a class=github-badge target=_blank href=http://creativecommons.org/licenses/by-nc-sa/4.0/ style=margin-inline:5px data-title=本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可 title=本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://assets.blog.x1ang.com/config/Copyright-BY-NC-SA.svg alt=本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可></a></p></div><div id=footer-bar><div class=footer-bar-links><div class=footer-bar-left><div id=footer-bar-tips><div class=copyright>&copy;2025 - 2026 By <a class=footer-bar-link href=/ title=x1ang target=_blank>x1ang</a></div></div><div id=footer-type-tips></div></div><div class=footer-bar-right><a class=footer-bar-link target=_blank rel=noopener href=https://github.com/anzhiyu-c/hexo-theme-anzhiyu title=主题>主题</a></div></div></div></footer></div><div id=sidebar><div id=menu-mask></div><div id=sidebar-menus><div class="sidebar-site-data site-data is-center"><a href=/archives/ title=archive><div class=headline>文章</div><div class=length-num>15</div></a><a href=/tags/ title=tag><div class=headline>标签</div><div class=length-num>25</div></a><a href=/categories/ title=category><div class=headline>分类</div><div class=length-num>5</div></a></div><span class=sidebar-menu-item-title>功能</span><div class=sidebar-menu-item><a class="darkmode_switchbutton menu-child" href=javascript:void(0); title=显示模式><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>网页</div><div class=back-menu-list><a class=back-menu-item href=https://x1ang.com/ title=博客><img class=back-menu-item-icon src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=/img/favicon.ico alt=博客><span class=back-menu-item-text>博客</span></a></div></div><div class=back-menu-list-group><div class=back-menu-list-title>项目</div><div class=back-menu-list><a class=back-menu-item target=_blank rel=noopener href=https://image.anheyu.com/ title=安知鱼图床><img class=back-menu-item-icon src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src=https://image.anheyu.com/favicon.ico alt=安知鱼图床><span class=back-menu-item-text>安知鱼图床</span></a></div></div></div><div class=menus_items><div class=menus_item><a class=site-page href=javascript:void(0);><span>文章</span></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/archives/ ><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style=font-size:.9em></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/categories/ ><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style=font-size:.9em></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/tags/ ><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style=font-size:.9em></i><span> 标签</span></a></li></ul></div><div class=menus_item><a class=site-page href=javascript:void(0);><span>娱乐</span></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href="/music/?id=14348481143&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style=font-size:.9em></i><span> 音乐厅</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/animations/ ><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style=font-size:.9em></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/games/ ><i class="fas fa-gamepad faa-tada"></i><span> 游戏集</span></a></li></ul></div><div class=menus_item><a class="site-page faa-parent animated-hover" href=/album/ ><span>相册</span></a></div><div class=menus_item><a class=site-page href=javascript:void(0);><span>友链</span></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/link/ ><i class="anzhiyufont anzhiyu-icon-link faa-tada" style=font-size:.9em></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/comments/ ><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style=font-size:.9em></i><span> 留言板</span></a></li></ul></div><div class=menus_item><a class=site-page href=javascript:void(0);><span>关于</span></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/website/ ><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style=font-size:.9em></i><span> 关于网站</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/about/ ><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style=font-size:.9em></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/equipment/ ><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style=font-size:.9em></i><span> 我的装备</span></a></li></ul></div></div><span class=sidebar-menu-item-title>标签</span><div class=card-tags><div class=item-headline></div><div class=card-tag-cloud><a href=/tags/C/ style=font-size:.88rem>C++<sup>7</sup></a><a href=/tags/C-17/ style=font-size:.88rem>C++17<sup>2</sup></a><a href=/tags/C-20/ style=font-size:.88rem>C++20<sup>1</sup></a><a href=/tags/C-23/ style=font-size:.88rem>C++23<sup>1</sup></a><a href=/tags/GaN%E7%94%B5%E6%BA%90/ style=font-size:.88rem>GaN电源<sup>1</sup></a><a href=/tags/Protobuf/ style=font-size:.88rem>Protobuf<sup>1</sup></a><a href=/tags/diy/ style=font-size:.88rem>diy<sup>2</sup></a><a href=/tags/git/ style=font-size:.88rem>git<sup>1</sup></a><a href=/tags/%E5%85%83%E7%BC%96%E7%A8%8B/ style=font-size:.88rem>元编程<sup>1</sup></a><a href=/tags/%E5%8D%8A%E5%AF%BC%E4%BD%93/ style=font-size:.88rem>半导体<sup>1</sup></a><a href=/tags/%E5%8D%9A%E5%AE%A2/ style=font-size:.88rem>博客<sup>2</sup></a><a href=/tags/%E5%AE%8F/ style=font-size:.88rem>宏<sup>1</sup></a><a href=/tags/%E5%BA%8F%E5%88%97%E5%8C%96/ style=font-size:.88rem>序列化<sup>1</sup></a><a href=/tags/%E5%BD%97%E6%98%9F/ style=font-size:.88rem>彗星<sup>1</sup></a><a href=/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ style=font-size:.88rem>性能优化<sup>2</sup></a><a href=/tags/%E6%8F%92%E4%BB%B6/ style=font-size:.88rem>插件<sup>2</sup></a><a href=/tags/%E6%98%BE%E7%A4%BA%E5%99%A8/ style=font-size:.88rem>显示器<sup>1</sup></a><a href=/tags/%E7%8E%B0%E4%BB%A3C/ style=font-size:.88rem>现代C++<sup>3</sup></a><a href=/tags/%E7%AC%94%E8%AE%B0/ style=font-size:.88rem>笔记<sup>4</sup></a><a href=/tags/%E7%B1%BB%E5%9E%8B%E8%AE%BE%E8%AE%A1/ style=font-size:.88rem>类型设计<sup>1</sup></a><a href=/tags/%E7%BC%96%E8%AF%91%E5%99%A8/ style=font-size:.88rem>编译器<sup>3</sup></a><a href=/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ style=font-size:.88rem>设计模式<sup>1</sup></a><a href=/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/ style=font-size:.88rem>错误处理<sup>1</sup></a><a href=/tags/%E9%A3%8E%E5%85%89/ style=font-size:.88rem>风光<sup>1</sup></a><a href=/tags/%E9%AD%94%E6%94%B9/ style=font-size:.88rem>魔改<sup>6</sup></a></div></div><hr></div></div><div id=rightside><div id=rightside-config-hide><button id=readmode type=button title=阅读模式><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id=hide-aside-btn type=button title=单栏和双栏切换><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button><button id=darkmode type=button title=浅色和深色模式转换><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><a id=to_comment href=#post-comment title=直达评论><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id=switch-commentBarrage href=javascript:anzhiyu.switchCommentBarrage(); title=开关弹幕><i class="anzhiyufont anzhiyu-icon-danmu"></i></a></div><div id=rightside-config-show><button id=rightside-config type=button title=设置><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class=close id=mobile-toc-button type=button title=目录><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id=translateLink type=button title=简繁转换>繁</button><button id=go-up type=button title=回到顶部><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id=nav-music><a id=nav-music-hoverTips onclick=anzhiyu.musicToggle() accesskey=m>播放音乐</a><div id=console-music-bg></div><meting-js id=14320891825 server=netease type=playlist mutex=true preload=none theme=var(--anzhiyu-main) data-lrctype=0 order=random volume=0.3></meting-js></div><div id=local-search><div class=search-dialog><nav class=search-nav><span class=search-dialog-title>搜索</span><span id=loading-status></span><button class=search-close-button><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class=is-center id=loading-database><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span> 数据库加载中</span></div><div class=search-wrap><div id=local-search-input><div class=local-search-box><input class=local-search-box--input placeholder=搜索文章 type=text></div></div><hr><div id=local-search-results></div></div></div><div id=search-mask></div></div><div id=rightMenu><div class="rightMenu-group rightMenu-small"><div class=rightMenu-item id=menu-backward><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class=rightMenu-item id=menu-forward><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class=rightMenu-item id=menu-refresh><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style=font-size:1rem></i></div><div class=rightMenu-item id=menu-top><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class=rightMenu-item id=menu-copytext><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class=rightMenu-item id=menu-pastetext><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class=rightMenu-item id=menu-commenttext><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class=rightMenu-item id=menu-newwindow><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class=rightMenu-item id=menu-copylink><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class=rightMenu-item id=menu-copyimg><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class=rightMenu-item id=menu-downloadimg><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class=rightMenu-item id=menu-newwindowimg><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class=rightMenu-item id=menu-search><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class=rightMenu-item id=menu-searchBaidu><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class=rightMenu-item id=menu-music-toggle><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class=rightMenu-item id=menu-music-back><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class=rightMenu-item id=menu-music-forward><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class=rightMenu-item id=menu-music-playlist onclick="window.open(&quot;https://music.163.com/#/playlist?id=14348481143&quot;, &quot;_blank&quot;);" style=display:none><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class=rightMenu-item id=menu-music-copyMusicName><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id=menu-randomPost><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href=/categories/ ><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href=/tags/ ><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class=rightMenu-item id=menu-copy href=javascript:void(0);><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class=rightMenu-item id=menu-commentBarrage href=javascript:void(0);><i class="anzhiyufont anzhiyu-icon-message"></i><span class=menu-commentBarrage-text>关闭热评</span></a><a class=rightMenu-item id=menu-darkmode href=javascript:void(0);><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class=menu-darkmode-text>深色模式</span></a><a class=rightMenu-item id=menu-translate href=javascript:void(0);><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id=rightmenu-mask></div><div><script src=/js/utils.js></script><script src=/js/main.js></script><script src=/js/tw_cn.js></script><script src=https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js></script><script src=https://cdn.cbd.int/instant.page@5.2.0/instantpage.js type=module></script><script src=https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js></script><script src=https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><canvas id=universe></canvas><script async src=https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js></script><script async src=/anzhiyu/random.js></script><script async=async>(()=>{var n,r,o,a,i,e=new Date("05/17/2025 12:00:00"),l=new Date;setInterval(()=>{var t;if(l=new Date,i=l.getHours(),t=(l-e)/1e3/60/60/24,n=Math.floor(t),t=(l-e)/1e3/60/60-24*n,r=Math.floor(t),1==String(r).length&&(r="0"+r),t=(l-e)/1e3/60-1440*n-60*r,o=Math.floor(t),1==String(o).length&&(o="0"+o),t=(l-e)/1e3-86400*n-3600*r-60*o,a=Math.round(t),1==String(a).length&&(a="0"+a),document.getElementById("footer")){let e="";e=(i<18&&9<=i||null!=(t=document.querySelector("#workboard .workSituationImg"))&&(t.src="",t.title="下班了就该开开心心的玩耍，嘿嘿~",t.alt="下班了就该开开心心的玩耍，嘿嘿~"),`本站居然运行了 ${n} 天<span id='runtime'> ${r} 小时 ${o} 分 ${a} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`),document.getElementById("runtimeTextTip")&&(document.getElementById("runtimeTextTip").innerHTML=e)}},1e3)})()</script><script src=/js/search/local-search.js></script><div class=js-pjax><script>(()=>{let t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://comment.x1ang.com",region:"",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))};var o=()=>{"object"==typeof twikoo?setTimeout(n,0):getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(n)};let e=()=>{let o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://comment.x1ang.com",region:"",urls:[window.location.pathname],includeReply:!1}).then(t=>{o.textContent=t[0].count}).catch(t=>{console.error(t)})},n=()=>{t(),GLOBAL_CONFIG_SITE.isPost&&e()};o()})()</script><input type=hidden name=page-type id=page-type value=post><script async src=/js/anzhiyu/comment_barrage.js></script></div><script>window.addEventListener("load",()=>{let t=e=>e=""!==e&&150<(e=(e=(e=(e=e.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length?e.substring(0,150)+"...":e,a=t=>{let a="";if(t.length)for(let e=0;e<t.length;e++)a=(a=(a+="<div class='aside-list-item'>")+`<a href='${t[e].url}' class='thumbnail'><img data-lazy-src='${t[e].avatar}' alt='${t[e].nick}'><div class='name'><span>${t[e].nick} </span></div></a>`)+`<div class='content'>
        <a class='comment' href='${t[e].url}' title='${t[e].content}'>${t[e].content}</a>
        <time datetime="${t[e].date}">${anzhiyu.diffDate(t[e].date,!0)}</time></div>
        </div>`;else a+="没有评论";var e=document.querySelector("#card-newest-comments .aside-list");e&&(e.innerHTML=a),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(e)};var e=()=>{var e;document.querySelector("#card-newest-comments .aside-list")&&((e=saveToLocal.get("twikoo-newest-comments"))?a(JSON.parse(e)):(e=()=>{twikoo.getRecentComments({envId:"https://comment.x1ang.com",region:"",pageSize:6,includeReply:!0}).then(function(e){e=e.map(e=>({content:t(e.comment),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(e),60/1440),a(e)}).catch(function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"})},"object"==typeof twikoo?e():getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(e)))};e(),document.addEventListener("pjax:complete",e)})</script><script>var visitorMail="visitor@x1ang.com"</script><script async data-pjax src=https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js></script><script src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js></script><script src=/js/anzhiyu/right_click_menu.js></script><link rel=stylesheet href=https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css><link rel=stylesheet href=https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css media=print onload='this.media="all"'><script src=https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js></script><script src=https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js></script><script src=https://cdn.cbd.int/pjax@0.2.8/pjax.min.js></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();var e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{let t=document.createElement("script");var a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src=https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js></script></div><div id=popup-window><div class=popup-window-title>通知</div><div class=popup-window-divider></div><div class=popup-window-content><div class=popup-tip>你好呀</div><div class=popup-link><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div><script async src=//at.alicdn.com/t/font_2032782_8d5kxvn09md.js></script><script src=/static/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05></script><script>L2Dwidget.init({pluginRootPath:"static/live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/static/live2dw/assets/seifuku.model.json"},display:{position:"right",width:200,height:400},mobile:{show:!1},log:!1})</script></body></html>